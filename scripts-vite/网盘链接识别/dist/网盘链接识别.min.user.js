// ==UserScript==
// @name         ç½‘ç›˜é“¾æ¥è¯†åˆ«
// @namespace    https://greasyfork.org/zh-CN/scripts/445489
// @version      2024.9.24
// @author       WhiteSevs
// @description  è¯†åˆ«ç½‘é¡µä¸­æ˜¾ç¤ºçš„ç½‘ç›˜é“¾æ¥ï¼Œç›®å‰åŒ…æ‹¬ç™¾åº¦ç½‘ç›˜ã€è“å¥äº‘ã€å¤©ç¿¼äº‘ã€ä¸­å›½ç§»åŠ¨äº‘ç›˜(åŸ:å’Œå½©äº‘)ã€é˜¿é‡Œäº‘ã€æ–‡å”å”ã€å¥¶ç‰›å¿«ä¼ ã€123ç›˜ã€è…¾è®¯å¾®äº‘ã€è¿…é›·ç½‘ç›˜ã€115ç½‘ç›˜ã€å¤¸å…‹ç½‘ç›˜ã€åŸé€šç½‘ç›˜(éƒ¨åˆ†)ã€åšæœäº‘ã€UCç½‘ç›˜ã€BTç£åŠ›ï¼Œæ”¯æŒè“å¥äº‘ã€å¤©ç¿¼äº‘(éœ€ç™»å½•)ã€123ç›˜ã€å¥¶ç‰›ã€UCç½‘ç›˜(éœ€ç™»å½•)ã€åšæœäº‘(éœ€ç™»å½•)å’Œé˜¿é‡Œäº‘ç›˜(éœ€ç™»å½•ï¼Œä¸”é™åˆ¶åœ¨ç½‘ç›˜é¡µé¢è§£æ)ç›´é“¾è·å–ä¸‹è½½ï¼Œé¡µé¢åŠ¨æ€ç›‘æ§åŠ è½½çš„é“¾æ¥ï¼Œå¯è‡ªå®šä¹‰è§„åˆ™æ¥è¯†åˆ«å°ä¼—ç½‘ç›˜/ç½‘èµšç½‘ç›˜æˆ–å…¶å®ƒè‡ªå®šä¹‰çš„é“¾æ¥ã€‚
// @license      GPL-3.0-only
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAAAXNSR0IArs4c6QAACsJJREFUeF7tXW+IHdUVP2c2u8kHIQYL0TRIaK1SgrFFaZsvVkpAo6YR1LJpa9jUd++83SUpSrUNBFRCrVgxNOv+mTOvJBBNmtpamoQG9UNBKLHFDzEtFttKBdOYQENE/Lb75vZd2cVNum/uvXNnZt/MnoGQD+/c8+d3fu+c+2f2PgR+ljQCuKSj5+CBCbDEScAEYAIscQSWePhcAZgASxyBJR4+VwAmQHEIjIyM3DAzM/M1pdSXEfEWALgVANbkaPE0ABwhomdz1GmtSgixHxF3Wg8wC55HxPeVUu8DgP7/jRUrVvxpbGzsY/PQbBK5VwCd9Ha7vVkptRkA9L8yHiKisAxDczaklL8GgAfLsImIryql3gSAqBPnh3nazI0AjUZjbRAEjwLAI3k6aKtLKbUjjuODtvI+cs1m894kSY776Mg49hwAxHkSIRcCSCl10nXy12YMLI9hrxDR/XkoMukQQrQQ8WGTXIGfn0PEZ6IoGvO14U0AKeUJALjH15Ecxr9ARHn2464uCSEOI+K2HHz2VXGUiAZ9lHgRQEp5BgBu9nEgr7FBEGyZmprSZCz8EUIMIuKRwg3ZGfiAiK63E/1/qcwEkFJ+BAArsxrOedzLRPSdnHWmqgvD8EBntj5Ups0UWxeI6NosvmQigBDibUTckMVgAWNKXwHMxSClfBwAtgPA+gLiclX5GhHd6TrImQBhGO5RSu11MHQREY8nSXICEf/R399/bnx8/KLD+CUl2plf3BgEwa1JktyOiN8HgKscAHCuhE4EaDabQ0mSHLBxSCml5weHlFKHWq3WBZsxLHM5AlLKLwLAQwCwCwBWWeLzKBHts5S1fx9ASnkdALxluZPXIiJh6wTLpSMwPDx8U7vd/iEADFtgdTZJko2tVuushawTAZ4EgCdMSpVSW+M4PmaS48/dEZBSWuWgMznfR0R6X8b4WLUA228/Ig5GUXTUaJUFMiMghNiEiK+bFCxbtuxLExMT/zLJ2RLAhnmTRDRiMsif+yMQhuFupdTTaZoQcZfNTqEVAYQQf0TEO1IMXurr69s4OTn5rn94rMEGAYul+Ekiutuky0iAoaGhqwcGBi4ZFD1FRLpK8FMSAkKIHyHiz9PM2bQBIwGklPcBwO9SDH0CAF8hovdKip3NAECj0VgdBMHf05aHSqntcRwfSm0VJjSllD8DgJ90k1NKTcVxbLM8MZnizx0RkFL+BgC6noAi4nNRFD3mSwB96NH1xKnMc3hHfGovbnEoZdweNraAMAxPKaW+0Q1NRFwfRdE7tUe7BwOUUuqTWL3j2u0xHhIZCSCl1K8gdT1pIiKjjh7ErhYujY6OXjM9Pf3ftGBM+TEmT0qpfAzUAukeDsI3P0yAHk6ujWtMABuUaizDBKhxcm1CYwLYoFRjGSZAjZNrExoTwAalGsswAWqcXJvQmAA2KNVYhglQ4+TahMYEsEGpxjK1IYCU8vcAcJvlW8dVTqn+C9+3iGhrHkHUggCmIPIAqhd1mA5qbHw2YWeysehnAWVetGADaMkyzn/Jc6V/dSDAeQBYXTLwvWLOeF5vcrQOBEg9bjYBUPXPTSXaFB8TwIRQj3/OBDC8cNLj+fN2r+oEOE1EX/VBwVTCfHRXYWzBBDDmx7gKMNyF92PfO/pMBPAFKO9Zsyupio7PNz9GAuiAuyzVcrmZo2iA6k4A3/xYEUAb0Xfjtdvt+xBxlVLqeF538jEB8nmrOmt+rAngWvps5ZkA+RDAFu8r5XqBAP9J2f8/R0SfzxrcQuMWgXClxueKVS8QQB8CfbuL48fyOjSZ078IBCg1vsoRYHYSs+BuYN4rgDRbc8CVabMIW5UkwLyZ7O2zAbxR1MWPZVeAeZVH3y5eeHyVJYCr41nlF4sAWf0tetyizwGKDnCx9wHKjs/VHhPgCsR6oS+7JtFHngnABPDhT/XG8hzg8pxxBeAKUL1vsY/HXAG4AvCNJ/M4wC2AW4BPQa3eWG4B3AK4BXAL6F65eCOoelXdyWNuAdwCuAVwC+AWMIcALwN5GejUQisvzHMAngPwHIDnADwH4DlAFw7wPkDlu3x6ADwHyDgHCMPwLqXUJgCYDoLgpampqb9VkSt1JUDW/FgtA6WUvwSAH1yR8Bc7vxSmf9i4Uk8dCeCTHyMBDL8a9j0iOlwlBtSNAL75sSGA/v1Z/TPmCz3/JqIvMAEWDwEppVd+bAhQq3VzDSuAV36YABXfCvYlNBOACbC01s2+35jF6/YLW/aNhysAVwCuAPMRqNpWMFcAx5rsC5ijucLFfePhFsAtgFsAt4AUDviWmMJroKMBjsfxNJABc2RYyeK++VmKc4CevrfPlT9MAEfEZn+cqrR7CR3dcxZnAjhD9unl16XdS5jBPachTAAnuD4Tnr0Bvefu7XMNhwngiljN5JkANUuoazhMAFfEaia/6ATo7+//3Pj4+MWa4VqZcAwEOE9E16UFY7MPkLZu1ro3ENFfK4NYjRwVQtyIiO92CwkR34yiaKMvAY4BwJZuSpRSD8Rx/Nsa4VqZUMIw3KaUSnsr+1dEtM2LAEKIvYi4J4VlB6Mo2lEZ1GrkqBBiEhGbKSE9Q0S7vQggpfwuALyUouRikiTrW63WhRph2/OhSCn1q/qnAeCqlOp8dxzHJ70IMDIycsPMzMw/05QopR6L4/i5nketRg5KKZ8EgCfSQlq+fPnKsbGxj70IoAdLKf8AAJtTmHYmjuNbaoRvT4cyPDx8U7vdPgUAq1Ja86tRFN1lCsS4CtAKwjDcqZTab1DWIiJhMsif+yMgpZwAgGGDpqeISFeJ1MeKADZtQFtRSm2N41ivGvgpCAGb0t8p2ucA4DYi+tDkhhUBZtvA8wDwiFEh4mAURUdNcvy5OwJCiE2I+LrFSKtvv9ZjTYBGo7E2CALdd9ZaODDZ19f3i8nJya6bFBY6WGQeAmEY7lZKPW0BivW334kAs1VAVwBdCWyeSwCg5w2HOvcIvGczgGUuR6DRaKxGRH0Hw0OIuMEGH0TcFUXRmI2sMwFmSXACAO6xNQAAnyilXuysIv4cBMFfoih6x2HskhIdHR29Znp6eo1Saj0iPgAA30qb6S8AzlEiGnQBzboFzFcqpTwDADe7GCpIVm+EHCGiZwvSn6pWCLEfEXcuhu0FbH5ARNe7+pKJALOV4CMAWOlqsCB56sx4w4J0L6h29o2iB8u0mWLrAhFdm8WXzATQxoQQb9v2pizOuYxRSu2I4/igy5isss1m894kSY5nHZ/zuNeI6M6sOr0IoI2GYbhHKbU3qwM5jnulcyx9f476uqoSQrQQ8eEybBlsvOz7G8veBNAONpvNoSRJfgoAaxYRlBeIqJR+3DmHP9w5h089Zi0Yh7N6NUZE+3zt5EKA2TmBfvNE92G9HVw6EYIg2DI1NaVXKIU/QohBRDxSuKGFDexLkuT5VqulSeD95EaAOU+klJ8SQSn1TUS8w9tDOwXepdDOzGdSYRgeUEoNuY7LKH8SEU/29fWdnJiY0LeC5fbkToD5ng0NDV09MDCgSfB1AFiHiOuUUusAINOMtUvUpa8A5pH9cQDYDgDrc8sIgH6vQk+uzyRJcqa/v/9U3kmf72uhBMgRFFZVEAJMgIKArYpaJkBVMlWQn0yAgoCtilomQFUyVZCfTICCgK2KWiZAVTJVkJ9MgIKArYra/wGYigzMiqJYZwAAAABJRU5ErkJggg==
// @supportURL   https://github.com/WhiteSevs/TamperMonkeyScript/issues
// @match        *://*/*
// @exclude      /^http(s|)://s1.hdslb.com/.*$/
// @exclude      /^http(s|)://www.bilibili.com/video.*$/
// @exclude      /^http(s|)://message.bilibili.com/.*$/
// @exclude      /^http(s|)://live.bilibili.com/.*$/
// @exclude      /^http(s|)://.*.mail.qq.com/.*$/
// @exclude      /^http(s|)://.*video.qq.com/.*$/
// @exclude      /^http(s|)://.*.vscode-cdn.net/.*$/
// @exclude      /^http(s|)://.*vscode.dev/.*$/
// @exclude      /^http(s|)://cloudgame.ds.163.com/.*$/
// @exclude      /^http(s|)://cloudgame.webapp.163.com/.*$/
// @exclude      /^http(s|)://cg.163.com/.*$/
// @exclude      /^http(s|)://.*.youtube.com/.*$/
// @require      https://update.greasyfork.org/scripts/494167/1413255/CoverUMD.js
// @require      https://update.greasyfork.org/scripts/456470/1413242/%E7%BD%91%E7%9B%98%E9%93%BE%E6%8E%A5%E8%AF%86%E5%88%AB-%E5%9B%BE%E6%A0%87%E5%BA%93.js
// @require      https://update.greasyfork.org/scripts/486152/1448081/Crypto-JS.js
// @require      https://update.greasyfork.org/scripts/465550/1448580/JS-%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6.js
// @require      https://fastly.jsdelivr.net/npm/qmsg@1.2.3/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/utils@2.3.0/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/domutils@1.3.3/dist/index.umd.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/pops@1.6.6/dist/index.umd.js
// @connect      *
// @connect      lanzoub.com
// @connect      lanzouc.com
// @connect      lanzoue.com
// @connect      lanzouf.com
// @connect      lanzoug.com
// @connect      lanzouh.com
// @connect      lanzoui.com
// @connect      lanzouj.com
// @connect      lanzouk.com
// @connect      lanzoul.com
// @connect      lanzoum.com
// @connect      lanzouo.com
// @connect      lanzoup.com
// @connect      lanzouq.com
// @connect      lanzous.com
// @connect      lanzout.com
// @connect      lanzouu.com
// @connect      lanzouv.com
// @connect      lanzouw.com
// @connect      lanzoux.com
// @connect      lanzouy.com
// @connect      lanosso.com
// @connect      lanzn.com
// @connect      lanzog.com
// @connect      lanpw.com
// @connect      lanpv.com
// @connect      lanzv.com
// @connect      wwentua.com
// @connect      ilanzou.com
// @connect      189.cn
// @connect      123pan.com
// @connect      123pan.cn
// @connect      wenshushu.cn
// @connect      jianguoyun.com
// @connect      cowtransfer.com
// @connect      cowcs.com
// @connect      aliyundrive.com
// @connect      baidu.com
// @connect      139.com
// @connect      weiyun.com
// @connect      xunlei.com
// @connect      115.com
// @connect      quark.cn
// @connect      jianguoyun.com
// @connect      uc.cn
// @connect      ctfile.com
// @connect      sharepoint.com
// @grant        GM_addStyle
// @grant        GM_deleteValue
// @grant        GM_download
// @grant        GM_getResourceText
// @grant        GM_getValue
// @grant        GM_info
// @grant        GM_registerMenuCommand
// @grant        GM_setValue
// @grant        GM_unregisterMenuCommand
// @grant        GM_xmlhttpRequest
// @grant        unsafeWindow
// @run-at       document-end
// ==/UserScript==

(function (f, j, Re, ze) {
	'use strict';

	var at=Object.defineProperty;var st=(t,i,n)=>i in t?at(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n;var I=(t,i,n)=>st(t,typeof i!="symbol"?i+"":i,n);var qe=typeof GM_deleteValue<"u"?GM_deleteValue:void 0,Te=typeof GM_download<"u"?GM_download:void 0,Ve=typeof GM_getResourceText<"u"?GM_getResourceText:void 0,O=typeof GM_getValue<"u"?GM_getValue:void 0,pe=typeof GM_info<"u"?GM_info:void 0,rt=typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0,$=typeof GM_setValue<"u"?GM_setValue:void 0,ot=typeof GM_unregisterMenuCommand<"u"?GM_unregisterMenuCommand:void 0,lt=typeof GM_xmlhttpRequest<"u"?GM_xmlhttpRequest:void 0,X=typeof unsafeWindow<"u"?unsafeWindow:void 0,ct=window;const dt={$data:{get enable(){return Y.getValue("httpx-use-cookie-enable")},get useDocumentCookie(){return Y.getValue("httpx-use-document-cookie")},cookieRule:[]},fixCookieSplit(t){return d.isNotNull(t)&&!t.trim().endsWith(";")&&(t+=";"),t},concatCookie(t,i){return d.isNull(t)?i:(t=t.trim(),i=i.trim(),t=this.fixCookieSplit(t),i.startsWith(";")&&(i=i.substring(1)),t.concat(i))},handle(t){if(t.fetch||!this.$data.enable)return;let i="",n=t.url;n.startsWith("//")&&(n=window.location.protocol+n);let e=new URL(n);this.$data.useDocumentCookie&&e.hostname.endsWith(window.location.hostname.split(".").slice(-2).join("."))&&(i=this.concatCookie(i,document.cookie.trim()));for(let a=0;a<this.$data.cookieRule.length;a++){let s=this.$data.cookieRule[a];if(e.hostname.match(s.hostname)){let r=Y.getValue(s.key);if(d.isNull(r))break;i=this.concatCookie(i,r);}}d.isNotNull(i)&&(t.headers&&t.headers.Cookie?t.headers.Cookie=this.concatCookie(t.headers.Cookie,i):t.headers.Cookie=i,h.info(["Httpx => è®¾ç½®cookie:",t])),t.headers&&t.headers.Cookie!=null&&d.isNull(t.headers.Cookie)&&delete t.headers.Cookie;}};class We{constructor(i){I(this,"storageKey");if(typeof i=="string"){let n=i.trim();if(n=="")throw new Error("keyå‚æ•°ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²");this.storageKey=n;}else throw new Error("keyå‚æ•°ç±»å‹é”™è¯¯ï¼Œå¿…é¡»æ˜¯å­—ç¬¦ä¸²");this.getLocalValue();}getLocalValue(){let i=O(this.storageKey);return i==null&&(i={},this.setLocalValue(i)),i}setLocalValue(i){$(this.storageKey,i);}set(i,n){let e=this.getLocalValue();Reflect.set(e,i,n),this.setLocalValue(e);}get(i,n){let e=this.getLocalValue();return Reflect.get(e,i)??n}getAll(){return this.getLocalValue()}delete(i){let n=this.getLocalValue();Reflect.deleteProperty(n,i),this.setLocalValue(n);}has(i){let n=this.getLocalValue();return Reflect.has(n,i)}keys(){let i=this.getLocalValue();return Reflect.ownKeys(i)}values(){let i=this.getLocalValue();return Reflect.ownKeys(i).map(n=>Reflect.get(i,n))}clear(){qe(this.storageKey);}}const V={replaceParam(t,i={}){return typeof t!="string"||Object.keys(i).forEach(n=>{let e=i[n];if(d.isNotNull(e)){try{t=t.replaceAll(`{#encodeURI-${n}#}`,encodeURI(e));}catch{h.error(["encodeURI-æ›¿æ¢çš„æ–‡æœ¬å¤±è´¥",[e]]);}try{t=t.replaceAll(`{#encodeURIComponent-${n}#}`,encodeURIComponent(e));}catch{h.error(["encodeURIComponent-æ›¿æ¢çš„æ–‡æœ¬å¤±è´¥",[e]]);}try{t=t.replaceAll(`{#decodeURI-${n}#}`,decodeURI(e));}catch{h.error(["decodeURI-æ›¿æ¢çš„æ–‡æœ¬å¤±è´¥",[e]]);}try{t=t.replaceAll(`{#decodeURIComponent-${n}#}`,decodeURIComponent(e));}catch{h.error(["encodeURIComponent-æ›¿æ¢çš„æ–‡æœ¬å¤±è´¥",[e]]);}t=t.replaceAll(`{#${n}#}`,e);}}),t},replaceChinese(t){return t.replace(/[\u4e00-\u9fa5]/g,"")},getDecodeComponentUrl(t=window.location.href){try{t=decodeURIComponent(t);}catch{}return t}},q={$data:{STORAGE_KEY:"rule"},init(){this.initRule();},initRule(){this.getAllRule();},addRule(t){let i=this.getAllRule();i.push(t),ge.set(this.$data.STORAGE_KEY,i);},getRule(t){return this.getAllRule().find(i=>i.uuid===t)},getRuleData(t){var i;return typeof t=="string"?(i=this.getRule(t))==null?void 0:i.data:t.data},getRuleDataValue(t,i,n){let e=this.getRuleData(t);return Reflect.get(e,i)??n},updateRule(t){let i=this.getAllRule();for(let n=0;n<i.length;n++)if(i[n].uuid===t.uuid){i[n]=t;break}ge.set(this.$data.STORAGE_KEY,i);},updateRuleValue(t,i,n){let e=this.getAllRule();for(let a=0;a<e.length;a++){const s=e[a];if(s.uuid===t){Reflect.set(s,i,n);break}}ge.set(this.$data.STORAGE_KEY,e);},deleteRule(t){let i=this.getAllRule(),n=!1,e=t;for(let a=0;a<i.length;a++)if(i[a].uuid===e){i.splice(a,1),n=!0;break}return ge.set(this.$data.STORAGE_KEY,i),n},deleteAllRule(){ge.delete(this.$data.STORAGE_KEY);},getAllRule(){return ge.get(this.$data.STORAGE_KEY,[])},getUrlMatchedRule(t=window.location.href){return this.getAllRule().filter(n=>{let e=new RegExp(n.url,"ig");return !!t.match(e)})}},L={matchRange_text:{before:t=>`${t}-text-match-range-before`,after:t=>`${t}-text-match-range-after`},matchRange_html:{before:t=>`${t}-html-match-range-before`,after:t=>`${t}-html-match-range-after`},function:{enable:t=>`${t}-enable`,checkLinkValidity:t=>`${t}-check-link-valid`,linkClickMode:t=>`${t}-click-mode`},linkClickMode_openBlank:{openBlankWithCopyAccessCode:t=>`${t}-open-blank-with-copy-accesscode`},schemeUri:{enable:t=>`${t}-scheme-uri-enable`,isForwardLinearChain:t=>`${t}-scheme-uri-forward-linear-chain`,isForwardBlankLink:t=>`${t}-scheme-uri-forward-blank-link`,uri:t=>`${t}-scheme-uri-uri`}},De={features:{customAccessCodeEnable:t=>`${t}-custom-accesscode-enable`,customAccessCode:t=>`${t}-custom-accesscode`}},b={$flag:{},linkDict:new Re.Dictionary,tempLinkDict:new Re.Dictionary,matchLink:new Set,hasMatchLink:!1,clipboardText:"",shareCodeNotMatchRegexpList:[/(vipstyle|notexist|ajax|file|download|ptqrshow|xy-privacy|comp|web|undefined|1125|unproved|console|account|favicon|setc)/g],accessCodeNotMatchRegexpList:[/^(font)/gi],noAccessCodeRegExp:/( |æå–ç :|\nå¯†ç ï¼š{#accessCode#}|{#accessCode#}|{#encodeURI-accessCode#}|{#encodeURIComponent-accessCode#}|{#decodeURI-accessCode#}|{#encodeURIComponent-accessCode#}|\?pwd=|&pwd=)/gi,matchRule:{},ruleSetting:{},rule:[],init(){this.initLinkDict();},initLinkDict(){Object.keys(this.matchRule).forEach(t=>{this.linkDict.set(t,new d.Dictionary),this.tempLinkDict.set(t,new d.Dictionary);});},handleLink(t,i,n){let e=this.handleShareCode(t,i,n);if(d.isNull(e))return;let a=this.handleAccessCode(t,i,n);return a=this.handleAccessCodeByUserRule(t,a,n),{shareCode:e,accessCode:a}},handleShareCode(t,i,n){var o;let e=b.matchRule[t][i],a=(o=n.match(e.shareCode))==null?void 0:o.filter(l=>d.isNotNull(l));if(d.isNull(a)){h.error(["åŒ¹é…shareCodeä¸ºç©º",{åŒ¹é…çš„æ–‡æœ¬:n,è§„åˆ™:e,æ­£åœ¨ä½¿ç”¨çš„è§„åˆ™:e.shareCode,ç½‘ç›˜åç§°:t,ç½‘ç›˜åç§°ç´¢å¼•ä¸‹æ ‡:i}]);return}let s=a[0];e.shareCodeNeedRemoveStr&&(s=s.replace(e.shareCodeNeedRemoveStr,""));let r=e.shareCodeNotMatch;if(r!=null&&s.match(r)){h.error(`ä¸å¯èƒ½çš„shareCode => ${s}`);return}for(const l of b.shareCodeNotMatchRegexpList)if(s.match(l)){h.error(`ä¸å¯èƒ½çš„shareCode => ${s}`);return}if(s=decodeURI(s),!(g.aboutShareCode.excludeIdenticalSharedCodes.value&&d.isSameChars(s,g.aboutShareCode.excludeIdenticalSharedCodesCoefficient.value))&&!(s.endsWith("http")||s.endsWith("https")))return s},handleAccessCode(t,i,n){var r;let e=this.matchRule[t][i],a="";if(!e.checkAccessCode)return "";let s=n.match(e.checkAccessCode);if(s){let l=(r=s[s.length-1].match(e.accessCode))==null?void 0:r.filter(c=>d.isNotNull(c));if(d.isNull(l))return "";l.length&&(a=l[0],a.startsWith("http")&&(a=""));}if(d.isNotNull(a)){for(const o of b.accessCodeNotMatchRegexpList)if(a.match(o)){a="";break}e.acceesCodeNotMatch&&a.match(e.acceesCodeNotMatch)&&(a="");}return a},handleAccessCodeByUserRule(t,i,n){let e=q.getUrlMatchedRule(),a=i;for(let s=0;s<e.length;s++){const r=e[s];let o=q.getRuleData(r),l=Reflect.get(o,De.features.customAccessCode(t));if(Reflect.get(o,De.features.customAccessCodeEnable(t))&&typeof l=="string"){a=l,h.success(`ä½¿ç”¨è‡ªå®šä¹‰ç½‘ç«™è§„åˆ™ä¸­çš„æå–ç  ${t} ${a}`);break}}return a},handleLinkShow(t,i,n,e,a){let s=b.matchRule[t][i];if(s==null)throw f.error("BUG: è·å–uiLinkè§„åˆ™å¤±è´¥"),h.error(["BUG: åˆ†æå‚æ•°",t,i,n,e]),new TypeError("è·å–uiLinkè§„åˆ™å¤±è´¥");let r=V.replaceParam(s.uiLinkShow,{shareCode:n});if(e&&e!=""?r=V.replaceParam(r,{accessCode:e}):r=r.replace(b.noAccessCodeRegExp,""),s.paramMatch){let o=b.linkDict.get(t).get(n);if(a=a??(o==null?void 0:o.matchText),d.isNotNull(a)){let l=a.match(s.paramMatch),c={};if(l)for(let u=0;u<l.length;u++)c[`$${u}`]=l[u];r=V.replaceParam(r,c);}}return r},getLinkDickObj(t,i=0,n=!1,e){return {accessCode:t,netDiskIndex:i,isForceAccessCode:n,matchText:e}}},ut={tianYiYunLoginTip:{PC:{width:"30vw",height:"280px"},Mobile:{width:"80vw",height:"250px"}},jianGuoYunLoginTip:{PC:{width:"350px",height:"200px"},Mobile:{width:"350px",height:"200px"}},settingView:{PC:{width:"800px",height:"600px"},Mobile:{width:"92vw",height:"80vh"}},setDefaultValueView:{PC:{width:"350px",height:"200px"},Mobile:{width:"350px",height:"200px"}},mainView:{PC:{width:"500px",height:"100%"},Mobile:{width:"88vw",height:"50vh"}},mainViewSmallWindow:{PC:{get width(){return g.smallWindow["netdisk-ui-small-window-width"].value+"px"},height:"auto"},Mobile:{get width(){return g.smallWindow["netdisk-ui-small-window-width"].value+"px"},height:"auto"}},oneFileStaticView:{PC:{width:"550px",height:"350px"},Mobile:{width:"88vw",height:"300px"}},moreFileStaticView:{PC:{width:"700px",height:"600px"},Mobile:{width:"88vw",height:"500px"}},inputNewAccessCodeView:{PC:{width:"400px",height:"200px"},Mobile:{width:"88vw",height:"160px"}},historyMatchView:{PC:{width:"50vw",height:"65vh"},Mobile:{width:"88vw",height:"60vh"}},customRulesView:{PC:{width:"50vw",height:"65vh"},Mobile:{width:"88vw",height:"60vh"}},customRuleDebugView:{PC:{width:"55vw",height:"70vh"},Mobile:{width:"88vw",height:"70vh"}},matchPasteTextView:{PC:{width:"50vw",height:"65vh"},Mobile:{width:"88vw",height:"60vh"}},accessCodeRuleView:{PC:{width:"50vw",height:"65vh"},Mobile:{width:"88vw",height:"60vh"}},accessCodeRuleEditView:{PC:{width:"44vw",height:"50vh"},Mobile:{width:"70vw",height:"45vh"}},websiteRuleView:{PC:{width:"45vw",height:"65vh"},Mobile:{width:"88vw",height:"60vh"}},websiteEditRuleView:{PC:{width:"45vw",height:"65vh"},Mobile:{width:"88vw",height:"60vh"}}},ht=function(t){window.location.hostname==="pan.baidu.com"&&window.location.pathname==="/share/init"&&window.location.search.startsWith("?surl=")&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("div.verify-form #accessCode").then(i=>{var n;if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),(n=document.querySelector("div.verify-form #submitBtn"))==null||n.click();})),window.location.hostname==="pan.baidu.com"&&window.location.pathname==="/wap/init"&&window.location.search.startsWith("?surl=")&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("div.extractWrap div.extract-content div.extractInputWrap.extract input[type=text]").then(i=>{var n;if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),(n=document.querySelector("div.extractWrap div.extract-content button.m-button"))==null||n.click();}));},pt=function(t){window.location.hostname.match(/lanzou[a-z]{1}.com/gi)&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#pwd").then(i=>{var n,e;if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),(n=document.querySelector("#passwddiv div.passwddiv-input > div")||i.nextElementSibling)==null||n.click(),(e=document.querySelector("#sub"))==null||e.click();}),d.waitNode("#f_pwd").then(i=>{d.mutationObserver(i,{config:{attributes:!0,attributeFilter:["style"]},callback:(n,e)=>{var s;let a=document.querySelector("#f_pwd #pwd");if(!d.isVisible(a)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}e.disconnect(),h.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç å¹¶å…³é—­è§‚å¯Ÿè€…"),f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),a.value=t.accessCode,d.dispatchEvent(a,"input"),(s=document.querySelector("#f_pwd #sub"))==null||s.click();}});}));},ft=function(t){function i(n,e){let a=0,s=30,r=setInterval(()=>{if(a++,a>s){h.error("ç»“æŸå¾ªç¯æ£€æŸ¥ï¼Œé€€å‡ºã€‚"),clearInterval(r);return}if(!d.isVisible(n)){h.warn(`ç¬¬ ${a} æ¬¡ï¼šè¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç `);return}e(),clearInterval(r);},500);}window.location.hostname==="cloud.189.cn"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("input#code_txt").then(n=>{i(n,()=>{f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç ");let e=document.querySelector(".btn.btn-primary.visit");n.value=t.accessCode,n._value=t.accessCode,d.dispatchEvent(n,"input"),d.dispatchEvent(e,"click");});})),window.location.hostname==="h5.cloud.189.cn"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("input.access-code-input").then(n=>{i(n,()=>{f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),n.value=t.accessCode,n._value=t.accessCode,d.dispatchEvent(n,"input"),d.dispatchEvent(document.querySelector("div.button"),"click");});}));},mt=function(t){window.location.hostname==="caiyun.139.com"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#token-input").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),document.querySelector("#homepage div.token div.token-form a").click();}),d.waitNode("#app div.token-form input[type=text]").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),document.querySelector("div.token-form a.btn-token").click();}));},ye={async waitReactPropsToSet(t,i,n){if(!Array.isArray(n)){this.waitReactPropsToSet(t,i,[n]);return}function e(){let a=null;return typeof t=="string"?a=document.querySelector(t):typeof t=="function"?a=t():t instanceof HTMLElement&&(a=t),a}typeof t=="string"&&!await d.waitNode(t,1e4)||n.forEach(a=>{typeof a.msg=="string"&&h.info(a.msg);function s(){let r=e();if(r==null)return !1;let o=d.getReactObj(r);if(o==null)return !1;let l=o[i];return l==null?!1:!!a.check(l)}d.waitPropertyByInterval(()=>e(),s,250,1e4).then(()=>{let r=e();if(r==null)return;let o=d.getReactObj(r);if(o==null)return;let l=o[i];l!=null&&a.set(l);});});}},gt=function(t){(window.location.hostname==="www.aliyundrive.com"||window.location.hostname==="www.alipan.com")&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#root input.ant-input").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,ye.waitReactPropsToSet(i,"reactFiber",{check(n){var e;return typeof((e=n==null?void 0:n.memoizedProps)==null?void 0:e.onChange)=="function"},set(n){n.memoizedProps.onChange({currentTarget:i,target:i});}}),document.querySelector('#root button[type="submit"]').click();}),d.waitNode("#root input[name=pwd]").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,ye.waitReactPropsToSet(i,"reactFiber",{check(n){var e;return typeof((e=n==null?void 0:n.memoizedProps)==null?void 0:e.onChange)=="function"},set(n){n.memoizedProps.onChange({currentTarget:i,target:i});}}),document.querySelector('#root button[type="submit"]').click();}));},wt=function(t){window.location.hostname==="www.123pan.com"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#app .ca-fot input.ant-input[type=text]").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),ye.waitReactPropsToSet(i,"reactProps",{check(e){return typeof(e==null?void 0:e.onChange)=="function"},set(e){e.onChange({target:{value:t.accessCode}});}});let n=i.nextSibling;n==null||n.click();}),d.waitNode("#app .appinput input.ant-input[type=text]").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),ye.waitReactPropsToSet(i,"reactProps",{check(e){return typeof(e==null?void 0:e.onChange)=="function"},set(e){e.onChange({target:{value:t.accessCode}});}});let n=i.nextSibling;n==null||n.click();}));},kt=function(t){window.location.hostname==="share.weiyun.com"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#app input.input-txt").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),d.dispatchEvent(i,"change"),setTimeout(()=>{document.querySelector(".form-item button.btn-main").click();},500);}),d.waitNode(".input-wrap input.pw-input").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),d.dispatchEvent(i,"change"),setTimeout(()=>{document.querySelector(".pw-btn-wrap button.btn").click();},500);}));},yt=function(t){window.location.hostname==="pan.xunlei.com"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#__layout div.pass-input-wrap input.td-input__inner").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),d.dispatchEvent(i,"change"),setTimeout(()=>{document.querySelector("#__layout div.pass-input-wrap button.td-button").click();},500);}),d.waitNode("#__layout div.pass-wrapper input.td-input__inner").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),d.dispatchEvent(i,"change"),setTimeout(()=>{document.querySelector("#__layout div.pass-wrapper button.td-button").click();},500);}));},xt=function(t){window.location.hostname==="pan.quark.cn"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#ice-container input.ant-input[class*=ShareReceive]").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),ye.waitReactPropsToSet(i,"reactProps",{check(n){return (n==null?void 0:n.onChange)==="function"},set(n){n.onChange({target:{value:t.accessCode}});}}),ye.waitReactPropsToSet(i,"reactEventHandlers",{check(n){return (n==null?void 0:n.onChange)==="function"},set(n){n.onChange({target:{value:t.accessCode}});}});}));},Ct=function(t){h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("#passcode").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),document.querySelector("#main-content .form-group button.btn[type=button]").click();});},vt=function(t){window.location.hostname==="115.com"&&(h.success(["è‡ªåŠ¨å¡«å†™é“¾æ¥",t]),d.waitNode("input.text").then(i=>{if(!d.isVisible(i)){h.error("è¾“å…¥æ¡†ä¸å¯è§ï¼Œä¸è¾“å…¥å¯†ç ");return}f.success("è‡ªåŠ¨å¡«å…¥è®¿é—®ç "),i.value=t.accessCode,d.dispatchEvent(i,"input"),document.querySelector("#js-share_code div.form-decode div.submit a").click();}));},xe={key:"tempNetDiskInfo",$data:{netDiskInfo:null,get enable(){return g.function.autoFillAccessCode.value}},init(){if(this.$data.netDiskInfo=this.getValue(),!!this.$data.netDiskInfo&&this.$data.enable&&!d.isNull(this.$data.netDiskInfo.accessCode)){if(this.$data.netDiskInfo.netDiskName==="baidu"&&this.$data.netDiskInfo.shareCode.startsWith("1")){if(!window.location.href.includes(this.$data.netDiskInfo.shareCode.slice(1,this.$data.netDiskInfo.shareCode.length)))return}else if(!window.location.href.includes(this.$data.netDiskInfo.shareCode))return;if(this.$data.netDiskInfo.netDiskName in xe.netDisk){let t=xe.netDisk[this.$data.netDiskInfo.netDiskName];typeof t=="function"?t(this.$data.netDiskInfo):h.warn("è‡ªåŠ¨å¡«å†™è®¿é—®ç å¤±è´¥ï¼š"+this.$data.netDiskInfo.netDiskName+"ï¼ŒåŸå› ï¼šè¯¥ç½‘ç›˜æœªé€‚é…");}else h.error("ç½‘ç›˜åæœªæ‰¾åˆ°ï¼Œè·³è¿‡è‡ªåŠ¨å¡«å†™ï¼š"+this.$data.netDiskInfo);}},netDisk:{baidu:ht,lanzou:pt,tianyiyun:ft,hecaiyun:mt,aliyun:gt,wenshushu:()=>{},nainiu:()=>{},_123pan:wt,weiyun:kt,xunlei:yt,_115pan:vt,chengtong:Ct,kuake:xt,jianguoyun:()=>{},onedrive:()=>{}},setValue(t){$(this.key,t);},getValue(){return O(this.key)}},bt=function(){},F={matchRange_text:{before(t,i=20){const n=R(L.matchRange_text.before(t),i);return parseInt(n.value.toString())},after(t,i=10){const n=R(L.matchRange_text.after(t),i);return parseInt(n.value.toString())}},matchRange_html:{before(t,i=100){const n=R(L.matchRange_html.before(t),i);return parseInt(n.value.toString())},after(t,i=15){const n=R(L.matchRange_html.after(t),i);return parseInt(n.value.toString())}},function:{enable(t,i=!0){return !!R(L.function.enable(t),i).value},linkClickMode(t,i="copy"){return R(L.function.linkClickMode(t),i).value},checkLinkValidity(t,i=!1){return !!R(L.function.checkLinkValidity(t),i).value}},linkClickMode_openBlank:{openBlankWithCopyAccessCode(t,i=!1){return !!R(L.linkClickMode_openBlank.openBlankWithCopyAccessCode(t),i).value}},schemeUri:{enable(t,i=!1){return !!R(L.schemeUri.enable(t),i).value},isForwardLinearChain(t,i=!1){return !!R(L.schemeUri.isForwardLinearChain(t),i).value},isForwardBlankLink(t,i=!1){return !!R(L.schemeUri.isForwardBlankLink(t),i).value},uri(t,i=""){return R(L.schemeUri.uri(t),i).value}}},Ke={rule:[{link_innerText:"123pan.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"123pan.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/123pan.com\/s\/([a-zA-Z0-9_\-]{8,14})/gi,shareCodeNeedRemoveStr:/123pan.com\/s\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"123pan.com/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://123pan.com/s/{#shareCode#}",copyUrl:`https://123pan.com/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"123ç›˜",key:"_123pan",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!0,isForwardBlankLink:!0,uri:""}}}},Je={KEY:"_123pan_User_Authorization",set(t){$(this.KEY,t);},get(){return O(this.KEY)}},Rt=function(){if(window.location.hostname!=="www.123pan.com"||F.function.linkClickMode(Ke.setting.key)!=="parseFile")return;let t=X.localStorage.getItem("authorToken");d.isNull(t)||(t=t.replace(/^\"/,"").replace(/\"$/,""),h.success("è·å–123ç½‘ç›˜å·²ç™»å½•ç”¨æˆ·çš„authorTokenå€¼ğŸ‘‡"),h.success(t),Je.set(t));},Ee={init(){Object.keys(Ee.netDisk).forEach(t=>{this.netDisk[t]();});},netDisk:{_123pan:Rt,lanzouyx:bt}},T={protocol:"jumpwsv",pathname:"go",parseDataToSchemeUri(t,i){if(!F.schemeUri.enable(t))return i;let e=F.schemeUri.uri(t);return d.isNull(e)&&(e=this.getSchemeUri(this.get1DMSchemeUriOption(i))),e.startsWith(this.protocol)&&(i=i.replace(/&/g,"{-and-}"),i=i.replace(/#/g,"{-number-}")),e=V.replaceParam(e,{intentData:i}),e},isForwardDownloadLink(t){return F.schemeUri.isForwardLinearChain(t)},isForwardBlankLink(t){return F.schemeUri.isForwardBlankLink(t)},getSchemeUri(t){return `${this.protocol}://${this.pathname}?package=${t.package}&activity=${t.activity}&intentAction=${t.intentAction}&intentData=${t.intentData}&intentExtra=${t.intentExtra}`},get1DMSchemeUriOption(t=""){return {package:"idm.internet.download.manager.plus",activity:"idm.internet.download.manager.UrlHandlerDownloader",intentAction:"android.intent.action.VIEW",intentData:t,intentExtra:""}}};class se{constructor(){I(this,"netDiskIndex",0);I(this,"shareCode","");I(this,"accessCode","");}}class At extends se{constructor(){super(...arguments);I(this,"panelList",[]);I(this,"Authorization","");I(this,"code",{5113:"æ‚¨ä»Šæ—¥ä¸‹è½½æµé‡å·²è¶…å‡º10GBé™åˆ¶ï¼Œè´­ä¹°VIPä¼šå‘˜å³å¯ä½“éªŒæ— é™æµé‡ä¸‹è½½",5103:"åˆ†äº«ç é”™è¯¯æˆ–è€…åˆ†äº«åœ°å€é”™è¯¯",5104:"åˆ†äº«å·²è¿‡æœŸ","-1000":"è·å–å‡ºé”™","-2000":"è¯·æ±‚å¼‚å¸¸","-3000":"è¯·æ±‚æ„å¤–ä¸­æ­¢","-4000":"è¯·æ±‚è¶…æ—¶",104:"æ–‡ä»¶å·²å¤±æ•ˆ"});}async init(n,e,a){const s=this;if(h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a,s.panelList=[],s.Authorization=Je.get(),!await s.checkLinkValidity())return;let o=await s.getFiles();if(o)if(o.length===1&&o[0].Type==0){let l=o[0];if(l.Status==104){f.error("æ–‡ä»¶å·²å¤±æ•ˆ");return}let c=l.DownloadUrl,u="";if(c===""){let k=await s.getFileDownloadInfo(l.Etag,l.FileId,l.S3KeyFlag,s.shareCode,l.Size);k&&k.code===0?(c=k.data.DownloadURL,T.isForwardDownloadLink("_123pan")&&(c=T.parseDataToSchemeUri("_123pan",c)),u=d.formatByteToSize(l.Size)):k&&k.code===401?(c="javascript:;",u="è¯·ç™»å½•åä¸‹è½½"):(c="javascript:;",u="è·å–ä¸‹è½½é“¾æ¥å¤±è´¥");}else T.isForwardDownloadLink("_123pan")&&(c=T.parseDataToSchemeUri("_123pan",c)),u=d.formatByteToSize(l.Size);let p=new Date(l.CreateAt).getTime(),m=new Date(l.UpdateAt).getTime();p=d.formatTime(p),m=d.formatTime(m),w.staticView.oneFile({title:"123ç›˜å•æ–‡ä»¶ç›´é“¾",fileName:l.FileName,fileSize:u,downloadUrl:c,fileUploadTime:p,fileLatestTime:m});}else {f.info("æ­£åœ¨é€’å½’æ–‡ä»¶");let l=f.loading("æ­£åœ¨è§£æå¤šæ–‡ä»¶ä¸­ï¼Œè¯·ç¨å..."),c=s.getFolderInfo(o,0);l.close(),h.info("é€’å½’å®Œæ¯•"),w.staticView.moreFile("123ç›˜æ–‡ä»¶è§£æ",c);}}async checkLinkValidity(){const n=this;f.info("æ­£åœ¨æ ¡éªŒé“¾æ¥æœ‰æ•ˆæ€§");let e=`https://www.123pan.com/s/${n.shareCode}`,a=await C.get({url:e,headers:{"User-Agent":d.getRandomPCUA(),Referer:"https://www.123pan.com"}});if(h.info(a),!a.status)return !1;let r=a.data.responseText.match(/window.g_initialProps[\s]*=[\s]*\{(.+?)\};/s);if(r){h.info(r);let o=d.toJSON(`{${r[r.length-1]}}`);if(h.info(o),o.res.code!==0)return f.error(o.res.message),!1;if(o.res.data.HasPwd&&(n.accessCode==null||n.accessCode===""))f.error("å¯†ç ç¼ºå¤±!"),w.newAccessCodeView("å¯†ç ç¼ºå¤±","_123pan",n.netDiskIndex,n.shareCode,n.accessCode,c=>{n.init(n.netDiskIndex,n.shareCode,c);});else return !0}else f.error("æ ¡éªŒé“¾æ¥-è·å–åˆå§‹åŒ–å†…å®¹å¤±è´¥");}async getFiles(n=0){const e=this,a={limit:100,next:1,orderBy:"share_id",orderDirection:"desc",shareKey:e.shareCode,SharePwd:e.accessCode,ParentFileId:n,Page:1};let s=`https://www.123pan.com/b/api/share/get?${d.toSearchParamsStr(a)}`,r=await C.get({url:s,headers:{Accept:"*/*","User-Agent":d.getRandomPCUA(),Referer:`https://www.123pan.com/s/${e.shareCode}`}});if(h.info(r),!r.status)return;let o=r.data,l=d.toJSON(o.responseText);if(l.code===0)return l.data.InfoList;l.code===5103?w.newAccessCodeView(void 0,"_123pan",e.netDiskIndex,e.shareCode,e.accessCode,c=>{e.init(e.netDiskIndex,e.shareCode,c);}):e.code[l.code]?f.error(e.code[l.code]):"message"in l?f.error(l.message):f.error("123ç›˜ï¼šæœªçŸ¥çš„JSONæ ¼å¼");}async getFilesByRec(n){const e=this;let a=await C.get({url:`https://www.123pan.com/b/api/share/get?limit=100&next=1&orderBy=share_id&orderDirection=desc&shareKey=${e.shareCode}&SharePwd=${e.accessCode}&ParentFileId=${n}&Page=1`,headers:{Accept:"*/*","User-Agent":d.getRandomAndroidUA(),Referer:`https://www.123pan.com/s/${e.shareCode}`}});if(!a.status)return;let s=a.data;h.info(s);let r=d.toJSON(s.responseText);if(r.code==0)return r.data.InfoList}getFolderInfo(n,e){const a=this;let s=[],r=[],o=[];return n.forEach(l=>{l.Type?r.push({fileName:l.FileName,fileSize:0,fileType:"",createTime:new Date(l.CreateAt).getTime(),latestTime:new Date(l.UpdateAt).getTime(),isFolder:!0,index:e,async clickEvent(){let c=await a.getFilesByRec(l.FileId);return c?a.getFolderInfo(c,e+1):[]}}):o.push({fileName:l.FileName,fileSize:l.Size,fileType:"",createTime:new Date(l.CreateAt).getTime(),latestTime:new Date(l.UpdateAt).getTime(),isFolder:!1,index:e,async clickEvent(){if(l.Status==104)f.error("æ–‡ä»¶å·²å¤±æ•ˆ");else if(l.DownloadUrl){let c=l.DownloadUrl;return T.isForwardDownloadLink("_123pan")&&(c=T.parseDataToSchemeUri("_123pan",c)),{url:c,autoDownload:!0,mode:"aBlank"}}else {let c=await a.getFileDownloadInfo(l.Etag,l.FileId,l.S3KeyFlag,a.shareCode,l.Size);if(c&&c.code===0)return {url:c.data.DownloadURL,autoDownload:!0,mode:"aBlank"};c&&c.code===401?f.error("è¯·ç™»å½•åä¸‹è½½"):f.error("è·å–ä¸‹è½½é“¾æ¥å¤±è´¥");}}});}),r.sort((l,c)=>l.fileName.localeCompare(c.fileName)),o.sort((l,c)=>l.fileName.localeCompare(c.fileName)),s=s.concat(r),s=s.concat(o),s}async getFileDownloadInfo(n,e,a,s,r){const o=this;let l=o.getFileDownloadAuth(),c={"App-Version":"3",Platform:"web","Content-Type":"application/json;charset=UTF-8",Host:"www.123pan.com",Accept:"*/*","User-Agent":d.getRandomPCUA(),Referer:"https://www.123pan.com/s/"+s,Origin:"https://www.123pan.com"};o.Authorization&&Reflect.set(c,"Authorization","Bearer "+o.Authorization),h.success("è·å–ä¸‹è½½é“¾æ¥åŠ å¯†å‚æ•°ï¼š"+l);let u=await C.post({url:`https://www.123pan.com/a/api/share/download/info?${l[0]}=${l[1]}`,data:JSON.stringify({Etag:n,FileID:e,S3keyFlag:a,ShareKey:s,Size:r}),responseType:"json",headers:c});if(!u.status)return;let p=u.data,m=d.toJSON(p.responseText);return h.info(m),m.code==0?(m.data.DownloadURL=await o.decodeDownloadUrl(m.data.DownloadURL),m):{code:m.code}}getFileDownloadAuth(){function n(s){var r,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:8;if(arguments.length!==0){typeof s=="object"?r=s:((""+s).length===10&&(s=1e3*parseInt(s)),r=new Date(s));var l=s+6e4*new Date(s).getTimezoneOffset(),c=l+36e5*o;return r=new Date(c),{y:r.getFullYear(),m:r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,d:r.getDate()<10?"0"+r.getDate():r.getDate(),h:r.getHours()<10?"0"+r.getHours():r.getHours(),f:r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes()}}}function e(s){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:10,o=function(){for(var m,k=[],x=0;x<256;x++){m=x;for(var A=0;A<8;A++)m=1&m?3988292384^m>>>1:m>>>1;k[x]=m;}return k},l=o(),c=s,u=-1,p=0;p<c.length;p++)u=u>>>8^l[255&(u^c.charCodeAt(p))];return u=(-1^u)>>>0,u.toString(r)}function a(s){var r="web",o=3,l=Math.round((new Date().getTime()+60*new Date().getTimezoneOffset()*1e3+288e5)/1e3).toString(),c="a,d,e,f,g,h,l,m,y,i,j,n,o,p,k,q,r,s,t,u,b,c,v,w,s,z",u=Math.round(1e7*Math.random()),p,m,k,x,A,N,D,K,P;for(var B in p=c.split(","),m=n(l),k=m.y,x=m.m,A=m.d,N=m.h,D=m.f,K=[k,x,A,N,D].join(""),P=[],K)P.push(p[Number(K[B])]);var _,M;return _=e(P.join("")),M=e("".concat(l,"|").concat(u,"|").concat(s,"|").concat(r,"|").concat(o,"|").concat(_)),[_,"".concat(l,"-").concat(u,"-").concat(M)]}return a("/a/api/share/download/info")}async decodeDownloadUrl(n){const e=this;if(n==="")return "";let s=new URL(n).search.replace(/^\?params=/gi,"");s=s.split("&")[0];try{let r=decodeURI(atob(s));h.info("æ­£åœ¨è·å–é‡å®šå‘ç›´é“¾"),f.info("æ­£åœ¨è·å–é‡å®šå‘ç›´é“¾");let o=await C.get({url:r,responseType:"json",headers:{"User-Agent":d.getRandomAndroidUA(),Referer:"https://www.123pan.com/s/"+e.shareCode,Origin:"https://www.123pan.com"},allowInterceptConfig:!1,onerror:function(){}});if(h.info(o),!o.status&&o.data.status!==210){let p=new URL(r);return p.searchParams.has("auto_redirect")?(p.searchParams.set("auto_redirect","1"),p.toString()):r}let l=o.data,c=d.toJSON(l.responseText),u=new URL(c.data.redirect_url);return u.searchParams.set("auto_redirect","1"),h.success(c),u.toString()}catch(r){return h.error(r),n}}}class St extends se{constructor(){super(...arguments);I(this,"X_Share_Token_Data",{expire_time:"2000-01-01T00:00:00.000Z",expires_in:7200,share_token:""});I(this,"X_Device_Id",null);I(this,"X_Canary","client=web,app=share,version=v2.3.1");}async init(n,e,a){const s=this;if(h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a,s.X_Device_Id=s.get_X_Device_Id(),h.info("ç”ŸæˆX_Device_Idï¼š"+s.X_Device_Id),globalThis.location.hostname!=="www.aliyundrive.com"&&globalThis.location.hostname!=="www.alipan.com"){let c=Z.getBlankUrl("aliyun",s.netDiskIndex,s.shareCode,s.accessCode),u=f.error(`è¯·åœ¨é˜¿é‡Œäº‘ç›˜é¡µé¢è§£æï¼Œ<a href="${c}">ç‚¹æˆ‘å‰å¾€</a>`,{html:!0,timeout:1e4});v.on(u.$Qmsg.querySelector("a[href]"),"click",void 0,p=>{d.preventEvent(p),re.openBlank(c,"aliyun",s.netDiskIndex,s.shareCode,s.accessCode);});return}let r=await this.list_by_share(e,"root");if(!r)return;f.info("æ­£åœ¨è§£æé“¾æ¥");let o=f.loading("æ­£åœ¨è§£æå¤šæ–‡ä»¶ä¸­ï¼Œè¯·ç¨å..."),l=s.getFolderInfo(r,0);o.close(),h.info("è§£æå®Œæ¯•"),w.staticView.moreFile("é˜¿é‡Œäº‘ç›˜æ–‡ä»¶è§£æ",l);}getFolderInfo(n,e=0){const a=this;let s=[],r=[],o=[];return n.forEach(l=>{l.type!=="folder"?o.push({fileName:l.name,fileSize:l.size,fileType:l.file_extension,createTime:new Date(l.created_at).getTime(),latestTime:new Date(l.updated_at).getTime(),isFolder:!1,index:e,async clickEvent(){let c=await a.get_share_link_download_url(l.share_id,l.file_id);if(!c)return;let u=c;return T.isForwardDownloadLink("aliyun")&&(u=T.parseDataToSchemeUri("aliyun",u)),{autoDownload:!0,mode:"aBlank",url:u}}}):r.push({fileName:l.name,fileSize:0,fileType:"",createTime:l.created_at,latestTime:l.updated_at,isFolder:!0,index:e,async clickEvent(){let c=await a.list_by_share(l.share_id,l.file_id);return c?a.getFolderInfo(c,e+1):[]}});}),r.sort((l,c)=>l.fileName.localeCompare(c.fileName)),o.sort((l,c)=>l.fileName.localeCompare(c.fileName)),s=s.concat(r),s=s.concat(o),h.info(["getFilesInfoByRec",s]),s}async list_by_share(n,e,a="name",s="DESC"){const r=this;let o=await C.post("https://api.aliyundrive.com/adrive/v2/file/list_by_share",{data:JSON.stringify({share_id:n,parent_file_id:e,limit:20,image_thumbnail_process:"image/resize,w_256/format,jpeg",image_url_process:"image/resize,w_1920/format,jpeg/interlace,1",video_thumbnail_process:"video/snapshot,t_1000,f_jpg,ar_auto,w_256",order_by:a,order_direction:s}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Origin:"https://www.aliyundrive.com",Referer:"https://www.aliyundrive.com/","X-Canary":r.X_Canary,"X-Device-Id":r.X_Device_Id,"X-Share-Token":await r.get_X_Share_Token(r.shareCode,r.accessCode),"User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror(){}});if(!o.status){r.handle_request_error(o);return}let l=d.toJSON(o.data.responseText);return h.info(["åˆ—å‡ºæ–‡ä»¶åˆ—è¡¨ï¼š",l]),l.items}async get_share_link_download_url(n,e){const a=this;let s=await C.post("https://api.aliyundrive.com/v2/file/get_share_link_download_url",{data:JSON.stringify({expire_sec:600,file_id:e,share_id:n}),headers:{Accept:"application/json, text/plain, */*",Origin:"https://www.aliyundrive.com",Referer:"https://www.aliyundrive.com/","Content-Type":"application/json;charset=UTF-8",Authorization:"Bearer "+a.getAuthorization(),"X-Share-Token":await a.get_X_Share_Token(a.shareCode,a.accessCode),"User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror(){}});if(!s.status){a.handle_request_error(s);return}let r=d.toJSON(s.data.responseText);return h.info(["è·å–æ–‡ä»¶çš„ä¸‹è½½é“¾æ¥ï¼š",r]),r.download_url}handle_request_error(n){h.error(n);let e=d.toJSON(n.data.responseText);f.error(e.message);}getAuthorization(){let n=X.localStorage.getItem("token");if(d.isNotNull(n)&&n!=null){let a=d.toJSON(n).access_token;return h.success(["è·å–é˜¿é‡Œäº‘ç›˜çš„access_tokenï¼š",a]),a}else h.error("è·å–access_tokenå¤±è´¥ï¼Œè¯·å…ˆç™»å½•è´¦å·ï¼"),f.error("è·å–access_tokenå¤±è´¥ï¼Œè¯·å…ˆç™»å½•è´¦å·ï¼");}async get_X_Share_Token(n,e){const a=this;if(new Date<new Date(a.X_Share_Token_Data.expire_time))return a.X_Share_Token_Data.share_token;let s=await C.post("https://api.aliyundrive.com/v2/share_link/get_share_token",{data:JSON.stringify({share_id:n,share_pwd:e}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json",Origin:"https://www.aliyundrive.com",Referer:"https://www.aliyundrive.com/","X-Canary":a.X_Canary,"X-Device-Id":a.X_Device_Id,"User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror(){}});if(!s.status){a.handle_request_error(s);return}let r=d.toJSON(s.data.responseText);return a.X_Share_Token_Data=r,h.info(["è·å–share_tokenï¼š",a.X_Share_Token_Data]),a.X_Share_Token_Data.share_token}get_X_Device_Id(){for(var n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,e=[],a=0;a<256;++a)e.push((a+256).toString(16).substr(1));function s(){return crypto.getRandomValues(new Uint8Array(16))}var r=function(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=(e[l[c+0]]+e[l[c+1]]+e[l[c+2]]+e[l[c+3]]+"-"+e[l[c+4]]+e[l[c+5]]+"-"+e[l[c+6]]+e[l[c+7]]+"-"+e[l[c+8]]+e[l[c+9]]+"-"+e[l[c+10]]+e[l[c+11]]+e[l[c+12]]+e[l[c+13]]+e[l[c+14]]+e[l[c+15]]).toLowerCase();if(!function(p){return typeof p=="string"&&n.test(p)}(u))throw TypeError("Stringified UUID is invalid");return u},o=function(l,c,u){var p=(l=l||{}).random||(l.rng||s)();return p[6]=15&p[6]|64,p[8]=63&p[8]|128,r(p)};return o()}}class _t extends se{init(i,n,e){h.info([i,n,e]),this.netDiskIndex=i,this.shareCode=n,this.accessCode=e;let a=O("baidu-baiduwp-php-url"),s=O("baidu-baiduwp-php-post-form"),r=O("baidu-baiduwp-php-copy-url");if(!a){f.error("è¯·å…ˆåœ¨è®¾ç½®ä¸­é…ç½®ç™¾åº¦ç½‘ç›˜-ç½‘å€");return}if(!s){f.error("è¯·å…ˆåœ¨è®¾ç½®ä¸­é…ç½®ç™¾åº¦ç½‘ç›˜-è¡¨å•å‚æ•°");return}s=V.replaceParam(s,{shareCode:n,accessCode:e});let o=document.createElement("form"),l={},c=new URLSearchParams(s);o.action=a,o.method="post",o.style.display="none",o.target="_blank";for(let[u,p]of c){let m=document.createElement("textarea");m.name=u,m.value=p,o.appendChild(m),l[u]=p;}h.info(["è¡¨å•æ•°æ®",l]),document.body.appendChild(o),h.info(["è®¿é—®ç½‘å€",a]),r?(re.copy("baidu",i,n,e,"1.5ç§’åè·³è½¬è‡³è§£æç«™"),setTimeout(()=>{o.submit();},1500)):o.submit();}}class Tt extends se{constructor(){super(...arguments);I(this,"errorCode",{UnAuthorized:"è¯·å…ˆç™»å½•åšæœäº‘è´¦å·"});}async init(n,e,a){const s=this;h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a;let r=await s.getRequestDownloadParams();if(r)if(r.isdir){let o=f.loading("æ­£åœ¨éå†å¤šæ–‡ä»¶ä¿¡æ¯..."),l=await s.getFolderInfo(r.hash);if(!l){o.close();return}let c=s.parseMoreFile(l,r.hash,r.name);o.close(),w.staticView.moreFile("åšæœäº‘æ–‡ä»¶è§£æ",c);}else {let o=d.formatByteToSize(r.size),l=await s.getFileLink(r.hash,r.name);if(!l)return;T.isForwardDownloadLink("jianguoyun")&&(l=T.parseDataToSchemeUri("jianguoyun",l)),h.info(l),w.staticView.oneFile({title:"åšæœäº‘ç›˜å•æ–‡ä»¶ç›´é“¾",fileName:r.name,fileSize:o,downloadUrl:l});}}parseMoreFile(n,e="",a=""){const s=this;h.info(["è§£æå¤šæ–‡ä»¶ä¿¡æ¯",n]);let r=[];return n.forEach(o=>{let l=o.relPath;l.startsWith("/")&&(l=l.replace(/^\//,"")),r.push({fileName:l,fileSize:o.size,fileType:"",createTime:o.mtime,latestTime:o.mtime,isFolder:!1,index:0,async clickEvent(){f.info("æ­£åœ¨è·å–ä¸‹è½½é“¾æ¥...");let c=await s.getDirLink(e,l,o.relPath);if(c)return f.success("è·å–æˆåŠŸï¼"),T.isForwardDownloadLink("jianguoyun")&&(c=T.parseDataToSchemeUri("jianguoyun",c)),h.info(c),{autoDownload:!0,mode:"aBlank",url:c}}});}),r}async getRequestDownloadParams(){const n=this;h.info("è·å–hashå€¼"),f.info("æ­£åœ¨è·å–è¯·æ±‚ä¿¡æ¯");let e=/var[\s]*PageInfo[\s]*=[\s]*{([\s\S]+)};/i;new FormData().append("pd",n.accessCode);let s={url:`https://www.jianguoyun.com/p/${n.shareCode}`,data:n.accessCode===""?void 0:`pd=${n.accessCode}`,responseType:"html",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":d.getRandomPCUA(),Referer:`https://www.jianguoyun.com/p/${n.shareCode}`}},r;if(n.accessCode===""?r=await C.get(s):r=await C.post(s),!r.status)return;let o=r.data;h.info("è¯·æ±‚ä¿¡æ¯"),h.info(o);let l=o.responseText.match(e);if(l){let c=l[l.length-1];c=`({${c}})`,c=window.eval(c),h.info(c);let u=c.name,p=c.size,m=c.hash,k=c.needsPassword,x=c.owner,A=c.isdir,N=c.errorCode;if(u=decodeURIComponent(u),h.success("æ˜¯å¦æ˜¯æ–‡ä»¶å¤¹ ===> "+A),h.success("hash ===> "+m),h.success("name ===> "+u),h.success("size ===> "+p),k&&(n.accessCode==null||n.accessCode==="")){f.error("å¯†ç ä¸æ­£ç¡®!"),w.newAccessCodeView("å¯†ç ç¼ºå¤±","jianguoyun",n.netDiskIndex,n.shareCode,n.accessCode,D=>{n.init(n.netDiskIndex,n.shareCode,D);});return}if(N==="AuthenticationFailed"){f.error("å¯†ç é”™è¯¯"),w.newAccessCodeView(void 0,"jianguoyun",n.netDiskIndex,n.shareCode,n.accessCode,D=>{n.init(n.netDiskIndex,n.shareCode,D);});return}if(m===""||m==null){h.error("hashä¸ºç©ºï¼Œå¯èƒ½æ–‡ä»¶è¢«æ’¤é”€åˆ†äº«äº†"),f.error("æ–‡ä»¶åˆ†äº«å·²è¢«æ’¤é”€");return}if(p==null&&A==!1){h.error("æ— sizeï¼Œå¯èƒ½æ–‡ä»¶è¢«åˆ é™¤äº†"),f.error(`â€œ${u}â€æ–‡ä»¶å·²è¢«æ‹¥æœ‰è€…ï¼ˆâ€œ${x}â€ï¼‰åˆ é™¤`);return}else return {name:u,hash:m,size:p,needsPassword:k,owner:x,isdir:A}}else o.responseText.match("å¯¹ä¸èµ·ï¼Œæ‰¾ä¸åˆ°æ‚¨æŒ‡å®šçš„æ–‡ä»¶ã€‚")?(h.error("å•Šå™¢ï¼ (404) å¯¹ä¸èµ·ï¼Œæ‰¾ä¸åˆ°æ‚¨æŒ‡å®šçš„æ–‡ä»¶ã€‚"),f.error("åšæœäº‘: å¯¹ä¸èµ·ï¼Œæ‰¾ä¸åˆ°æ‚¨æŒ‡å®šçš„æ–‡ä»¶ã€‚")):o.responseText.match("å¯¹ä¸èµ·ï¼Œæ‚¨çš„æŸäº›è¾“å…¥ä¸æ­£ç¡®ã€‚")?(h.error("å¯èƒ½è¯¥é“¾æ¥ä¸éœ€è¦è®¿é—®ç æˆ–è€…è®¿é—®ç æœ‰é—®é¢˜"),w.newAccessCodeView(void 0,"jianguoyun",n.netDiskIndex,n.shareCode,n.accessCode,c=>{n.init(n.netDiskIndex,n.shareCode,c);})):(h.error("è·å–PageInfoå¤±è´¥"),f.error("åšæœäº‘: è·å–PageInfoå¤±è´¥"));}async getFileLink(n="",e=""){var l;const a=this;e=encodeURIComponent(e);let s=await C.get({url:`https://www.jianguoyun.com/d/ajax/fileops/pubFileLink?k=${n}&name=${e}&wm=false${a.accessCode===""?"":"&pd="+a.accessCode}&forwin=1&_=${new Date().getTime()}`,responseType:"json",headers:{"User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror:function(){}});if(!s.status){if(d.isNotNull((l=s.data)==null?void 0:l.responseText)){let c=d.toJSON(s.data.responseText);h.error(["åšæœäº‘",c]),c.errorCode==="UnAuthorized"?a.gotoLogin():f.error(c.detailMsg);}else f.error("è¯·æ±‚å¼‚å¸¸");return}let r=s.data;h.info(["è¯·æ±‚ä¿¡æ¯",r]);let o=d.toJSON(r.responseText);if(h.info(["è§£æJSON",o]),o.hasOwnProperty("errorCode")){f.error("åšæœäº‘: "+o.detailMsg);return}else {if(o.hasOwnProperty("url"))return o.url;f.error("åšæœäº‘: å¤„ç†ä¸‹è½½é“¾æ¥å¼‚å¸¸");}}async getDirLink(n="",e="",a="/"){var c;const s=this;e=encodeURIComponent(e);let r=await C.get({url:`https://www.jianguoyun.com/d/ajax/dirops/pubDIRLink?k=${n}&dn=${e}&p=${a}&forwin=1&_=${new Date().getTime()}`,responseType:"json",headers:{"User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror:function(){}});if(!r.status){if(d.isNotNull((c=r.data)==null?void 0:c.responseText)){let u=d.toJSON(r.data.responseText);h.error(["åšæœäº‘",u]),u.errorCode==="UnAuthorized"?s.gotoLogin():f.error(u.detailMsg);}else f.error("è¯·æ±‚å¼‚å¸¸");return}let o=r.data;h.info(["è¯·æ±‚ä¿¡æ¯",o]);let l=d.toJSON(o.responseText);if(h.info(l),l.hasOwnProperty("errorCode")){f.error("åšæœäº‘: "+l.detailMsg);return}else {if(l.hasOwnProperty("url"))return l.url;f.error("åšæœäº‘: å¤„ç†ä¸‹è½½é“¾æ¥å¼‚å¸¸");}}async getFolderInfo(n=""){let e=await C.get({url:`https://www.jianguoyun.com/d/ajax/dirops/pubDIRBrowse?hash=${n}&relPath=%2F&_=${new Date().getTime()}`,responseType:"json",headers:{"User-Agent":d.getRandomPCUA()}});if(!e.status)return;let a=e.data;h.info(["è¯·æ±‚ä¿¡æ¯",a]);let s=d.toJSON(a.responseText);if(h.info(s),"objects"in s)return s.objects;f.error("åšæœäº‘: å¤„ç†å¤šæ–‡ä»¶ä¿¡æ¯å¼‚å¸¸");}gotoLogin(){H.confirm({title:{text:"æç¤º",position:"center"},content:{text:"è§£æå¤±è´¥ï¼ŒåŸå› ï¼šå½“å‰å°šæœªç™»å½•åšæœäº‘ï¼Œæ˜¯å¦å‰å¾€ç™»å½•ï¼Ÿ"},btn:{reverse:!0,position:"end",ok:{text:"å‰å¾€",callback:function(n){window.open("https://www.jianguoyun.com/d/login#from=https%3A%2F%2Fwww.jianguoyun.com%2F","_blank");}}}},w.popsStyle.jianGuoYunLoginTip);}}const ee={DEFAULT_HOST_NAME:"www.lanzout.com",MENU_KEY:"lanzou-host-name",get hostname(){return R(this.MENU_KEY,this.DEFAULT_HOST_NAME).value}};class Dt extends se{constructor(){super(...arguments);I(this,"router",{default(n=""){return n.startsWith("/")&&(n=n.replace(/^\//,"")),`https://${ee.hostname}/${n}`},tp(n=""){return n.startsWith("/")&&(n=n.replace(/^\//,"")),`https://${ee.hostname}/tp/${n}`},s(n=""){return n.startsWith("/")&&(n=n.replace(/^\//,"")),`https://${ee.hostname}/s/${n}`}});I(this,"regexp",{unicode:{match:/[%\u4e00-\u9fa5]+/g,tip:"ä¸­æ–‡é“¾æ¥",isUnicode:!1},noFile:{match:/div>æ¥æ™šå•¦...æ–‡ä»¶å–æ¶ˆåˆ†äº«äº†<\/div>/g,tip:"æ¥æ™šå•¦...æ–‡ä»¶å–æ¶ˆåˆ†äº«äº†"},noExists:{match:/div>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–å·²åˆ é™¤<\/div>/g,tip:"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–å·²åˆ é™¤"},needVipToShare:{match:/class="fbox">éä¼šå‘˜.+è¯·å…ˆå¼€é€šä¼šå‘˜/gi,tip:"è¯¥é“¾æ¥ä¸ºéä¼šå‘˜ç”¨æˆ·åˆ†äº«çš„æ–‡ä»¶ï¼Œç›®å‰æ— æ³•ä¸‹è½½"},moreFile:{match:/<span id=\"filemore\" onclick=\"more\(\);\">/g},sign:{match:/var[\s]*(posign|postsign|vidksek|skdklds)[\s]*=[\s]*'(.+?)';/},fileName:{match:/<title>(.*)<\/title>/},fileSize:{match:/<span class=\"mtt\">\((.*)\)<\/span>/},loadDownHost:{match:/var[\s]*(vkjxld)[\s]*=[\s]*'(.+?)'/i},loadDown:{match:/var[\s]*(loaddown|oreferr|spototo|domianload|hyggid)[\s]*=[\s]*'(.+?)'/i},appleDown:{match:/var[\s]*appitem[\s]*=[\s]*'(.+?)'/i},uploadTime:{match:/mt2\"\>æ—¶é—´:<\/span>(.+?)[\s]*<span/i}});}async init(n,e,a){h.info([n,e,a]),this.netDiskIndex=n,this.shareCode=e,this.accessCode=a,this.regexp.unicode.isUnicode=!!this.shareCode.match(this.regexp.unicode.match),n===2?await this.getMoreFile(this.router.s(this.shareCode)):await this.getFileLink();}async getFileLink(n=!1){var o,l,c,u,p,m,k,x,A;const e=this;let a=this.router.default(this.shareCode);h.info("è“å¥äº‘-è·å–æ–‡ä»¶ä¸‹è½½é“¾æ¥"+a);let s=await C.get({url:a,headers:{Accept:"*/*","User-Agent":d.getRandomPCUA(),Referer:a},allowInterceptConfig:!1,onerror(){}});if(!s.status){if(h.error(s),s.type==="ontimeout")return;if(d.isNull(s.data.responseText)){f.error("è¯·æ±‚å¼‚å¸¸");return}s.data.responseText.includes("div>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–è€…å·²è¢«åˆ é™¤</div>")?f.error("æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–è€…å·²è¢«åˆ é™¤"):f.error("æœªçŸ¥æƒ…å†µ");return}let r=s.data;if(r.readyState!==4){h.error(r),f.error("è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•");return}if(r.responseText==null){h.error(r),f.error("è·å–ç½‘é¡µå†…å®¹ä¸ºç©º");return}if(e.checkPageCode(r))if(e.isMoreFile(r))await e.getMoreFile();else {h.info(r);let N=r.responseText;if(n){let P=N.match(/var[\s]*link[\s]*=[\s]*\'tp\/(.+?)\';/i);e.shareCode=P[P.length-1],h.info(`æ–°å‚æ•° => ${e.shareCode}`);}let D=v.parseHTML(N,!0,!0),K=D.querySelector('iframe[class^="ifr"]')||D.querySelector('iframe[class^="n_downlink"]');if(K){let P=K.getAttribute("src");h.error(["è¯¥é“¾æ¥éœ€è¦é‡æ–°é€šè¿‡iframeåœ°å€è®¿é—®è·å–ä¿¡æ¯",P]),f.info("æ­£åœ¨è¯·æ±‚ä¸‹è½½ä¿¡æ¯");let B=((o=D.querySelector("body div.d > div"))==null?void 0:o.innerText)||((l=D.querySelector("#filenajax"))==null?void 0:l.innerText)||((u=(c=D.querySelector("title"))==null?void 0:c.textContent)==null?void 0:u.replace(/ - è“å¥äº‘$/i,"")),_=N.match(/æ–‡ä»¶å¤§å°ï¼š<\/span>(.+?)<br>/i)||((p=D.querySelector("div.n_box div.n_file div.n_filesize"))==null?void 0:p.innerText)||((m=D.querySelector(".d2 table tr td .fileinfo:nth-child(1) .fileinforight"))==null?void 0:m.innerText),M=N.match(/ä¸Šä¼ æ—¶é—´ï¼š<\/span>(.+?)<br>/i)||((k=D.querySelector("#file[class=''] .n_file_info span.n_file_infos"))==null?void 0:k.innerText)||((x=D.querySelector(".d2 table tr td .fileinfo:nth-child(3) .fileinforight"))==null?void 0:x.innerText)||((A=D.querySelector("#file[class='filter'] .n_file_info span.n_file_infos"))==null?void 0:A.innerText);_?(Array.isArray(_)&&(_=_[_.length-1]),typeof _=="string"&&(_=_.replaceAll("å¤§å°ï¼š",""))):h.error("è§£ææ–‡ä»¶å¤§å°ä¿¡æ¯å¤±è´¥"),M?(Array.isArray(M)&&(M=M[M.length-1]),M.toString().toLowerCase().startsWith("android")&&(h.error("è§£æå‡ºçš„æ–‡ä»¶ä¸Šä¼ æ—¶é—´ä¿¡æ¯æ˜¯Android/xxxxå¼€å¤´"),M=void 0)):h.error("è§£ææ–‡ä»¶ä¸Šä¼ æ—¶é—´ä¿¡æ¯å¤±è´¥");let z=await e.getLinkByIframe(P,{fileName:B,fileSize:_,fileUploadTime:M});z&&(T.isForwardDownloadLink("lanzou")&&(z=T.parseDataToSchemeUri("lanzou",z)),w.staticView.oneFile({title:"è“å¥äº‘å•æ–‡ä»¶ç›´é“¾",fileName:B,fileSize:_,downloadUrl:z,fileUploadTime:M}));}else await e.getLink(r);}}checkPageCode(n){const e=this;let a=n.responseText;return a.match(e.regexp.noFile.match)?(f.error(e.regexp.noFile.tip),!1):a.match(e.regexp.noExists.match)?(f.error(e.regexp.noExists.tip),!1):a.match(e.regexp.needVipToShare.match)?(f.error(e.regexp.needVipToShare.tip),!1):!0}isMoreFile(n){const e=this;return n.responseText.match(e.regexp.moreFile.match)?(h.info("è¯¥é“¾æ¥ä¸ºå¤šæ–‡ä»¶"),!0):(h.info("è¯¥é“¾æ¥ä¸ºå•æ–‡ä»¶"),!1)}async getLink(n){const e=this;let a=n.responseText;if(a==null){h.error("shareCodeé”™è¯¯ï¼Œé‡æ–°ä»é¡µé¢ä¸­è·å–"),await e.getFileLink(!0);return}let s=a.match(e.regexp.sign.match),r="",o="",l=a.match(e.regexp.fileName.match),c=a.match(e.regexp.fileSize.match)||a.match(/<div class="n_filesize">å¤§å°ï¼š(.+?)<\/div>/i),u=a.match(e.regexp.uploadTime.match)||a.match(/<span class="n_file_infos">(.+?)<\/span>/i);if(l?l=l[l.length-1].trim():l="",c?c=c[c.length-1].trim():c="",u&&(u=u[u.length-1].trim()),s){o=s[s.length-1],h.info(`è·å–Sign: ${o}`),d.isNotNull(e.accessCode)?(h.info("ä¼ å…¥å‚æ•°=>æœ‰å¯†ç "),r=e.accessCode):h.info("ä¼ å…¥å‚æ•°=>æ— å¯†ç ");let p=await C.post({url:e.router.default("ajaxm.php"),responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","User-Agent":d.getRandomAndroidUA(),Referer:e.router.default(e.shareCode)},data:`action=downprocess&sign=${o}&p=${r}`});if(!p.status)return;let m=p.data;if(h.info(m),m.readyState===4){let k=d.toJSON(m.responseText),x=`${k.dom}/file/${k.url}`;typeof k.url=="string"&&(k.url.startsWith("http")||k.url.startsWith(k.dom))&&(x=k.url),k.zt,"å¯†ç ä¸æ­£ç¡®".indexOf(k.inf)!=-1?(f.error("å¯†ç ä¸æ­£ç¡®!"),w.newAccessCodeView(void 0,"lanzou",e.netDiskIndex,e.shareCode,e.accessCode,A=>{e.init(e.netDiskIndex,e.shareCode,A);})):(l=k.inf?k.inf:l,x=await Z.getRedirectFinalUrl(x,d.getRandomAndroidUA()),h.info(x),T.isForwardDownloadLink("lanzou")&&(x=T.parseDataToSchemeUri("lanzou",x)),w.staticView.oneFile({title:"è“å¥äº‘å•æ–‡ä»¶ç›´é“¾",fileName:l,fileSize:c,downloadUrl:x,fileUploadTime:u}));}else f.error("è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•");}else {let p=a.match(e.regexp.loadDownHost.match),m=a.match(e.regexp.loadDown.match),k=a.match(e.regexp.appleDown.match);if(d.isNull(m)&&(m=a.match(/var[\s]*(cppat)[\s]*=[\s]*'(.+?)'/i)),d.isNull(p)&&k&&(k=k[k.length-1],p=[k],m=[""],h.success(["å¤šæ–‡ä»¶-å½“å‰é“¾æ¥çŒœæµ‹ä¸ºè‹¹æœçš„æ–‡ä»¶",k])),d.isNull(p)){f.error("è“å¥äº‘ç›´é“¾ï¼šè·å–signçš„åŸŸåå¤±è´¥ï¼Œè¯·åé¦ˆå¼€å‘è€…",{timeout:3500});return}if(d.isNull(m)){f.error("è“å¥äº‘ç›´é“¾ï¼šè·å–signå¤±è´¥ï¼Œè¯·åé¦ˆå¼€å‘è€…",{timeout:3500});return}let x=`${p[p.length-1]}${m[m.length-1]}`;h.info([l,c,x]),x=await Z.getRedirectFinalUrl(x,d.getRandomAndroidUA()),h.info(x),T.isForwardDownloadLink("lanzou")&&(x=T.parseDataToSchemeUri("lanzou",x)),w.staticView.oneFile({title:"è“å¥äº‘å•æ–‡ä»¶ç›´é“¾",fileName:l,fileSize:c,downloadUrl:x,fileUploadTime:u});}}async getLinkByIframe(n,e){const a=this;h.info([n,e]);let s=a.router.default(n),r=await C.get({url:s,headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7","User-Agent":d.getRandomPCUA(),Referer:a.router.default(a.shareCode)}});if(!r.status)return;let o=r.data;h.info(o);let l=o.responseText,c=l.match(/var[\s]*aihidcms[\s]*=[\s]*'(.*)';/i),u=l.match(/var[\s]*ciucjdsdc[\s]*=[\s]*'(.*)';/i),p=l.match(/var[\s]*ajaxdata[\s]*=[\s]*'(.+)';/i),m=l.match(/'sign':[\s]*'(.+)',/i),k=l.match(/url[\s]*:[\s]*'(.+)'[\s]*,/),x="ajaxm.php",A="",N="",D="",K="";if(k?x=k[k.length-1]:f.error("æå–ajaxm.phpçš„å…·ä½“å‚æ•°å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤çš„"+x),c)A=c[c.length-1];else {f.error("ajaxm.phpè¯·æ±‚å‚æ•° websignkey è·å–å¤±è´¥");return}if(u)N=u[u.length-1];else {f.error("ajaxm.phpè¯·æ±‚å‚æ•° websign è·å–å¤±è´¥");return}if(p)D=p[p.length-1];else {f.error("ajaxm.phpè¯·æ±‚å‚æ•° signs è·å–å¤±è´¥");return}if(m)K=m[m.length-1];else {f.error("ajaxm.phpè¯·æ±‚å‚æ•° sign è·å–å¤±è´¥");return}let P={action:"downprocess",signs:D,sign:K,websign:N,websignkey:A,ves:1,kd:1};h.success("è¯·æ±‚çš„è·¯å¾„å‚æ•°ï¼š"+k),h.success("ajaxm.phpçš„è¯·æ±‚å‚æ•°-> "+P);let B=await C.post({url:a.router.default(x),headers:{Accept:"application/json, text/javascript, */*","Content-Type":"application/x-www-form-urlencoded",Referer:a.router.default(a.shareCode),"User-Agent":d.getRandomPCUA()},data:d.toSearchParamsStr(P)});if(!B.status)return;let _=B.data;h.info(_);let M=d.toJSON(_.responseText),z=`${M.dom}/file/${M.url}`;if(M.zt,h.success(["ç›´é“¾",z]),"å¯†ç ä¸æ­£ç¡®".indexOf(M.inf)!=-1)f.error("å¯†ç ä¸æ­£ç¡®!"),w.newAccessCodeView(void 0,"lanzou",a.netDiskIndex,a.shareCode,a.accessCode,E=>{a.init(a.netDiskIndex,a.shareCode,E);});else return e.fileName=d.isNotNull(M.inf)?M.inf:e.fileName,z=await Z.getRedirectFinalUrl(z,d.getRandomAndroidUA()),h.info(z),z}async getMoreFile(n){const e=this;n==null&&(n=e.router.default(e.shareCode));let a=await C.get({url:n,headers:{Accept:"*/*","User-Agent":d.getRandomAndroidUA(),Referer:n}});if(!a.status)return;let s=a.data;if(h.info(s),s.readyState!==4){f.error("è¯·æ±‚å¤±è´¥ï¼Œè¯·é‡è¯•");return}let r=s.responseText,o=r.match(/\'fid\':(.+?),/)[1].replaceAll("'",""),l=r.match(/\'uid\':(.+?),/)[1].replaceAll("'",""),c=1,u=r.match(/\'t\':(.+?),/)[1],p=new RegExp(u+`[\\s]*=[\\s]*('|")(.+?)('|");`),m=r.match(p)[2],k=r.match(/\'k\':(.+?),/)[1],x=new RegExp(k+`[\\s]*=[\\s]*('|")(.+?)('|");`),A=r.match(x)[2],D=`lx=${e.shareCode.match(e.regexp.unicode.match)?1:2}&fid=${o}&uid=${l}&pg=${c}&rep=0&t=${m}&k=${A}&up=1&ls=1&pwd=${e.accessCode}`;h.info(`å¤šæ–‡ä»¶è¯·æ±‚å‚æ•°ï¼š${D}`);let K=await C.post({url:e.router.default("filemoreajax.php"),responseType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","User-Agent":d.getRandomAndroidUA(),Referer:n},data:D});if(!K.status)return;let P=K.data;h.info(P);let B=d.toJSON(P.responseText),_=B.zt,M=B.info;if(_===4)f.error(M);else if(_===1){let z=f.loading("è·å–æ–‡ä»¶å¤¹æˆåŠŸï¼Œè§£ææ–‡ä»¶ç›´é“¾ä¸­..."),E=B.text,ie=[];h.info(`æœ¬é“¾æ¥ä¸€å…±${E.length}ä¸ªæ–‡ä»¶`);for(let ne=0;ne<E.length;ne++){let ae=E[ne],me=ae.id,Ce=ae.name_all,Pe=ae.size,it=ae.icon,$e=ae.time;ie.push({fileName:Ce,fileSize:Pe,fileType:it,createTime:$e,latestTime:$e,isFolder:!1,index:0,async clickEvent(){let Ae=await e.parseMoreFile(me,Ce,Pe,$e);if(Ae.success)return {autoDownload:!0,mode:"aBlank",url:Ae.downloadUrl};h.error(["è·å–ä¸‹è½½ä¿¡æ¯å¤±è´¥ï¼š",Ae]),f.error(Ae.msg);}});}z.close(),w.staticView.moreFile("è“å¥äº‘æ–‡ä»¶è§£æ",ie);}else "å¯†ç ä¸æ­£ç¡®".indexOf(M)!==-1?(f.error("å¯†ç ä¸æ­£ç¡®!"),w.newAccessCodeView(void 0,"lanzou",e.netDiskIndex,e.shareCode,e.accessCode,z=>{e.init(e.netDiskIndex,e.shareCode,z);})):"æ²¡æœ‰äº†".indexOf(M)!==-1?f.error("æ²¡æœ‰æ–‡ä»¶äº†"):f.error("æœªçŸ¥é”™è¯¯");}async parseMoreFile(n,e,a,s){const r=this;let o=await C.get({url:r.router.default(n),headers:{Accept:"*/*","User-Agent":d.getRandomPCUA(),Referer:r.router.default(r.shareCode)}});if(h.info(o),!o.status)return {success:!1,fileName:e,fileSize:a,fileUploadTime:s,msg:`è§£æå¤±è´¥ï¼Œ${o.msg}`,downloadUrl:void 0};let c=o.data.responseText,u=v.parseHTML(c,!0,!0),p=u.querySelector('iframe[class^="ifr"]')||u.querySelector('iframe[class^="n_downlink"]');if(!p)return {success:!1,fileName:e,fileSize:a,fileUploadTime:s,msg:"è§£æiframeé“¾æ¥å¤±è´¥",downloadUrl:void 0};let m=p.getAttribute("src");h.error(["è¯¥é“¾æ¥éœ€è¦é‡æ–°é€šè¿‡iframeåœ°å€è®¿é—®è·å–ä¿¡æ¯",m]),f.info("æ­£åœ¨è¯·æ±‚ä¸‹è½½ä¿¡æ¯");let k=await r.getLinkByIframe(m,{fileName:e,fileSize:a,fileUploadTime:s});return k?(T.isForwardDownloadLink("lanzou")&&(k=T.parseDataToSchemeUri("lanzou",k)),{success:!0,fileName:e,fileSize:a,fileUploadTime:s,msg:"success",downloadUrl:k}):{success:!1,fileName:e,fileSize:a,fileUploadTime:s,msg:"è·å–ä¸‹è½½é“¾æ¥å¤±è´¥",downloadUrl:void 0}}}const Se={LanZouDiskApp:"lanZouY-disk-app",EncryptList:["Y","y","0","Z","z","N","n","M","I","6","m","W","w","1","X","x","L","l","K","7","k","i","U","u","2","V","v","J","j","8","G","g","F","S","s","3","T","t","H","h","f","E","e","D","Q","q","4","R","r","9","d","a","C","c","B","O","o","5","P","p","b","A"],decodeChar(t){for(let i=0;i<this.EncryptList.length;i++)if(t==this.EncryptList[i])return i;return -1},idEncrypt(t){let i=1,n=0;if(t!=""&&t.length>4){let e;t=t.substring(3,t.length-1);for(let a=0;a<t.length;a++)e=t.charAt(t.length-a-1),n+=this.decodeChar(e)*i,i*=62;}return n},encrypt(t){const i=Cryptojs.enc.Utf8.parse(this.LanZouDiskApp),n=Cryptojs.enc.Utf8.parse(t);return Cryptojs.AES.encrypt(n,i,{mode:Cryptojs.mode.ECB,padding:Cryptojs.pad.Pkcs7})},encryptHex(t){return this.encrypt(t,this.LanZouDiskApp).ciphertext.toString().toUpperCase()}};class Mt extends se{constructor(){super(...arguments);I(this,"uuid");I(this,"userId");I(this,"shareCodeId");}async init(n,e,a){var o,l,c,u;const s=this;h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a,s.shareCodeId=s.getDecodeShareCodeId(e),s.uuid=s.getEncodeUUID();let r=await this.recommendList(3,"Chrome",s.uuid,2,s.getEncodeTimeStamp(),s.shareCodeId,0,1,60);if(r&&r.list.length){if((l=(o=r.list[0])==null?void 0:o.map)!=null&&l.userId)s.userId=(u=(c=r.list[0])==null?void 0:c.map)==null?void 0:u.userId;else {f.error("è§£æè·å–ã€userIdã€‘ä¸ºç©º");return}if(r.list[0].folderIds==null){h.success("è¯¥é“¾æ¥æ˜¯ å•æ–‡ä»¶");let p=r.list[0].fileList[0],k=await s.parseFolderInfo(r.list[0].fileList,0)[0].clickEvent();if(k&&!Array.isArray(k)){let x=k.url;T.isForwardDownloadLink("lanzouyx")&&(x=T.parseDataToSchemeUri("lanzouyx",x)),w.staticView.oneFile({title:"è“å¥äº‘ä¼˜äº«å•æ–‡ä»¶ç›´é“¾",fileName:p.fileName,fileSize:p.fileSize*1024,downloadUrl:x,fileUploadTime:d.formatToTimeStamp(p.updTime),fileLatestTime:d.formatToTimeStamp(p.updTime)});}}else {h.success("è¯¥é“¾æ¥æ˜¯ å¤šæ–‡ä»¶"),f.info("æ­£åœ¨é€’å½’æ–‡ä»¶");let p=f.loading("æ­£åœ¨è§£æå¤šæ–‡ä»¶ä¸­ï¼Œè¯·ç¨å..."),m=s.parseFolderInfo(r.list[0].fileList,0);p.close(),h.info("é€’å½’å®Œæ¯•"),w.staticView.moreFile("è“å¥äº‘ä¼˜äº«è§£æ",m);}}}parseFolderInfo(n,e){const a=this;let s=[],r=[],o=[];return n.forEach(l=>{l.fileType===2?r.push({fileName:l.folderName,fileSize:0,fileType:"",createTime:new Date(l.updTime).getTime(),latestTime:new Date(l.updTime).getTime(),isFolder:!0,index:e,async clickEvent(c,u){let p=Date.now(),m=a.getEncodeTimeStamp(p),k=l.folderId,x=await a.getFolderInfo(3,"Chrome",a.uuid,2,m,a.shareCodeId,k,1,60);return x&&x.list?a.parseFolderInfo(x.list,e+1):[]}}):o.push({fileName:l.fileName,fileSize:l.fileSize*1024,fileType:"",createTime:new Date(l.updTime).getTime(),latestTime:new Date(l.updTime).getTime(),isFolder:!1,index:e,async clickEvent(){let c=l.fileId,u=l.userId||a.userId,p=a.uuid;if(d.isNull(u)){f.error("è·å–ã€userIdã€‘ä¸ºç©º");return}if(d.isNull(p)){f.error("è·å–ã€uuidã€‘ä¸ºç©º");return}let m=await a.getDownloadFileUrl(...a.getDownloadFileParams(c,u,p));if(m)return T.isForwardDownloadLink("lanzouyx")&&(m=T.parseDataToSchemeUri("lanzouyx",m)),{url:m,autoDownload:!0,mode:"aBlank"}}});}),r.sort((l,c)=>l.fileName.localeCompare(c.fileName)),o.sort((l,c)=>l.fileName.localeCompare(c.fileName)),s=s.concat(r),s=s.concat(o),s}async recommendList(n=3,e="Chrome",a="",s=2,r="",o="",l=0,c=1,u=60){let p=await C.post(`https://api.ilanzou.com/unproved/recommend/list?devType=${n}&devModel=${e}&uuid=${a}&extra=${s}&timestamp=${r}&shareId=${o}&type=${l}&offset=${c}&limit=${u}`,{headers:{Accept:"application/json, text/plain, */*",Origin:"https://www.ilanzou.com",Referer:"https://www.ilanzou.com/","Sec-Fetch-Site":"same-site",Host:"api.ilanzou.com","User-Agent":d.getRandomPCUA()},responseType:"json"});if(!p.status)return;let m=d.toJSON(p.data.responseText);if(h.success(["è·å–é“¾æ¥ä¿¡æ¯ï¼š",m]),m.code!==200){f.error("è¯·æ±‚é“¾æ¥ä¿¡æ¯å¤±è´¥");return}if(!m.list.length){f.error("è·å–é“¾æ¥ä¿¡æ¯ä¸ºç©º");return}return m}async getFolderInfo(n=6,e="Chrome",a="",s=2,r="",o="",l="",c=1,u=60){let p=await C.post(`https://api.ilanzou.com/unproved/share/list?devType=${n}&devModel=${e}&uuid=${a}&extra=${s}&timestamp=${r}&shareId=${o}&folderId=${l}&offset=${c}&limit=${u}`,{headers:{Accept:"application/json, text/plain, */*",Origin:"https://www.ilanzou.com",Referer:"https://www.ilanzou.com/","Sec-Fetch-Site":"same-site",Host:"api.ilanzou.com","User-Agent":d.getRandomPCUA()}});if(!p.status)return;let m=d.toJSON(p.data.responseText);if(h.success(["è·å–æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ï¼š",m]),m.code===200)return m;f.error(m.msg);}async getDownloadFileUrl(n="",e=1,a=6,s="",r="",o=""){let l=await C.options(`https://api.ilanzou.com/unproved/file/redirect?downloadId=${n}&enable=${e}&devType=${a}&uuid=${s}&timestamp=${r}&auth=${o}`,{});if(l.status){if(h.success(l),l.data.responseText){let c=d.toJSON(l.data.responseText);h.error(c),f.error(c.msg);return}return l.data.finalUrl}}getEncodeUUID(n=21){return ((a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((s,r)=>(r&=63,s+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r>62?"-":"_",s),""))(n)}getDecodeShareCodeId(n){return Se.idEncrypt(n)}getEncodeTimeStamp(n=Date.now()){return Se.encryptHex(n)}getDownloadFileParams(n,e="",a){const s=this;let r=Date.now(),o=Se.encryptHex(n+"|"+e),l=1,c=6,u=s.getEncodeTimeStamp(r),p=Se.encryptHex(n+"|"+r);return [o,l,c,a,u,p]}gotoLogin(){H.confirm({title:{position:"center",text:"è“å¥äº‘ä¼˜äº«"},content:{text:"å¿…é¡»å…ˆåœ¨ã€è“å¥äº‘ä¼˜äº«ã€‘è¿›è¡Œç™»å½•ï¼Œç„¶åç™»å½•æˆåŠŸååˆ·æ–°è·å–å¿…å¤‡çš„ä¸‹è½½å‚æ•°ã€uuidã€‘å’Œã€userIdã€‘ã€‚",html:!1},btn:{reverse:!0,position:"end",ok:{text:"å‰å¾€",enable:!0,callback(){window.open("https://www.ilanzou.com","_blank");}}}},w.popsStyle.tianYiYunLoginTip);}}class Lt extends se{constructor(){super(...arguments);I(this,"panelList",[]);I(this,"panelContent","");I(this,"OK_CODE","0000");}async init(n,e,a){const s=this;h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a,s.panelList=[],s.panelContent="";let r=await s.checkLinkValidity(s.shareCode,s.accessCode);if(r)if(r.isFolder){f.info("æ­£åœ¨é€’å½’æ–‡ä»¶");let o=f.loading("æ­£åœ¨è§£æå¤šæ–‡ä»¶ä¸­ï¼Œè¯·ç¨å..."),l=await s.getShareFolder(r.data.guid);if(!l){o.close();return}let c=await s.getShareFiles(r.data.guid);if(!c){o.close();return}let u=s.getFolderInfo(r.data.guid,l,c,0);o.close(),h.info("é€’å½’å®Œæ¯•"),w.staticView.moreFile("å¥¶ç‰›å¿«ä¼ æ–‡ä»¶è§£æ",u);}else {let o;if(r.zipDownload?o=await s.getZipFileDownloadUrl(s.shareCode,r.guid,r.fileName):o=await s.getDownloadUrl(s.shareCode,r.guid,r.id),!o)return;T.isForwardDownloadLink("nainiu")&&(o=T.parseDataToSchemeUri("nainiu",o)),w.staticView.oneFile({title:"å¥¶ç‰›å¿«ä¼ å•æ–‡ä»¶ç›´é“¾",fileName:r.fileName,fileType:r.fileType,fileSize:r.fileSize,downloadUrl:o,fileUploadTime:r.fileUploadTime,fileLatestTime:r.fileLatestTime,clickCallBack:l=>{s.downloadFile(r.fileName,o);}});}}async checkLinkValidity(n,e){const a=this;let s=await a.getShareByUniqueUrl(n);if(!s)return !1;let r=s.code,o=s.message;if(r!==a.OK_CODE)return f.error(o),!1;{let l=s.data.needPassword,c=s.data.zipDownload;return l&&d.isNull(e)?(f.error("å¯†ç ç¼ºå¤±!"),w.newAccessCodeView("å¯†ç ç¼ºå¤±","nainiu",a.netDiskIndex,a.shareCode,a.accessCode,u=>{a.init(a.netDiskIndex,a.shareCode,u);}),!1):c?(f.success("è¯¥é“¾æ¥ä¸ºzipå•æ–‡ä»¶"),{zipDownload:c,guid:s.data.guid,fileSize:d.formatByteToSize(s.data.firstFolder.size),fileName:s.data.firstFolder.title,fileUploadTime:d.formatTime(s.data.firstFolder.created_at),fileLatestTime:d.formatTime(s.data.firstFolder.updated_at)}):s.data.firstFile==null?(f.success("è¯¥é“¾æ¥ä¸ºæ–‡ä»¶å¤¹ç±»å‹"),{isFolder:!0,guid:s.data.guid,firstFolder:s.data.firstFolder,data:s.data}):{zipDownload:c,guid:s.data.guid,id:s.data.firstFile.id,fileSize:d.formatByteToSize(s.data.firstFile.file_info.size),fileName:s.data.firstFile.file_info.title,fileType:s.data.firstFile.file_info.format,fileUploadTime:d.formatTime(s.data.firstFile.created_at),fileLatestTime:d.formatTime(s.data.firstFile.updated_at)}}}getFolderInfo(n,e,a,s=0){const r=this;let o=[],l=[],c=[];return e.forEach(u=>{o.push({fileName:u.title,fileSize:0,fileType:"",createTime:u.created_at,latestTime:u.updated_at,isFolder:!0,index:s,async clickEvent(){if(!u.child_folder_count&&!u.content_count)return [];let p=await r.getShareFolder(n,u.id);if(!p)return [];let m=await r.getShareFiles(n,u.id);return m?r.getFolderInfo(n,p,m,s+1):[]}});}),a.forEach(u=>{let p=u.file_info.title,m=u.file_info.format??"";m&&(p=p+"."+m),o.push({fileName:p,fileSize:u.file_info.size,fileType:m,createTime:u.created_at,latestTime:u.updated_at,isFolder:!1,index:s,async clickEvent(){let k=await r.getDownloadUrl(r.shareCode,n,u.id);k&&(T.isForwardDownloadLink("nainiu")&&(k=T.parseDataToSchemeUri("nainiu",k)),r.downloadFile(p,k));}});}),l.sort((u,p)=>u.fileName.localeCompare(p.fileName)),c.sort((u,p)=>u.fileName.localeCompare(p.fileName)),o=o.concat(l),o=o.concat(c),h.info(["getFolderInfo",o]),o}async parseMoreFile(n,e){}async getShareFolder(n,e="",a=0,s=100){const r=this;let o=await C.get(`https://cowtransfer.com/core/api/transfer/share/folders?transferGuid=${n}&folderId=${e}&page=${a}&size=${s}`,{headers:{Accept:"application/json","User-Agent":d.getRandomPCUA(),Referer:"https://cowtransfer.com/"}});if(h.success(o),!o.status)return;let l=d.toJSON(o.data.responseText);if(l.code!==r.OK_CODE){f.error(l.message);return}let c=l.data.folders;if(!Array.isArray(c)){f.error("data.foldersä¸æ˜¯æ•°ç»„");return}return c}async getShareFiles(n,e="",a=0,s=20,r=!1){const o=this;let l=await C.get(`https://cowtransfer.com/core/api/transfer/share/files?transferGuid=${n}&folderId=${e}&page=${a}&size=${s}&subContent=${r}`,{headers:{Accept:"application/json","User-Agent":d.getRandomPCUA(),Referer:"https://cowtransfer.com/"}});if(h.success(l),!l.status)return;let c=d.toJSON(l.data.responseText);if(c.code!==o.OK_CODE){f.error(c.message);return}let u=c.data.files;if(!Array.isArray(u)){f.error("data.filesä¸æ˜¯æ•°ç»„");return}return u}async getShareByUniqueUrl(n){let e=`https://cowtransfer.com/core/api/transfer/share?uniqueUrl=${n}`,a=await C.get({url:e,headers:{"User-Agent":d.getRandomPCUA(),Referer:"https://cowtransfer.com/s/"+n}});if(h.info(a),!a.status)return;let s=a.data,r=d.toJSON(s.responseText);return h.info(["è½¬æ¢çš„JSON",r]),r}async getDownloadUrl(n,e="",a=""){const s=this;let r=`https://cowtransfer.com/core/api/transfer/share/download?transferGuid=${e}&fileId=${a}`,o=await C.get({url:r,headers:{"User-Agent":d.getRandomPCUA(),Referer:"https://cowtransfer.com/s/"+n}});if(h.info(o),!o.status)return;let l=o.data,c=d.toJSON(l.responseText);if(h.info(["è½¬æ¢çš„JSON",c]),c.code===s.OK_CODE)return c.data.downloadUrl;f.error(`å¥¶ç‰›å¿«ä¼ -è·å–ç›´é“¾ï¼š${c.message}`);}async getZipFileDownloadUrl(n,e="",a=""){const s=this;let r=`https://cowtransfer.com/core/api/transfer/share/download?transferGuid=${e}&title=${a}`,o=await C.get({url:r,headers:{"User-Agent":d.getRandomPCUA(),Referer:"https://cowtransfer.com/s/"+n}});if(h.info(o),!o.status)return;let l=o.data,c=d.toJSON(l.responseText);if(h.info(["è½¬æ¢çš„JSON",c]),c.code===s.OK_CODE)return c.data.downloadUrl;f.error(`å¥¶ç‰›å¿«ä¼ -è·å–ç›´é“¾ï¼š${c.message}`);}async downloadFile(n,e){const a=this;if(h.info(["ä¸‹è½½æ–‡ä»¶ï¼š",n,e]),f.info(`è°ƒç”¨ã€GM_downloadã€‘ä¸‹è½½ï¼š${n}`),typeof Te>"u"){f.error("å½“å‰è„šæœ¬ç¯å¢ƒç¼ºå¤±API ã€GM_downloadã€‘");return}let s,r=f.loading("ä¸‹è½½ä¸­...",{showClose:!0,onClose(){typeof s=="function"&&s();}}),o=!1,l=Te({url:e,name:n,headers:{Referer:"https://cowtransfer.com/s/"+a.shareCode},onload(){r.close(),f.success(`ä¸‹è½½ ${n} å·²å®Œæˆ`);},onprogress(c){if(typeof c=="object"&&"loaded"in c&&"total"in c&&!o){let p=(c.loaded/c.total*100).toFixed(2);r.setText(`ä¸‹è½½ä¸­...${p}%`),c.loaded===c.total&&(o=!0);}},onerror(c){r.close(),h.error(["ä¸‹è½½å¤±è´¥errorğŸ‘‰",c]),typeof c=="object"&&c.error?f.error(`ä¸‹è½½ ${n} å¤±è´¥æˆ–å·²å–æ¶ˆ åŸå› ï¼š${c.error}`,{timeout:6e3}):f.error(`ä¸‹è½½ ${n} å¤±è´¥æˆ–å·²å–æ¶ˆ`);},ontimeout(){r.close(),f.error(`ä¸‹è½½ ${n} è¯·æ±‚è¶…æ—¶`);}});typeof l=="object"&&"abort"in l&&(s=l.abort);}}class Nt extends se{constructor(){super(...arguments);I(this,"shareId");I(this,"shareMode",1);I(this,"code",{ShareNotFoundFlatDir:"æŠ±æ­‰ï¼Œè¯¥æ–‡ä»¶çš„åˆ†äº«å¹³é“ºç›®å½•æœªæ‰¾åˆ°",ShareNotFound:"æŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢åœ°å€æœ‰è¯¯ï¼Œæˆ–è€…è¯¥é¡µé¢ä¸å­˜åœ¨ã€‚",ShareAuditNotPass:"æŠ±æ­‰ï¼Œè¯¥å†…å®¹å®¡æ ¸ä¸é€šè¿‡",FileNotFound:"æŠ±æ­‰ï¼Œæ–‡ä»¶ä¸å­˜åœ¨",ShareExpiredError:"æŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢åœ°å€æœ‰è¯¯ï¼Œæˆ–è€…è¯¥é¡µé¢ä¸å­˜åœ¨",ShareAuditWaiting:"æŠ±æ­‰ï¼Œè¯¥é“¾æ¥å¤„äºå®¡æ ¸ä¸­",ShareInfoNotFound:"æŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢åœ°å€æœ‰è¯¯ï¼Œæˆ–è€…è¯¥é¡µé¢ä¸å­˜åœ¨",FileTooLarge:"æŠ±æ­‰ï¼Œæ–‡ä»¶å¤ªå¤§ï¼Œä¸æ”¯æŒä¸‹è½½",InvalidSessionKey:"å¤©ç¿¼äº‘PCç«¯Cookieæœªç”Ÿæˆï¼Œæ˜¯å¦å‰å»ç™»å½•ï¼Ÿ<br />&nbsp;&nbsp;&nbsp;&nbsp;(æ³¨æ„,éœ€è¦å½“å‰æµè§ˆå™¨çš„UAåˆ‡æ¢æˆPCä¸”åœ¨ç™»å½•åè¦ç­‰å¾…è¿›å…¥ä¸ªäººäº‘ç©ºé—´åç”ŸæˆCookieï¼Œä¸æ˜¯æ‰‹æœºç«¯æµè§ˆçš„ä¸ªäººäº‘ç©ºé—´ï¼Œé‚£æ ·ç”Ÿæˆçš„Cookieæ— æ³•ä½¿ç”¨)"});}async init(n,e,a){const s=this;h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a;let r=await s.getShareInfoByCodeV2(e);if(r){if(h.info(["è§£æçš„JSONä¿¡æ¯",r]),r.needAccessCode&&d.isNull(s.accessCode)){f.error("å¯†ç ä¸æ­£ç¡®!"),w.newAccessCodeView(void 0,"tianyiyun",s.netDiskIndex,s.shareCode,s.accessCode,o=>{s.init(s.netDiskIndex,s.shareCode,o);});return}if("shareId"in r?this.shareId=r.shareId:this.shareId=await s.getShareId(e,a),"shareMode"in r&&(this.shareMode=r.shareMode),this.shareId!=null)if(r.isFolder){f.info("æ­£åœ¨é€’å½’æ–‡ä»¶");let o=f.loading("æ­£åœ¨è§£æå¤šæ–‡ä»¶ä¸­ï¼Œè¯·ç¨å..."),l=r.fileId,c=await s.listShareDir(e,a,void 0,void 0,l,l,void 0,this.shareId,void 0,void 0,void 0);if(!c){o.close();return}let u=s.getFolderInfo(e,a,c,0);o.close(),h.info("é€’å½’å®Œæ¯•"),w.staticView.moreFile("å¤©ç¿¼äº‘æ–‡ä»¶è§£æ",u);return}else {let o=await s.getDownloadUrl(s.shareCode,s.accessCode,r.fileId,this.shareId);o&&(T.isForwardDownloadLink("tianyiyun")&&(o=T.parseDataToSchemeUri("tianyiyun",o)),w.staticView.oneFile({title:"å¤©ç¿¼äº‘å•æ–‡ä»¶ç›´é“¾",fileName:r.fileName,fileSize:d.formatByteToSize(r.fileSize),downloadUrl:o,fileUploadTime:r.fileCreateDate,fileLatestTime:r.fileLastOpTime}));}}}async getUserBriefInfo(n){const e=this;let a=await C.get("https://cloud.189.cn/api/portal/v2/getUserBriefInfo.action",{headers:{Accept:"application/json;charset=UTF-8",Referer:"https://cloud.189.cn/web/share?code="+n,"User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror(){}});if(h.info(a),!a.status){let r=d.toJSON(a.data.responseText);r.res_code in e.code?f.error(e.code[r.res_code]):f.error("è¯·æ±‚å¼‚å¸¸");return}let s=d.toJSON(a.data.responseText);if(s.res_code===0)return s}async getShareInfoByCodeV2(n){const e=this;let a=await C.post({url:"https://cloud.189.cn/api/open/share/getShareInfoByCodeV2.action",data:`shareCode=${n}`,headers:{Accept:"application/json;charset=UTF-8","Content-Type":"application/x-www-form-urlencoded","User-Agent":d.getRandomPCUA(),"Sign-Type":1,Referer:"https://cloud.189.cn/web/share?code="+n,Origin:"https://cloud.189.cn"},allowInterceptConfig:!1,onerror(){}});if(!a.status){let o=d.toJSON(a.data.responseText);h.error(["è·å–ä¸‹è½½å‚æ•°å¤±è´¥çš„JSONä¿¡æ¯",o]),o.res_code in e.code?f.error(e.code[o.res_code]):f.error(o.res_message);return}let s=a.data;h.info(s);let r=d.toJSON(s.responseText);if(r.res_code==0)return r;e.code.hasOwnProperty(r.res_code)?f.error(e.code[r.res_code]):f.error("è·å–FileIdå¤±è´¥");}async getShareId(n,e){let a=await C.get({url:`https://cloud.189.cn/api/open/share/checkAccessCode.action?shareCode=${n}&accessCode=${e}`,headers:{Accept:"application/json;charset=UTF-8","Cache-Control":"no-cache","User-Agent":d.getRandomPCUA(),"Sign-Type":1,Referer:`https://cloud.189.cn/web/share?code=${n}`},responseType:"json"});if(!a.status)return;let s=a.data;h.info(s);let r=d.toJSON(s.responseText);if(r.res_code===0&&"shareId"in r)return r.shareId;f.error("è·å–shareIdå¤±è´¥"),h.info(r);}getNoCacheValue(){let n="";for(let e=0;e<17;e++)n+=d.getRandomValue(1,9);return "0."+n}async getDownloadUrl(n,e,a,s){const r=this;let o=await C.get({url:`https://cloud.189.cn/api/open/file/getFileDownloadUrl.action?fileId=${a}&dt=1&shareId=${s}`,headers:{Accept:"application/json;charset=UTF-8","Cache-Control":"no-cache","User-Agent":d.getRandomPCUA(),Referer:`https://cloud.189.cn/web/share?code=${n}`,"Sign-Type":1},responseType:"json",allowInterceptConfig:!1,onerror(){}});if(h.info(o),!o.status){let u=d.toJSON(o.data.responseText);u.errorCode==="InvalidSessionKey"?r.gotoLogin(r.code.InvalidSessionKey):u.res_code in r.code?f.error(r.code[u.res_code]):f.error("è¯·æ±‚å¼‚å¸¸");return}let l=o.data,c=d.toJSON(l.responseText);if(h.info(c),c.res_code===0)return c.fileDownloadUrl;c.res_code==="InvalidSessionKey"||c.errorCode==="InvalidSessionKey"?r.gotoLogin(r.code.InvalidSessionKey):r.code.hasOwnProperty(c.res_code)?f.error(r.code[c.res_code]):(f.error("è¯·æ±‚å¤±è´¥"),h.error(l));}gotoLogin(n=""){H.confirm({title:{position:"center",text:"å¤©ç¿¼äº‘"},content:{text:n,html:!1},btn:{reverse:!0,position:"end",ok:{text:"å‰å¾€",enable:!0,callback(){window.open("https://cloud.189.cn/api/portal/loginUrl.action?redirectURL=https://cloud.189.cn/web/main","_blank");}}}},w.popsStyle.tianYiYunLoginTip);}async listShareDir(n,e,a=1,s=60,r,o,l=!0,c,u=5,p="lastOpTime",m=!0){const k=this,x={pageNum:a,pageSize:s,fileId:r,shareDirFileId:o,isFolder:l,shareId:c,shareMode:this.shareMode,iconOption:u,orderBy:p,descending:m,accessCode:e};let A=await C.get(`https://cloud.189.cn/api/open/share/listShareDir.action?${d.toSearchParamsStr(x)}`,{headers:{Accept:"application/json;charset=UTF-8",Referer:`https://cloud.189.cn/web/share?code=${n}`,"Sign-Type":1,"User-Agent":d.getRandomPCUA()},responseType:"json",allowInterceptConfig:!1,onerror(){}});if(!A.status){let K=d.toJSON(A.data.responseText);h.error(["è§£ææ–‡ä»¶å¤¹ä¿¡æ¯å¤±è´¥",K]),K.res_code in k.code?f.error(k.code[K.res_code]):"res_message"in K?f.error(K.res_message):f.error("è§£ææ–‡ä»¶å¤¹ä¿¡æ¯å¤±è´¥");return}let N=A.data;h.info(N);let D=d.toJSON(N.responseText);if(D.res_code==0)return D.fileListAO;k.code.hasOwnProperty(D.res_code)?f.error(k.code[D.res_code]):f.error("è·å–FileIdå¤±è´¥");}getFolderInfo(n,e,a,s=0){const r=this;let o=[],l=[],c=[];return a.folderList.forEach(u=>{o.push({fileName:u.name,fileSize:0,fileType:"",createTime:d.formatToTimeStamp(u.createDate),latestTime:d.formatToTimeStamp(u.lastOpTime),isFolder:!0,index:s,async clickEvent(){let p=await r.listShareDir(n,e,1,100,u.id,u.id,void 0,r.shareId,void 0,void 0,void 0);return p?r.getFolderInfo(n,e,p,s+1):[]}});}),a.fileList.forEach(u=>{o.push({fileName:u.name,fileSize:u.size,fileType:"",createTime:d.formatToTimeStamp(u.createDate),latestTime:d.formatToTimeStamp(u.lastOpTime),isFolder:!1,index:s,async clickEvent(){let p=await r.getDownloadUrl(n,e,u.id,r.shareId);if(p)return T.isForwardDownloadLink("tianyiyun")&&(p=T.parseDataToSchemeUri("tianyiyun",p)),{autoDownload:!0,mode:"aBlank",url:p}}});}),l.sort((u,p)=>u.fileName.localeCompare(p.fileName)),c.sort((u,p)=>u.fileName.localeCompare(p.fileName)),o=o.concat(l),o=o.concat(c),h.info(["getFolderInfo",o]),o}}class Ut extends se{async init(i,n,e){const a=this;if(h.info([i,n,e]),a.netDiskIndex=i,a.shareCode=n,a.accessCode=e,f.info("æ£€æŸ¥æ˜¯å¦å·²ç™»å½•UCç½‘ç›˜"),!await a.isLogin()){a.gotoLogin("æ£€æµ‹åˆ°å°šæœªç™»å½•UCç½‘ç›˜ï¼Œæ˜¯å¦å‰å»ç™»å½•ï¼Ÿ<br />&nbsp;&nbsp;&nbsp;&nbsp;(æ³¨æ„,éœ€è¦å½“å‰æµè§ˆå™¨çš„UAåˆ‡æ¢æˆPCæ‰æœ‰ç™»å½•é€‰é¡¹)");return}let r=await a.getStoken(a.shareCode,a.accessCode);if(!r)return;let o=await a.getDetail(a.shareCode,a.accessCode,r);if(!o){f.error("UCç½‘ç›˜ï¼šè·å–detailå¤±è´¥");return}if(o.length===1&&o[0].dir==!1&&o[0].file_type===1){let l=o[0],c=await a.getDownload(a.shareCode,r,l.fid,l.share_fid_token);if(!c)return;if(!c[0].download_url){f.error("è·å–download_urlå¤±è´¥");return}w.staticView.oneFile({title:"UCç½‘ç›˜å•æ–‡ä»¶ç›´é“¾",fileName:c[0].file_name,fileSize:d.formatByteToSize(c[0].size),downloadUrl:c[0].download_url,fileUploadTime:d.formatTime(c[0].created_at),fileLatestTime:d.formatTime(c[0].last_update_at),clickCallBack(){a.downloadFile(c[0].file_name,c[0].download_url);}});}else {f.info("æ­£åœ¨é€’å½’æ–‡ä»¶");let l=f.loading("æ­£åœ¨è§£æå¤šæ–‡ä»¶ä¸­ï¼Œè¯·ç¨å..."),c=a.getFolderInfo(o,r,0);l.close(),h.info("é€’å½’å®Œæ¯•"),w.staticView.moreFile("UCç½‘ç›˜æ–‡ä»¶è§£æ",c);return}}async isLogin(){let i=await C.get("https://drive.uc.cn/",{headers:{"User-Agent":d.getRandomPCUA()}});if(h.success(["åˆ¤æ–­æ˜¯å¦å·²ç™»å½•UCç½‘ç›˜",i]),!!i.status)return i.data.finalUrl==="https://drive.uc.cn/list"?"å·²ç™»å½•":!1}downloadFile(i,n){if(h.info(["è°ƒç”¨ã€GM_downloadã€‘ä¸‹è½½ï¼š",arguments]),f.info(`è°ƒç”¨ã€GM_downloadã€‘ä¸‹è½½ï¼š${i}`),typeof Te>"u"){f.error("å½“å‰è„šæœ¬ç¯å¢ƒç¼ºå¤±API ã€GM_downloadã€‘");return}let e=f.loading("ä¸‹è½½ä¸­..."),a=!1;return Te({url:n,name:i,headers:{Referer:"https://drive.uc.cn/"},onload(){e.close(),f.success(`ä¸‹è½½ ${i} å·²å®Œæˆ`);},onprogress(s){if(typeof s=="object"&&"loaded"in s&&"total"in s&&!a){let o=(s.loaded/s.total*100).toFixed(2);e.setText(`ä¸‹è½½ä¸­...${o}%`),s.loaded===s.total&&(a=!0);}},onerror(s){e.close(),h.error(["ä¸‹è½½å¤±è´¥errorğŸ‘‰",s]),typeof s=="object"&&s.error?f.error(`ä¸‹è½½ ${i} å¤±è´¥æˆ–å·²å–æ¶ˆ åŸå› ï¼š${s.error}`,{timeout:6e3}):f.error(`ä¸‹è½½ ${i} å¤±è´¥æˆ–å·²å–æ¶ˆ`);},ontimeout(){e.close(),f.error(`ä¸‹è½½ ${i} è¯·æ±‚è¶…æ—¶`);}})}gotoLogin(i=""){H.confirm({title:{position:"center",text:"UCç½‘ç›˜"},content:{text:i,html:!1},btn:{reverse:!0,position:"end",ok:{text:"å‰å¾€",enable:!0,callback(){window.open("https://drive.uc.cn","_blank");}}}},w.popsStyle.tianYiYunLoginTip);}async getStoken(i,n){let e=await C.post("https://pc-api.uc.cn/1/clouddrive/share/sharepage/token?entry=ft&fr=pc&pr=UCBrowser",{data:JSON.stringify({share_for_transfer:!0,passcode:n,pwd_id:i}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","User-Agent":d.getRandomPCUA(),Origin:"https://drive.uc.cn",Referer:"https://drive.uc.cn/"},allowInterceptConfig:!1,onerror(){}});if(!e.status){let s=d.toJSON(e.data.responseText);h.error(["è·å–stokenå¤±è´¥JSONä¿¡æ¯",s]),"message"in s?f.error(s.message):f.error("è¯·æ±‚å¼‚å¸¸ï¼Œè·å–stokenå¤±è´¥");return}let a=d.toJSON(e.data.responseText);if(h.info(["è·å–stokenï¼š",a]),a.code!==0){h.error(["è·å–stokenå¤±è´¥",a]),f.error("è·å–stokenå¤±è´¥");return}return a.data.stoken}async getDetail(i,n,e,a=0,s=0,r=1,o=50,l=0,c=0,u=1){let p=await C.get(`https://pc-api.uc.cn/1/clouddrive/transfer_share/detail?pr=UCBrowser&fr=h5&pwd_id=${i}&__t=${new Date().getTime()}&passcode=${n}&stoken=${encodeURIComponent(e)}&pdir_fid=${a}&force=${s}&_page=${r}&_size=${o}&_fetch_banner=${l}&_fetch_share=${c}&_fetch_total=${u}&_sort=${encodeURIComponent("file_type:asc,file_name:asc")}`,{headers:{Accept:"application/json, text/plain, */*","User-Agent":d.getRandomPCUA(),Origin:"https://drive.uc.cn",Referer:"https://drive.uc.cn/"}});if(!p.status)return;let m=d.toJSON(p.data.responseText);if(h.info(["è·å–detailï¼š",m]),m.code!==0){h.error(["è·å–detailå¤±è´¥",m]),f.error("è·å–detailå¤±è´¥");return}let k=m.metadata;return k&&k._total&&k._total>k._size?await this.getDetail(i,n,e,a,s,r,k._total,l,c,u):m.data.list}async getDownload(i,n,e,a){let s=await C.post("https://pc-api.uc.cn/1/clouddrive/file/download?entry=ft&fr=pc&pr=UCBrowser",{data:JSON.stringify({fids:[e],pwd_id:i,stoken:n,fids_token:[a]}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","User-Agent":d.getRandomPCUA(),Origin:"https://drive.uc.cn",Referer:"https://drive.uc.cn/"}});if(!s.status)return;let r=d.toJSON(s.data.responseText);if(h.info(["è·å–downloadï¼š",r]),r.code!==0){h.error(["è·å–downloadå¤±è´¥",r]),f.error("è·å–downloadå¤±è´¥");return}if(r.data.length===0){h.error(["è·å–download detailå¤±è´¥",r]),f.error("è·å–download detailå¤±è´¥å¤±è´¥");return}return r.data}getFolderInfo(i,n,e=0){const a=this;let s=[],r=[],o=[];return i.forEach(l=>{l.dir==!1&&l.file_type===1?o.push({fileName:l.file_name,fileSize:l.size,fileType:"",createTime:l.created_at,latestTime:l.updated_at,isFolder:!1,index:e,async clickEvent(){let c=await a.getDownload(a.shareCode,n,l.fid,l.share_fid_token);if(c&&c.length?c=c[0].download_url:c="",l.ban)f.error("æ–‡ä»¶å·²è¢«ç¦æ­¢ä¸‹è½½");else {let u=c;if(T.isForwardDownloadLink("uc")&&(u=T.parseDataToSchemeUri("uc",u)),u===c)a.downloadFile(l.file_name,c);else return {autoDownload:!0,mode:"aBlank",url:c}}}}):r.push({fileName:l.file_name,fileSize:l.size,fileType:"",createTime:l.created_at,latestTime:l.updated_at,isFolder:!0,index:e,async clickEvent(){if(l.include_items===0)return h.success("é‡Œé¢æ²¡æœ‰æ–‡ä»¶"),[];let c=await a.getDetail(a.shareCode,a.accessCode,n,l.fid);return c?a.getFolderInfo(c,n,e+1):[]}});}),r.sort((l,c)=>l.fileName.localeCompare(c.fileName)),o.sort((l,c)=>l.fileName.localeCompare(c.fileName)),s=s.concat(r),s=s.concat(o),h.info(["getFilesInfoByRec",s]),s}}class $t extends se{constructor(){super(...arguments);I(this,"token");I(this,"code",{1004:"no token",1008:"æ‚¨æ²¡æœ‰æƒé™è®¿é—®",1013:"ç³Ÿç³•ï¼Œæ­¤ä»»åŠ¡å·²è¿‡æœŸé”€æ¯ï¼Œä¸‹æ¬¡è¦è®°å¾—ç»­æœŸ",1066:"å¯¹æ–¹è®¾ç½®çš„ä¸‹è½½ / é¢„è§ˆæ¬¡æ•°å·²ç”¨å®Œ",1088:"ç³Ÿç³•ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨"});}async init(n,e,a){const s=this;if(h.info([n,e,a]),s.netDiskIndex=n,s.shareCode=e,s.accessCode=a,f.info("æ­£åœ¨è¯·æ±‚ç›´é“¾ä¸­..."),!await this.getWssToken())return;let o=await this.getPid();o&&await this.getFileNList(o.bid,o.pid);}async getWssToken(){const n=this;let e=await C.post({url:"https://www.wenshushu.cn/ap/login/anonymous",responseType:"json",dataType:"json",data:JSON.stringify({dev_info:"{}"}),headers:{Accept:"application/json, text/plain, */*","User-Agent":d.getRandomAndroidUA(),Referer:"https://www.wenshushu.cn/f/"+n.shareCode}});if(h.success(e),!e.status)return;let a=d.toJSON(e.data.responseText);if(a.code===0)return n.token=a.data.token,a.data.token;a.code in n.code?f.error(n.code[a.code]):f.error("è·å–wsså¤±è´¥");}async getPid(){const n=this;let e=await C.post({url:"https://www.wenshushu.cn/ap/task/mgrtask",dataType:"json",responseType:"json",data:JSON.stringify({tid:n.shareCode,password:"",ufileid:""}),headers:{Accept:"application/json, text/plain, */*","User-Agent":d.getRandomAndroidUA(),Referer:"https://www.wenshushu.cn/f/"+n.shareCode,"x-token":n.token}});if(h.success(e),!e.status)return;let a=e.data,s=d.toJSON(a.responseText);if(s.code===0)return {bid:s.data.boxid,pid:s.data.ufileid};s.code in n.code?f.error(n.code[s.code]):f.error("è·å–pidå¤±è´¥");}async getFileNList(n,e){const a=this;let s=await C.post({url:"https://www.wenshushu.cn/ap/ufile/nlist",dataType:"json",responseType:"json",data:JSON.stringify({start:0,sort:{name:"asc"},bid:n,pid:e,options:{uploader:"true"},size:50}),headers:{Accept:"application/json, text/plain, */*","User-Agent":d.getRandomAndroidUA(),Referer:"https://www.wenshushu.cn/f/"+a.shareCode,"x-token":a.token}});if(h.success(s),!s.status)return;let r=s.data,o=d.toJSON(r.responseText);o.code===0?o.data.fileList[0].type===2?(f.error("è¯¥é“¾æ¥ä¸ºå¤šå±‚çº§æ–‡ä»¶åµŒå¥—ï¼Œè·³è½¬"),re.openBlank(Z.getBlankUrl("wenshushu",a.netDiskIndex,a.shareCode,a.accessCode),"wenshushu",a.netDiskIndex,a.shareCode,a.accessCode)):await a.getDownloadUrl(o.data.fileList[0]):o.code in a.code?f.error(a.code[o.code]):f.error("è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥");}async getDownloadUrl(n){const e=this;let a=n.fname,s=d.formatByteToSize(n.size),r=await C.post({url:"https://www.wenshushu.cn/ap/dl/sign",dataType:"json",responseType:"json",data:JSON.stringify({ufileid:n.fid,consumeCode:0}),headers:{Accept:"application/json, text/plain, */*","User-Agent":d.getRandomAndroidUA(),Referer:"https://www.wenshushu.cn/f/"+e.shareCode,"x-token":e.token}});if(!r.status)return;h.success(r);let o=r.data,l=d.toJSON(o.responseText);if(l.code==0){let c=l.data.url;c===""?f.error("å¯¹æ–¹çš„åˆ†äº«æµé‡ä¸è¶³"):(T.isForwardDownloadLink("wenshushu")&&(c=T.parseDataToSchemeUri("wenshushu",c)),w.staticView.oneFile({title:"æ–‡å”å”å•æ–‡ä»¶ç›´é“¾",fileName:a,fileSize:s,downloadUrl:c}));}else l.data in e.code?f.error(e.code[l.data]):f.error("è·å–ä¸‹è½½é“¾æ¥å¤±è´¥");}}const Me={netDisk:{baidu:_t,lanzou:Dt,lanzouyx:Mt,tianyiyun:Nt,wenshushu:$t,_123pan:At,jianguoyun:Tt,nainiu:Lt,uc:Ut,aliyun:St}},Z={isAllowMode(t){return ["copy","openBlank"].includes(t)},isAllowExtendMode(t){return ["parseFile"].includes(t)},getBlankUrl(t,i,n,e){let a=b.matchRule[t][i],s=a.blank;n&&(s=V.replaceParam(s,{shareCode:n})),e&&e!==""?s=V.replaceParam(s,{accessCode:e}):s=s.replace(b.noAccessCodeRegExp,"");let r=b.linkDict.get(t).get(n);if(a.paramMatch){let o=r.matchText.match(a.paramMatch),l={};for(let c=0;c<o.length;c++)l[`$${c}`]=o[c];s=V.replaceParam(s,l);}return s},getCopyUrlInfo(t,i,n,e){let a=b.matchRule[t][i],s=a.copyUrl;n&&(s=V.replaceParam(s,{shareCode:n})),e&&e!==""?s=V.replaceParam(s,{accessCode:e}):s=s.replace(b.noAccessCodeRegExp,"");let r=b.linkDict.get(t).get(n);if(a.paramMatch){let o=r.matchText.match(a.paramMatch),l={};for(let c=0;c<o.length;c++)l[`$${c}`]=o[c];s=V.replaceParam(s,l);}return s},async getRedirectFinalUrl(t,i){if(!g.function.getTheDirectLinkAfterRedirection.value)return t;f.success("è·å–é‡å®šå‘åçš„ç›´é“¾"),h.info("å¼€å§‹è·å–é‡å®šå‘åçš„ç›´é“¾");let n=await C.head({url:t,headers:{"User-Agent":i,Referer:window.location.origin}});return n.status?n.data.finalUrl:t}},re={copy(t,i,n,e,a="å·²å¤åˆ¶"){d.setClip(Z.getCopyUrlInfo(t,i,n,e)),f.success(a);},async parseFile(t,i,n,e){f.info("æ­£åœ¨è·å–ç›´é“¾"),Me.netDisk[t]?await new Me.netDisk[t]().init(i,n,e):(h.error(`${t} ä¸å­˜åœ¨è§£æ`),f.error("è¯¥é“¾æ¥ä¸å­˜åœ¨è§£æåŠŸèƒ½"));},openBlank(t,i,n,e,a){var s;h.success(["æ–°æ ‡ç­¾é¡µæ‰“å¼€",[...arguments]]),xe.$data.enable&&xe.setValue({url:t,netDiskName:i,netDiskIndex:n,shareCode:e,accessCode:a}),T.isForwardBlankLink(i)&&(t=T.parseDataToSchemeUri(i,t)),(s=document.querySelector("meta[name='referrer']"))==null||s.setAttribute("content","no-referrer"),d.isNotNull(a)&&F.linkClickMode_openBlank.openBlankWithCopyAccessCode(i)?d.setClip(a).then(()=>{window.open(t,"_blank");}):window.open(t,"_blank");},openBlankWithScheme(t,i,n,e){let a=Z.getBlankUrl(t,i,n,e);a=T.parseDataToSchemeUri(t,a),window.open(a,"_blank");}},zt={async init(t,i,n){let e=Z.getBlankUrl("baidu",t,i,n),a=await C.get(e,{headers:{"User-Agent":d.getRandomPCUA(),Host:"pan.baidu.com",Referer:e,Origin:"https://pan.baidu.com"},allowInterceptConfig:!1,onerror(){},ontimeout(){}}),s=a.data.responseText;return !a.status&&d.isNull(s)||a.data.finalUrl.includes("404.html")?y.status.error:s.includes("è¿‡æœŸæ—¶é—´ï¼š")?y.status.success:s.includes("è¾“å…¥æå–")?y.status.needAccessCode:s.includes("ä¸å­˜åœ¨")||s.includes("å·²å¤±æ•ˆ")?y.status.failed:y.status.unknown}},Et={async init(t,i,n){let e=Z.getBlankUrl("lanzou",t,i,n),a=new URL(e),s=await C.get(e,{headers:{"User-Agent":d.getRandomPCUA(),Host:a.hostname,Origin:a.origin,Referer:e},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!s.status)return y.status.error;let r=s.data.responseText;return d.isNull(r)?y.status.failed:r.includes("è¾“å…¥å¯†ç ")?y.status.needAccessCode:r.includes("æ¥æ™šå•¦")||r.includes("ä¸å­˜åœ¨")?y.status.failed:y.status.success}},It={async init(t,i,n){let e=new Me.netDisk.lanzouyx;e.uuid=e.getEncodeUUID(),e.shareCodeId=e.getDecodeShareCodeId(i);let a=3,s="Chrome",r=2,o=e.getEncodeTimeStamp(),p=await C.post(`https://api.ilanzou.com/unproved/recommend/list?devType=${a}&devModel=${s}&uuid=${e.uuid}&extra=${r}&timestamp=${o}&shareId=${e.shareCodeId}&type=0&offset=1&limit=60`,{headers:{Accept:"application/json, text/plain, */*",Origin:"https://www.ilanzou.com",Referer:"https://www.ilanzou.com/","Sec-Fetch-Site":"same-site",Host:"api.ilanzou.com","User-Agent":d.getRandomPCUA()},responseType:"json",allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!p.status)return y.status.error;let m=d.toJSON(p.data.responseText);return h.success(["è·å–é“¾æ¥ä¿¡æ¯ï¼š",m]),m.code!==200?y.status.error:m.list.length?y.status.success:y.status.failed}},Ft={async init(t,i,n){let e=await C.post("https://api.cloud.189.cn/open/share/getShareInfoByCodeV2.action",{data:`shareCode=${i}`,headers:{Accept:"application/json;charset=UTF-8","Content-Type":"application/x-www-form-urlencoded","User-Agent":d.getRandomPCUA(),"Sign-Type":1,Referer:"https://cloud.189.cn/web/share?code="+i,Origin:"https://cloud.189.cn"},allowInterceptConfig:!1,onerror(){},ontimeout(){}}),a=e.data.responseText;return !e.status&&d.isNull(a)?y.status.error:a.includes("ShareInfoNotFound")||a.includes("ShareNotFound")||a.includes("FileNotFound")||a.includes("ShareAuditWaiting")||a.includes("ShareExpiredError")||a.includes("ShareAuditNotPass")?y.status.failed:a.includes("needAccessCode")?y.status.needAccessCode:y.status.success}},Pt={async init(t,i,n){let e=await C.post("https://caiyun.139.com/stapi/custom/outlink/brief",{data:"linkId="+i,headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":d.getRandomPCUA(),Host:"caiyun.139.com",Referer:Z.getBlankUrl("hecaiyun",t,i,n),Origin:"https://caiyun.139.com"},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!e.status)return y.status.error;let a=d.toJSON(e.data.responseText);return a.code==0?a.data.isPasswd==="1"?y.status.needAccessCode:y.status.success:y.status.failed}},Vt={async init(t,i,n){var s;let e=await C.post("https://api.aliyundrive.com/adrive/v3/share_link/get_share_by_anonymous?share_id="+i,{data:JSON.stringify({share_id:i}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","User-Agent":d.getRandomPCUA(),Referer:"https://www.aliyundrive.com/",Origin:"https://www.aliyundrive.com"},allowInterceptConfig:!1,onerror(){},ontimeout(){}}),a=d.toJSON(e.data.responseText);return !e.status&&d.isNull(a)?y.status.error:a.code==="ParamFlowException"||a.code==="NotFound.ShareLink"||a.code==="ShareLink.Cancelled"||a.file_count===0||((s=a.file_infos)==null?void 0:s.length)===0?y.status.failed:y.status.success}},Ot={async init(t,i,n){let e=await C.post("https://www.wenshushu.cn/ap/task/mgrtask",{data:JSON.stringify({tid:i}),headers:{"Content-Type":"application/json","User-Agent":d.getRandomPCUA(),"x-token":"wss:7pmakczzw6i",Host:"www.wenshushu.cn",Origin:"https://www.wenshushu.cn",Referer:Z.getBlankUrl("wenshushu",t,i,n)},responseType:"json",allowInterceptConfig:!1,onerror(){},ontimeout(){}});return !e.status&&d.isNull(e.data.responseText)?y.status.error:d.toJSON(e.data.responseText).code!==0?y.status.failed:y.status.success}},Bt={async init(t,i,n){let e=await C.get("https://cowtransfer.com/core/api/transfer/share?uniqueUrl="+i,{headers:{"User-Agent":d.getRandomPCUA(),Host:"cowtransfer.com",Origin:"https://cowtransfer.com/",Referer:"https://cowtransfer.com/"}});if(!e.status&&d.isNull(e.data.responseText))return y.status.error;let a=d.toJSON(e.data.responseText);return a.code!="0000"?y.status.failed:a.data.needPassword&&a.data.needPassword?y.status.needAccessCode:y.status.success}},Ht={async init(t,i,n){let e=await C.get("https://www.123pan.com/api/share/info?shareKey="+i,{headers:{"User-Agent":d.getRandomPCUA(),Host:"www.123pan.com",Origin:"https://www.123pan.com/",Referer:"https://www.123pan.com/"},allowInterceptConfig:!1,onerror(){},ontimeout(){},responseType:"json"});if(!e.status&&d.isNull(e.data.responseText))return y.status.error;let a=d.toJSON(e.data.responseText);return e.data.responseText.includes("åˆ†äº«é¡µé¢ä¸å­˜åœ¨")||a.code!==0?y.status.failed:a.data.HasPwd?y.status.needAccessCode:y.status.success}},Zt={async init(t,i,n){let e=Z.getBlankUrl("weiyun",t,i,n),a=await C.get(e,{headers:{"User-Agent":d.getRandomPCUA(),Host:"share.weiyun.com",Origin:"https://share.weiyun.com",Referer:e},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!a.status&&d.isNull(a.data.responseText))return y.status.error;let s=a.data.responseText;return s.includes("å·²åˆ é™¤")||s.includes("è¿åç›¸å…³æ³•è§„")||s.includes("å·²è¿‡æœŸ")||s.includes("å·²ç»åˆ é™¤")||s.includes("ç›®å½•æ— æ•ˆ")?y.status.failed:s.includes('"need_pwd":1')||s.includes('"pwd":"')?y.status.needAccessCode:y.status.success}},jt={async init(t,i,n){let e=await C.post("https://xluser-ssl.xunlei.com/v1/shield/captcha/init",{data:JSON.stringify({client_id:"Xqp0kJBXWhwaTpB6",device_id:"925b7631473a13716b791d7f28289cad",action:"get:/drive/v1/share",meta:{package_name:"pan.xunlei.com",client_version:"1.45.0",captcha_sign:"1.fe2108ad808a74c9ac0243309242726c",timestamp:"1645241033384"}}),headers:{"User-Agent":d.getRandomPCUA(),Host:"pan.xunlei.com",Referer:Z.getBlankUrl("xunlei",t,i,n),Origin:"https://pan.xunlei.com"},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!e.status&&d.isNull(e.data.responseText))return y.status.error;let s=d.toJSON(e.data.responseText).captcha_token,r=await C.get("https://api-pan.xunlei.com/drive/v1/share?share_id="+i,{headers:{"User-Agent":d.getRandomPCUA(),Host:"pan.xunlei.com",Referer:Z.getBlankUrl("xunlei",t,i,n),Origin:"https://pan.xunlei.com","x-captcha-token":s,"x-client-id":"Xqp0kJBXWhwaTpB6","x-device-id":"925b7631473a13716b791d7f28289cad"},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!r.status&&d.isNull(r.data.responseText))return y.status.error;let o=r.data.responseText;return o.includes("NOT_FOUND")||o.includes("SENSITIVE_RESOURCE")||o.includes("EXPIRED")||o.includes("DELETED")?y.status.failed:o.includes("PASS_CODE_EMPTY")?y.status.needAccessCode:y.status.success}},qt={async init(t,i,n){let e=Z.getBlankUrl("chengtong",t,i,n);const s=new URL(e).pathname.split("/")[1].trim();let r="";if(s==="f"||s==="file")r=`https://webapi.ctfile.com/getfile.php?path=${s}&f=${i}&passcode=${n}&token=0&r=${Math.random()}&ref=`;else if(s==="d"||s==="dir")r=`https://webapi.ctfile.com/getdir.php?path=${s}&d=${i}&folder_id=&passcode=${n}&token=0&r=${Math.random()}&ref=`;else return h.warn(["æœªçŸ¥path",[t,i,n]]),y.status.unknown;let o=await C.get(r,{headers:{Host:"webapi.ctfile.com",Origin:"https://url95.ctfile.com",Referer:e,Accept:"application/json, text/javascript, */*; q=0.01","User-Agent":d.getRandomPCUA()},allowInterceptConfig:!1,onerror(){},ontimeout(){}}),l=o.data.responseText;if(!o.status&&d.isNull(l))return y.status.error;let c=d.toJSON(l);return c.code===200?y.status.success:c.code===401?y.status.needAccessCode:c.code===404||c.code===503?y.status.failed:y.status.unknown}},Wt={async init(t,i,n){let a=await C.post("https://drive.quark.cn/1/clouddrive/share/sharepage/token?pr=ucpro&fr=pc",{data:JSON.stringify({pwd_id:i,passcode:""}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json;charset=UTF-8","User-Agent":d.getRandomPCUA(),Origin:"https://pan.quark.cn",Referer:Z.getBlankUrl("kuake",t,i,n)},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!a.status&&d.isNull(a.data.responseText))return y.status.error;let s=d.toJSON(a.data.responseText);return s.message.includes("éœ€è¦æå–ç ")?y.status.needAccessCode:s.message.includes("ok")?y.status.success:y.status.failed}},Kt={async init(t,i,n){let e=Z.getBlankUrl("jianguoyun",t,i,n),a=await C.get(e,{headers:{"User-Agent":d.getRandomPCUA(),Host:"www.jianguoyun.com",Referer:Z.getBlankUrl("jianguoyun",t,i,n),Origin:"https://www.jianguoyun.com"},allowInterceptConfig:!1,onerror(){},ontimeout(){}}),s=a.data.responseText;return !a.status&&d.isNull(s)?y.status.error:s.includes("<h1>å•Šå™¢ï¼")?y.status.failed:y.status.success}},Jt={async init(t,i,n){var o,l,c,u;let e=Z.getBlankUrl("onedrive",t,i,n),a=new URL(e),s=await C.get(e,{headers:{"User-Agent":d.getRandomPCUA(),Host:a.hostname,Referer:e,Origin:a.origin},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!s.status){let p=(l=(o=s.data)==null?void 0:o.status)==null?void 0:l.toString();return p==="429"?y.status.error:p==="404"?y.status.failed:y.status.error}let r=s.data.responseText;if(d.isNotNull(r))try{if((u=(c=v.parseHTML(r,!0,!0).querySelector("title"))==null?void 0:c.innerHTML)!=null&&u.includes("é”™è¯¯"))return y.status.failed}catch{}return y.status.success}},Yt={async init(t,i,n){let e=await C.get("https://drive.uc.cn/s/"+i,{headers:{"User-Agent":d.getRandomAndroidUA(),Host:"drive.uc.cn",Referer:Z.getBlankUrl("uc",t,i,n),Origin:"https://drive.uc.cn"},allowInterceptConfig:!1,onerror(){},ontimeout(){}}),a=e.data.responseText;if(!e.status&&d.isNull(a))return y.status.error;let s=v.parseHTML(a,!0,!0);if(s.querySelector(".h5-page-main")){let r=s.querySelector(".h5-page-main"),o=r.textContent||r.innerText;return o.includes("å¤±æ•ˆ")||o.includes("ä¸å­˜åœ¨")||o.includes("è¿è§„")||o.includes("åˆ é™¤")?y.status.failed:y.status.unknown}else return s.querySelector(".main-body .input-wrap input")?y.status.needAccessCode:y.status.success}},Oe=`.netdisk-url-box {\r
	border-bottom: 1px solid #e4e6eb;\r
}\r
.netdisk-url-div {\r
	display: flex;\r
	align-items: center;\r
	width: 100%;\r
	padding: 5px 0px 5px 0px;\r
}\r
.netdisk-icon {\r
	display: contents;\r
}\r
.netdisk-icon .netdisk-icon-img {\r
	cursor: pointer;\r
	width: 28px;\r
	height: 28px;\r
	min-width: 28px;\r
	min-height: 28px;\r
	font-size: 0.8em;\r
	margin: 0px 10px;\r
}\r
.netdisk-url-div .netdisk-icon,\r
.netdisk-url-div .netdisk-status {\r
	flex: 0 0 auto;\r
}\r
.netdisk-url-div .netdisk-url {\r
	flex: 1;\r
}\r
.netdisk-icon .netdisk-icon-img {\r
	border-radius: 10px;\r
	box-shadow: 0 0.3px 0.6px rgb(0 0 0 / 6%), 0 0.7px 1.3px rgb(0 0 0 / 8%),\r
		0 1.3px 2.5px rgb(0 0 0 / 10%), 0 2.2px 4.5px rgb(0 0 0 / 12%),\r
		0 4.2px 8.4px rgb(0 0 0 / 14%), 0 10px 20px rgb(0 0 0 / 20%);\r
}\r
.netdisk-status[data-check-failed] {\r
	padding: 5px 5px;\r
}\r
.netdisk-url {\r
	padding: 5px 5px;\r
}\r
.netdisk-url a {\r
	color: #ff4848 !important;\r
	min-height: 28px;\r
	overflow-x: hidden;\r
	overflow-y: auto;\r
	font-size: 0.8em;\r
	border: none;\r
	display: flex;\r
	align-items: center;\r
	width: 100%;\r
	height: 100%;\r
	padding: 0px;\r
	word-break: break-word;\r
	text-align: left;\r
}\r
.netdisk-status {\r
	display: none;\r
}\r
.netdisk-status[data-check-valid] {\r
	display: flex;\r
	align-items: center;\r
	width: 15px;\r
	height: 15px;\r
}\r
.netdisk-status[data-check-valid="failed"] {\r
	color: red;\r
}\r
.netdisk-status[data-check-valid="error"] {\r
	cursor: pointer;\r
}\r
\r
.netdisk-status[data-check-valid="success"] {\r
	color: green;\r
}\r
.netdisk-status[data-check-valid="loading"] svg {\r
	animation: rotating 2s linear infinite;\r
}\r
.netdisk-url-box:has(.netdisk-status[data-check-valid="failed"]) {\r
	text-decoration: line-through;\r
}\r
.whitesevPop-whitesevPopSetting :focus-visible {\r
	outline-offset: 0;\r
	outline: 0;\r
}\r
.netdisk-url a[isvisited="true"] {\r
	color: #8b8888 !important;\r
}\r
.netdisk-url a:active {\r
	box-shadow: 0 0 0 1px #616161 inset;\r
}\r
.netdisk-url a:focus-visible {\r
	outline: 0;\r
}\r
.whitesevPop-content p[pop] {\r
	text-indent: 0;\r
}\r
.whitesevPop-button[type="primary"] {\r
	border-color: #2d8cf0;\r
	background-color: #2d8cf0;\r
}\r
`,ke=function(t,i){return {KEY:t,default:i,get value(){return O(t,i)},set value(n){$(t,n);}}},he={show(){w.Alias.uiLinkAlias==null?(this.createView(),this.initViewEvent()):w.Alias.uiLinkAlias.show();},createView(){const t={view:{"netdisl-small-window-shrink-status":ke("netdisl-small-window-shrink-status",!1),"netdisk-ui-small-window-position":ke("netdisk-ui-small-window-position",null)}};let i="";w.isMatchedNetDiskIconMap.forEach(e=>{let s=b.linkDict.get(e).getItems();Object.keys(s).forEach(r=>{let o=s[r],l=b.handleLinkShow(e,o.netDiskIndex,r,o.accessCode,o.matchText);i=i+this.getViewHTML(w.src.icon[e],e,o.netDiskIndex,r,o.accessCode,l);});});let n=`
            <div class="netdisk-url-box-all">
                ${i}
            </div>`;if(g.function["netdisk-behavior-mode"].value.toLowerCase().includes("smallwindow")){w.Alias.uiLinkAlias=H.alert({title:{text:"ç½‘ç›˜",position:"center"},content:{text:n,html:!0},btn:{ok:{enable:!1},close:{callback(s){g.function["netdisk-behavior-mode"].value.toLowerCase().includes("suspension")?(Q.mode.current_suspension_smallwindow_mode.value="suspension",s.hide(),w.suspension.show()):(w.Alias.uiLinkAlias=void 0,s.close());}}},mask:{enable:!1},animation:"",beforeAppendToPageCallBack(s,r){let o=s.querySelector(".pops-header-control"),l=s.querySelector(".pops-alert-content"),c=v.createElement("button",{className:"pops-header-control",innerHTML:`
                                <i class="pops-icon">
                                <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                                    <path fill="currentColor" d="M290.816 774.144h167.936c12.288 0 20.48 8.192 20.48 20.48s-8.192 20.48-20.48 20.48h-219.136c-12.288 0-20.48-8.192-20.48-20.48v-2.048-206.848c0-12.288 8.192-20.48 20.48-20.48s20.48 8.192 20.48 20.48v163.84l210.944-198.656c8.192-8.192 20.48-8.192 28.672 0s8.192 20.48 0 28.672l-208.896 194.56z m462.848-524.288h-167.936c-12.288 0-20.48-8.192-20.48-20.48s8.192-20.48 20.48-20.48h219.136c12.288 0 20.48 8.192 20.48 20.48v208.896c0 12.288-8.192 20.48-20.48 20.48s-20.48-8.192-20.48-20.48v-163.84l-210.944 198.656c-8.192 8.192-20.48 8.192-28.672 0s-8.192-20.48 0-28.672l208.896-194.56z m188.416 323.584c0 12.288-8.192 20.48-20.48 20.48s-20.48-8.192-20.48-20.48v-389.12c0-34.816-26.624-61.44-61.44-61.44h-655.36c-34.816 0-61.44 26.624-61.44 61.44v655.36c0 34.816 26.624 61.44 61.44 61.44h655.36c34.816 0 61.44-26.624 61.44-61.44v-94.208c0-12.288 8.192-20.48 20.48-20.48s20.48 8.192 20.48 20.48v94.208c0 57.344-45.056 102.4-102.4 102.4h-655.36c-57.344 0-102.4-45.056-102.4-102.4v-655.36c0-57.344 45.056-102.4 102.4-102.4h655.36c57.344 0 102.4 45.056 102.4 102.4v389.12z">
                                    </path>
                                </svg>
                                </i>
                                `},{type:"launch","data-header":!0}),u=v.createElement("button",{className:"pops-header-control",innerHTML:`
                                <i class="pops-icon">
                                <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
                                    <path fill="currentColor" d="M618.496 425.984h167.936c12.288 0 20.48 8.192 20.48 20.48s-8.192 20.48-20.48 20.48h-219.136c-12.288 0-20.48-8.192-20.48-20.48v-2.048-206.848c0-12.288 8.192-20.48 20.48-20.48s20.48 8.192 20.48 20.48v163.84l210.944-198.656c8.192-8.192 20.48-8.192 28.672 0s8.192 20.48 0 28.672l-208.896 194.56z m-192.512 172.032h-167.936c-12.288 0-20.48-8.192-20.48-20.48s8.192-20.48 20.48-20.48h219.136c12.288 0 20.48 8.192 20.48 20.48v208.896c0 12.288-8.192 20.48-20.48 20.48s-20.48-8.192-20.48-20.48v-163.84l-210.944 198.656c-8.192 8.192-20.48 8.192-28.672 0s-8.192-20.48 0-28.672l208.896-194.56z m516.096-24.576c0 12.288-8.192 20.48-20.48 20.48s-20.48-8.192-20.48-20.48v-389.12c0-34.816-26.624-61.44-61.44-61.44h-655.36c-34.816 0-61.44 26.624-61.44 61.44v655.36c0 34.816 26.624 61.44 61.44 61.44h655.36c34.816 0 61.44-26.624 61.44-61.44v-94.208c0-12.288 8.192-20.48 20.48-20.48s20.48 8.192 20.48 20.48v94.208c0 57.344-45.056 102.4-102.4 102.4h-655.36c-57.344 0-102.4-45.056-102.4-102.4v-655.36c0-57.344 45.056-102.4 102.4-102.4h655.36c57.344 0 102.4 45.056 102.4 102.4v389.12z">
                                    </path>
                                </svg>
                                </i>
                                `},{type:"shrink","data-header":!0});v.before(o,c),v.before(o,u),v.on(c,"click",void 0,function(){c.classList.add("pops-hide-important"),u.classList.remove("pops-hide-important"),l.classList.remove("pops-hide-important"),t.view["netdisl-small-window-shrink-status"].value=!1;},{capture:!0}),v.on(u,"click",void 0,function(){u.classList.add("pops-hide-important"),c.classList.remove("pops-hide-important"),l.classList.add("pops-hide-important"),l.classList.add("pops-no-border-important"),t.view["netdisl-small-window-shrink-status"].value=!0;},{capture:!0}),t.view["netdisl-small-window-shrink-status"].value?u.click():c.click();},dragMoveCallBack(s,r,o){t.view["netdisk-ui-small-window-position"].value={left:r,top:o};},class:"whitesevPop",style:`
                    ${Oe}

                    .pops {
                        --container-title-height: 35px;
                        --content-max-height: ${g.smallWindow["netdisk-ui-small-window-max-height"].value}px;
                        --netdisk-line-space: 8px;
                        --netdisk-icon-size: 24px;
                    }
                    .pops[type-value="alert"]{
                        transform: none;
                    }
                    .pops {
                        max-height: var(--content-max-height);
                    }
                    .pops[type-value=alert] .pops-alert-content{
                        max-height: calc(var(--content-max-height) - var(--container-title-height) - var(--container-bottom-btn-height));
                    }
                    .pops-header-controls button.pops-header-control[type][data-header]{
                        padding: 0px 5px;
                    }
                    .netdisk-url-div{
                        padding: 0px;
                    }
                    .netdisk-icon .netdisk-icon-img{
                        width: var(--netdisk-icon-size);
                        height: var(--netdisk-icon-size);
                        min-width: var(--netdisk-icon-size);
                        min-height: var(--netdisk-icon-size);
                        margin: 0px var(--netdisk-line-space);
                    }
                    .netdisk-status{
                        margin-right: var(--netdisk-line-space);
                    }
                    .netdisk-url{
                        padding: 2px 0px;
                    }
                    `},w.popsStyle.mainViewSmallWindow);let e=t.view["netdisk-ui-small-window-position"].value,a=w.Alias.uiLinkAlias.popsElement;if(e){let s=v.width(a,!0),r=v.height(a,!0),o=v.width(window),l=v.height(window);const{transformLeft:c,transformTop:u}=v.getTransform(a);let p=o-s+c,m=l-r+u,k=0+c,x=0+u;e.top>m?e.top=m:e.top<x&&(e.top=x),e.left>p?e.left=p:e.left<k&&(e.left=k),a.style.transitionDuration="0s",a.style.left=e.left+"px",a.style.top=e.top+"px",setTimeout(()=>{a.style.transitionDuration="0s";},300);}}else w.Alias.uiLinkAlias=H.alert({title:{text:"ç½‘ç›˜",position:"center"},content:{text:n,html:!0},btn:{ok:{enable:!1},close:{callback(e){w.Alias.uiLinkAlias=void 0,e.close();}}},mask:{clickCallBack(e){e(),w.Alias.uiLinkAlias=void 0;}},class:"whitesevPop",style:`
                    ${Oe}

                    .pops {
                        max-height: ${J.isPhone()?"50vh":"60vh"};
                    }
                    `},w.popsStyle.mainView);w.Alias.uiLinkAlias.popsElement.querySelectorAll(".netdisk-url-box-all .netdisk-url-box").forEach(e=>{let a=e.querySelector(".netdisk-link").getAttribute("data-netdisk"),s=parseInt(e.querySelector(".netdisk-link").getAttribute("data-netdisk-index")),r=e.querySelector(".netdisk-link").getAttribute("data-sharecode"),o=e.querySelector(".netdisk-link").getAttribute("data-accesscode");y.check(e,a,s,r,o);});},initViewEvent(){w.setRightClickMenu(w.Alias.uiLinkAlias.$shadowRoot,".whitesevPop .netdisk-url a"),this.registerIconGotoPagePosition(w.Alias.uiLinkAlias.$shadowRoot),this.setNetDiskUrlClickEvent(w.Alias.uiLinkAlias.$shadowRoot,".netdisk-url a"),w.setGlobalRightClickMenu(w.Alias.uiLinkAlias.$shadowRoot.querySelector(".pops .pops-alert-title > p"));},createElementAttributeRuleInfo(t){let i={"data-netdisk":t.netDisk,"data-netdisk-index":t.netDiskIndex,"data-sharecode":t.shareCode,"data-accesscode":t.accessCode},n="";return Object.keys(i).forEach(e=>{n+=`${e}="${i[e]}" `;}),n},praseElementAttributeRuleInfo(t){let i={netDiskName:t.getAttribute("data-netdisk"),netDiskIndex:parseInt(t.getAttribute("data-netdisk-index")),shareCode:t.getAttribute("data-sharecode"),accessCode:t.getAttribute("data-accesscode")};return isNaN(i.netDiskIndex)&&(h.warn(["å…ƒç´ ä¸Šçš„netDiskIndexçš„å€¼æ˜¯NaN",t]),i.netDiskIndex=0),i},getViewHTML(t,i,n,e,a,s){return `
        <div class="netdisk-url-box">
            <div class="netdisk-url-div">
                <div class="netdisk-icon">
                    <div class="netdisk-icon-img"
                        style="background: url(${t}) no-repeat;background-size: 100%;"
						${this.createElementAttributeRuleInfo({netDisk:i,netDiskIndex:n,shareCode:e,accessCode:a})}
                    </div>
                </div>
                <div class="netdisk-status">

                </div>
                <div class="netdisk-url">
                    <a  class="netdisk-link"
                        href="javascript:;" 
                        isvisited="false"
						${this.createElementAttributeRuleInfo({netDisk:i,netDiskIndex:n,shareCode:e,accessCode:a})}>${s}</a>
                </div>
            </div>
        </div>`},setNetDiskUrlClickEvent(t,i){function n(e){e.target.setAttribute("isvisited","true");let a=e.target;const{netDiskName:s,netDiskIndex:r,shareCode:o,accessCode:l}=he.praseElementAttributeRuleInfo(a);let c=F.function.linkClickMode(s);if(c==="copy")re.copy(s,r,o,l);else if(c==="openBlank"){let u=Z.getBlankUrl(s,r,o,l);F.schemeUri.isForwardBlankLink(s)?re.openBlankWithScheme(s,r,o,l):re.openBlank(u,s,r,o,l);}else c==="parseFile"?re.parseFile(s,r,o,l):(h.error("æœªçŸ¥ç‚¹å‡»åŠ¨ä½œï¼š"+c),f.error("æœªçŸ¥ç‚¹å‡»åŠ¨ä½œï¼š"+c));}v.on(t,"click",i,n);},registerContextMenu(t,i,n=[],e="whitesevSuspensionContextMenu"){let a=[];n.forEach(r=>{a.push({icon:"",iconIsLoading:!1,text:r.text,callback:r.callback});});let s={target:t,targetSelector:i,data:a,isAnimation:!1,className:e,only:!0};H.rightClickMenu(s);},addLinkView(t,i,n,e,a){if(w.netDiskHistoryMatch.setNetDiskHistoryMatchData(t,i,n,e,a),!w.Alias.uiLinkAlias)return;h.info([t,i,n,e]);let s=w.src.icon[t],r=b.handleLinkShow(t,i,n,e,a),o=this.getViewHTML(s,t,i,n,e,r),l=w.Alias.uiLinkAlias.popsElement.querySelector(".netdisk-url-box-all");v.append(l,o);let c=l.children[l.children.length-1];y.check(c,t,i,n,e);},changeLinkView(t,i,n,e,a){if(w.netDiskHistoryMatch.setNetDiskHistoryMatchData(t,i,n,e,a),!w.Alias.uiLinkAlias)return;let s=b.handleLinkShow(t,i,n,e,a),r=w.Alias.uiLinkAlias.popsElement.querySelector(`.netdisk-url a[data-sharecode='${n}'][data-netdisk-index='${i}']`);h.info("ä¿®æ”¹ç½‘ç›˜é“¾æ¥è§†å›¾"),h.info(r),r.setAttribute("data-accesscode",e),v.html(r,s);},registerIconGotoPagePosition(t){let i,n,e;v.on(t,"click",".whitesevPop .netdisk-icon .netdisk-icon-img",function(a){let r=a.target.getAttribute("data-sharecode");if(g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode"].value){if(typeof r!="string"){f.error("è·å–data-sharecodeå±æ€§å¤±è´¥");return}if(e==null?e=r:e!==r&&(h.info(`ä¸Šä¸€ä¸ªæœç´¢ï¼š${e}ï¼Œåˆ‡æ¢è‡³ï¼š${r}`),i=void 0,n=void 0,e=r),i==null&&(i=d.findElementsWithText(document.documentElement,r),n=i.next()),n!=null&&n.value)if(h.success(["å®šä½å…ƒç´ ",n]),n.value.nodeType===Node.ELEMENT_NODE&&n.value.getClientRects().length){if(n.value.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode-with-select"].value){let o=n.value.innerText||n.value.textContent,l,c,u;if(o.includes(r)){let p=Array.from(n.value.childNodes).filter(m=>m.nodeType===Node.TEXT_NODE);for(const m of p)if(m.textContent.includes(r)){l=m,c=m.textContent.indexOf(r),u=c+r.length;break}}try{d.selectElementText(n.value,l,c,u);}catch(p){h.error(p),d.selectElementText(n.value);}}}else if(n.value.nodeType===Node.TEXT_NODE&&n.value.parentElement.getClientRects().length)if(g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode-with-select"].value){let o=n.value.textContent||n.value.nodeValue,l=n.value,c=o.indexOf(r),u=c+r.length;try{d.selectElementText(n.value,l,c,u);}catch(m){h.error(m),d.selectElementText(n.value.parentElement);}let p=globalThis.getSelection();if(p.rangeCount>0){let k=p.getRangeAt(0).getBoundingClientRect(),x=globalThis.scrollY,A=k.top+x-globalThis.innerHeight/2;globalThis.scrollTo({behavior:"smooth",top:A});}else n.value.parentElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});}else try{let o=new Range;o.selectNodeContents(n.value);let l=o.getBoundingClientRect(),c=globalThis.scrollY,u=l.top+c-globalThis.innerHeight/2;globalThis.scrollTo({behavior:"smooth",top:u});}catch(o){h.error(o),n.value.parentElement.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});}else h.error(["æ— æ³•å®šä½è¯¥å…ƒç´ ä½ç½®",n.value]),f.error(`æ— æ³•å®šä½è¯¥å…ƒç´ ä½ç½®ï¼Œç±»å‹ï¼š<${(n.value.nodeName||n.value.localName||n.value.tagName).toLowerCase()}>`,{html:!1});if(n=i.next(),n.done){if(!g.smallIconNavgiator["pops-netdisk-icon-click-event-loop-find-sharecode"].value){f.info("å·²ç»å®šä½è‡³æœ€åä¸€ä¸ªå…ƒç´ äº†");return}i=void 0,n=void 0;}}});}},Gt={async init(t,i,n){let e=await C.get(`https://webapi.115.com/share/snap?share_code=${i}&offset=0&limit=20&receive_code=&cid=`,{headers:{Accept:"application/json, text/javascript, */*;","User-Agent":d.getRandomPCUA(),Host:"webapi.115.com",Referer:"https://115.com/",Origin:"https://115.com"},allowInterceptConfig:!1,onerror(){},ontimeout(){}});if(!e.status)return d.isNull(e.data.responseText)?y.status.failed:y.status.error;let a=d.toJSON(e.data.responseText);if(a.state)return y.status.success;if(typeof a.error=="string"){if(a.error.includes("è®¿é—®ç "))return y.status.needAccessCode;if(a.error.includes("é“¾æ¥")||a.error.includes("åˆ†äº«å·²å–æ¶ˆ"))return y.status.failed}return y.status.unknown}},Xt={loading:{code:1,msg:"éªŒè¯ä¸­",setView(t,i){y.setViewCheckValid(t,"loading"),t.innerHTML=J.config.iconSVG.loading;}},success:{code:200,msg:"è¯¥é“¾æ¥æœ‰æ•ˆ",setView(t,i){y.setViewCheckValid(t,"success"),t.innerHTML=`
			<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
				<path
				fill="currentColor"
				d="M874.119618 149.859922A510.816461 510.816461 0 0 0 511.997 0.00208a509.910462 509.910462 0 0 0-362.119618 149.857842c-199.817789 199.679789-199.817789 524.581447 0 724.260236a509.969462 509.969462 0 0 0 362.119618 149.857842A508.872463 508.872463 0 0 0 874.119618 874.120158c199.836789-199.679789 199.836789-524.581447 0-724.260236zM814.94268 378.210681L470.999043 744.132295a15.359984 15.359984 0 0 1-5.887994 4.095996c-1.751998 1.180999-2.913997 2.362998-5.276994 2.913997a34.499964 34.499964 0 0 1-13.469986 2.914997 45.547952 45.547952 0 0 1-12.897986-2.303998l-4.095996-2.363997a45.291952 45.291952 0 0 1-7.009992-4.095996l-196.902793-193.789796a34.126964 34.126964 0 0 1-10.555989-25.186973c0-9.37399 3.583996-18.74698 9.98399-25.186974a36.429962 36.429962 0 0 1 50.372947 0l169.98382 167.423824L763.389735 330.220732a37.059961 37.059961 0 0 1 50.371947-1.732998 33.647965 33.647965 0 0 1 11.165988 25.186973 35.544963 35.544963 0 0 1-9.98399 24.575974v-0.04z m0 0"></path>
			</svg>
			`,y.setViewAgainCheckClickEvent(t,i);}},error:{code:-404,msg:"ç½‘ç»œå¼‚å¸¸",setView(t,i){y.setViewCheckValid(t,"error"),t.innerHTML=`
			<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
				<path
				fill="currentColor"
				d="M511.808 692.224c-18.048 0-35.136 3.968-50.432 11.392-25.472 12.416-46.528 33.92-57.792 60.032-5.632 14.144-9.024 29.504-9.024 45.952 0 65.152 52.672 117.824 117.248 117.824 65.28 0 117.952-52.672 117.952-117.824 0-64.64-52.672-117.376-117.952-117.376z m0 178.496c-33.408 0-60.608-27.712-60.608-61.12 0-33.472 27.2-60.672 60.608-60.672s61.248 27.2 61.248 60.672c0 33.472-27.776 61.12-61.248 61.12zM286.784 661.632c3.968 3.392 8.512 5.632 12.992 5.632L438.08 523.328c-60.032 14.72-114.432 49.344-155.328 98.624-9.536 11.84-7.872 30.08 4.032 39.68zM622.912 534.656l-43.008 45.312c45.312 13.056 86.72 40.256 117.376 78.208 5.632 6.784 13.568 10.24 22.08 10.24 6.272 0 12.416-2.24 18.176-6.784 11.904-9.6 13.568-27.84 3.392-39.68-31.808-39.104-72.704-69.12-118.016-87.296zM511.808 391.168c17.024 0 33.408 1.216 49.856 3.456l47.68-49.856c-31.744-6.848-64.064-10.24-97.536-10.24-142.784 0-277.12 63.488-367.232 174.656-10.24 11.904-8.576 30.08 3.904 39.68 5.12 4.48 11.328 6.784 18.176 6.784 7.936 0 15.872-3.968 21.568-10.816 79.872-97.536 197.76-153.664 323.584-153.664zM751.616 400.32l-40.256 41.92c47.04 24.96 89.536 60.032 124.096 102.592 10.24 12.48 27.84 14.208 40.256 3.968 11.968-9.6 13.632-27.84 3.968-39.68-36.16-44.8-79.872-81.088-128.064-108.8zM705.152 244.928l42.56-44.672c-73.664-28.992-153.6-44.224-235.904-44.224-196.672 0-380.864 87.872-505.6 239.744-9.6 12.48-7.872 30.08 3.968 40.256 5.632 3.968 11.904 6.208 18.112 6.208 7.936 0 16.448-3.392 22.144-10.176C163.84 292.608 332.096 212.672 511.808 212.672c66.944 0 132.16 10.752 193.344 32.256zM1017.472 395.776c-40.192-49.92-87.296-92.416-139.456-126.976l-39.68 41.344C889.408 343.04 935.36 383.808 973.888 432c9.6 11.904 27.776 13.568 39.68 3.968 11.84-10.176 14.144-27.712 3.904-40.192zM937.408 104.512c-11.328-10.944-29.312-10.496-40.064 0.832L179.008 854.72c-10.816 11.328-10.496 29.248 0.896 40.064 5.44 5.312 12.48 7.872 19.584 7.872 7.488 0 14.848-2.88 20.416-8.704L938.24 144.576c10.88-11.328 10.496-29.248-0.832-40.064z"></path>
			</svg>
			`,y.setViewAgainCheckClickEvent(t,i);}},failed:{code:0,msg:"è¯¥é“¾æ¥å·²å¤±æ•ˆ",setView(t,i){y.setViewCheckValid(t,"failed"),t.innerHTML=`
			<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
				<path
					fill="currentColor"
					d="M549.044706 512l166.189176-166.249412a26.383059 26.383059 0 0 0 0-36.98447 26.383059 26.383059 0 0 0-37.044706 0L512 475.015529l-166.249412-166.249411a26.383059 26.383059 0 0 0-36.98447 0 26.383059 26.383059 0 0 0 0 37.044706L475.015529 512l-166.249411 166.249412a26.383059 26.383059 0 0 0 0 36.98447 26.383059 26.383059 0 0 0 37.044706 0L512 548.984471l166.249412 166.249411a26.383059 26.383059 0 0 0 36.98447 0 26.383059 26.383059 0 0 0 0-37.044706L548.984471 512zM512 1024a512 512 0 1 1 0-1024 512 512 0 0 1 0 1024z"></path>
			</svg>
			`,y.setViewAgainCheckClickEvent(t,i);}},needAccessCode:{code:201,msg:"è¯¥é“¾æ¥ç¼ºå¤±æå–ç ",setView(t,i){y.setViewCheckValid(t,"needAccessCode"),t.innerHTML=`
			<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">
				<path
				fill="currentColor"
				d="M757.810429 373.751333 325.645708 373.751333l0-83.895759c0-103.694687 81.507362-184.922686 185.559183-184.922686 78.121242 0 146.053424 46.74565 173.062568 119.090329 3.865028 10.352789 15.384385 15.609513 25.742291 11.746532 10.351766-3.866051 15.609513-15.390525 11.744485-25.742291C688.844707 121.877815 606.198405 64.918545 511.204891 64.918545c-61.918211 0-119.246895 23.662933-161.423483 66.63156-41.3692 42.142819-64.151066 98.363262-64.151066 158.305469l0 83.895759-20.007683 0c-60.774155 0-110.042255 49.267077-110.042255 110.042255l0 366.139981c0 60.774155 49.267077 110.042255 110.042255 110.042255l492.187769 0c60.775178 0 110.042255-49.267077 110.042255-110.042255L867.852684 483.793588C867.852684 423.01841 818.585607 373.751333 757.810429 373.751333zM827.837318 849.933569c0 38.674834-31.352055 70.02689-70.02689 70.02689L265.62266 919.960459c-38.674834 0-70.02689-31.352055-70.02689-70.02689L195.59577 483.793588c0-38.674834 31.352055-70.02689 70.02689-70.02689l492.187769 0c38.674834 0 70.02689 31.352055 70.02689 70.02689L827.837318 849.933569z"></path>
				<path
				fill="currentColor"
				d="M509.715981 583.832002c-11.048637 0-20.007683 8.959046-20.007683 20.007683l0 110.042255c0 11.048637 8.958022 20.007683 20.007683 20.007683s20.007683-8.958022 20.007683-20.007683L529.723663 603.839685C529.723663 592.790024 520.765641 583.832002 509.715981 583.832002z"></path>
			</svg>
			`,y.setViewAgainCheckClickEvent(t,i);}},unknown:{code:-200,msg:"æœªçŸ¥æ£€æŸ¥æƒ…å†µ",setView(t,i){y.setViewCheckValid(t,"unknown"),t.innerHTML=`
			<svg viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg">
				<path
				fill="currentColor"
				d="M512.473172 1023.995242A511.814852 511.814852 0 0 1 313.545134 40.351073a512.244696 512.244696 0 0 1 398.855715 943.658633 508.815937 508.815937 0 0 1-199.927677 39.985536z m0-943.658634C274.559237 80.336608 80.629391 274.266455 80.629391 512.18039s193.929846 431.843781 431.843781 431.843781 431.843781-193.929846 431.843781-431.843781S751.386745 80.336608 512.473172 80.336608z"></path>
				<path
				fill="currentColor"
				d="M506.475342 716.10662a39.985535 39.985535 0 0 1-39.985536-39.985535v-76.972156c0-79.971071 64.976495-144.947566 144.947566-144.947565a77.971794 77.971794 0 0 0 0-155.943588H445.4974a56.979388 56.979388 0 0 0-56.979387 56.979388 39.985535 39.985535 0 0 1-79.971071 0c0-74.972879 60.977941-136.950458 136.950458-136.950459h164.940333c86.968539 0 157.942864 70.974325 157.942865 157.942865s-69.974687 157.942864-157.942865 157.942864a64.976495 64.976495 0 0 0-64.976494 64.976495v76.972156a39.985535 39.985535 0 0 1-38.985897 39.985535zM505.475703 742.097218a48.982281 48.982281 0 1 0 48.982281 48.982281 48.982281 48.982281 0 0 0-48.982281-48.982281z"></path>
			</svg>
			`,y.setViewAgainCheckClickEvent(t,i);}}},Qt={baidu:zt,lanzou:Et,lanzouyx:It,tianyiyun:Ft,hecaiyun:Pt,aliyun:Vt,wenshushu:Ot,nainiu:Bt,_123pan:Ht,weiyun:Zt,xunlei:jt,_115pan:Gt,chengtong:qt,kuake:Wt,jianguoyun:Kt,onedrive:Jt,uc:Yt},y={$data:{isSubscribing:!1,subscribe:[]},status:Xt,netDisk:Qt,async check(t,i,n,e,a){if(this.$data.subscribe.push({netDiskViewBox:t,netDiskName:i,netDiskIndex:n,shareCode:e,accessCode:a}),!this.$data.isSubscribing){this.$data.isSubscribing=!0;for(let s=0;s<this.$data.subscribe.length;s++){const r=this.$data.subscribe[s];await this.checkLinkValidity(r,!0),await d.sleep(250),this.$data.subscribe.splice(s,1),s--;}this.$data.isSubscribing=!1;}},async checkLinkValidity(t,i){let n=t.netDiskViewBox.querySelector(".netdisk-status");if(this.isViewCheckValid(n)&&!i)return;let e=t.netDiskName;if(!F.function.checkLinkValidity(e)){h.error(["æœªå¼€å¯checkLinkValidityåŠŸèƒ½",t]);return}let a=this.netDisk[t.netDiskName];if(!a||a&&typeof a.init!="function"){h.error(["æ²¡æœ‰é…ç½®è¯¥ç½‘ç›˜çš„æ ¡éªŒæœ‰æ•ˆæ€§",t]);return}this.status.loading.setView(n,t);let s=await a.init(t.netDiskIndex,t.shareCode,t.accessCode);if(!s){h.error(["è¯¥éªŒè¯å‡½æ•°çš„è¿”å›å€¼ä¸æ˜¯æœ‰æ•ˆå€¼",[s,t]]);return}s.setView(n,t);},setViewAgainCheckClickEvent(t,i){v.on(t,"click",void 0,()=>{const n=t.closest(".netdisk-url-div"),e=n.querySelector(".netdisk-link"),a=he.praseElementAttributeRuleInfo(e);let s={netDiskViewBox:n,netDiskName:a.netDiskName,netDiskIndex:a.netDiskIndex,shareCode:a.shareCode,accessCode:a.accessCode};this.checkLinkValidity(s,!0);},{once:!0});},isViewCheckValid(t){return !(!t.hasAttribute("data-check-valid")||t.getAttribute("data-check-valid")==="error")},setViewCheckValid(t,i){t.setAttribute("data-check-valid",i);},removeViewCheckValid(t){t.removeAttribute("data-check-valid");},isStatusSuccess(t){return Math.floor(t.code/100)===2},getStatusName(t){for(const i of Object.keys(y.status)){let n=this.status[i];if(t.code===n.code)return i}}},en={requiredFileMap:new Map,async file(t,i){if(d.isNull(t))return h.error(["NetDiskRequire.fileçš„å‚æ•°pathä¸ºç©º",t]),!1;if(this.requiredFileMap.has(t))return h.warn(["NetDiskRequire.fileçš„å‚æ•°pathå·²å¼•å…¥è¿‡",t]),!0;let n=await C.get(t,i);if(!n.status)return !1;let e=n.data.responseText,a=this.requiredFileMap.get(t);this.requiredFileMap.set(t,a++),h.info(["åŠ è½½jsæ–‡ä»¶",t]),X.eval(`
		let exports = void 0;
		let module = void 0;
		let define = void 0;
		`+e),await d.sleep(300);}},Ye=t=>({"matchRange-text-before":F.matchRange_text.before(t).toString(),"matchRange-text-after":F.matchRange_text.after(t).toString()}),Ge=t=>({"matchRange-html-before":F.matchRange_html.before(t).toString(),"matchRange-html-after":F.matchRange_html.after(t).toString()}),G={KEY:"userRule",userRuleContextDataKey:"userRuleContextData",$data:{__userRule:null,get userRule(){return this.__userRule==null&&(this.__userRule=new d.Dictionary),this.__userRule}},init(){this.parseRule(this.getAllRule()).forEach(i=>{this.$data.userRule.set(i.setting.key,i);});},parseRuleStrToRule(t){function i(e){return typeof e.link_innerText!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: link_innerTextï¼Œç±»å‹: string"}:typeof e.link_innerHTML!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: link_innerHTMLï¼Œç±»å‹: string"}:typeof e.shareCode!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: shareCodeï¼Œç±»å‹: string"}:typeof e.shareCodeNeedRemoveStr!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: shareCodeNeedRemoveStrï¼Œç±»å‹: string"}:typeof e.uiLinkShow!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: uiLinkShowï¼Œç±»å‹: string"}:typeof e.blank!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: blankï¼Œç±»å‹: string"}:typeof e.copyUrl!="string"?{success:!1,msg:"regexpç¼ºå¤±çš„é”®å: copyUrlï¼Œç±»å‹: string"}:typeof e.accessCode=="string"&&typeof e.checkAccessCode!="string"?{success:!1,msg:"regexpè®¾ç½®äº†accessCodeä½†æ˜¯æ²¡æœ‰è®¾ç½®checkAccessCode"}:typeof e.accessCode!="string"&&typeof e.checkAccessCode=="string"?{success:!1,msg:"regexpè®¾ç½®äº†checkAccessCodeä½†æ˜¯æ²¡æœ‰è®¾ç½®accessCode"}:{success:!0,msg:"æ ¡éªŒruleæˆåŠŸ"}}function n(e){return typeof e.name!="string"?{success:!1,msg:"settingç¼ºå¤±çš„é”®å: nameï¼Œç±»å‹: string"}:typeof e.enable!="boolean"?{success:!1,msg:"settingç¼ºå¤±çš„é”®å: enableï¼Œç±»å‹: boolean"}:{success:!0,msg:"æ ¡éªŒsettingæˆåŠŸ"}}try{let e=JSON.parse(t);if(typeof e!="object")return {success:!1,msg:"è¯¥è§„åˆ™ä¸æ˜¯objectç±»å‹"};if(typeof e.key!="string")return {success:!1,msg:"ç¼ºå¤±çš„é”®å: keyï¼Œç±»å‹: string"};if(typeof e.regexp!="object")return {success:!1,msg:"ç¼ºå¤±çš„é”®å: regexpï¼Œç±»å‹: object|Arrany"};if(typeof e.setting!="object")return {success:!1,msg:"ç¼ºå¤±çš„é”®å: settingï¼Œç±»å‹: object"};if(Array.isArray(e.regexp))for(const s of e.regexp){let r=i(s);if(!r.success)return r}else {let s=i(e.regexp);if(!s.success)return s}let a=n(e.setting);return a.success?{success:!0,msg:"è§£ææˆåŠŸ",data:e}:a}catch(e){return h.error(e),{success:!1,msg:e.message}}},getBindContext(t){let i=new We(G.userRuleContextDataKey);return {rule:t,NetDiskRequire:en,CryptoJS:zn,httpx:C,utils:d,DOMUtils:v,window,unsafeWindow:X,NetDiskCheckLinkValidity:y,log:h,Qmsg:f,pops:J,setValue:i.set.bind(i),getValue:i.get.bind(i),deleteValue:i.delete.bind(i)}},parseRule(t){function i(e,a,s){const{shareCode:r,shareCodeNeedRemoveStr:o,shareCodeNotMatch:l,checkAccessCode:c,accessCode:u,acceesCodeNotMatch:p,paramMatch:m,...k}=s;let x={...k};return x.link_innerText=V.replaceParam(x.link_innerText,Ye(e)),x.link_innerHTML=V.replaceParam(x.link_innerText,Ge(e)),typeof r=="string"&&(x.shareCode=new RegExp(r,"ig")),typeof o=="string"&&(x.shareCodeNeedRemoveStr=new RegExp(o,"ig")),typeof l=="string"&&(x.shareCodeNotMatch=new RegExp(l,"ig")),typeof c=="string"&&(x.checkAccessCode=new RegExp(c,"ig")),typeof u=="string"&&(x.accessCode=new RegExp(u,"ig")),typeof p=="string"&&(x.acceesCodeNotMatch=new RegExp(p,"ig")),typeof m=="string"&&(x.paramMatch=new RegExp(m,"i")),x}let n=[];for(const e of t){let a={rule:[],setting:{name:e.setting.name,key:e.key,configurationInterface:{matchRange_text:{},matchRange_html:{},function:{},linkClickMode_openBlank:{},schemeUri:{},ownFormList:[]}},isUserRule:!0};const s=e.regexp,r=e.key;if(Array.isArray(s)?s.forEach(c=>{a.rule.push(i(r,e,c));}):a.rule.push(i(r,e,s)),e.setting&&(this.initDefaultValue(L.function.enable(r),!!e.setting.enable),a.setting.configurationInterface.function.enable=!!e.setting.enable,typeof e.setting.isBlank=="boolean"&&(this.initDefaultValue(L.function.linkClickMode(r),"openBlank"),a.setting.configurationInterface.function.linkClickMode="openBlank"),typeof e.setting.linkClickMode=="string"&&Z.isAllowMode(e.setting.linkClickMode)&&(this.initDefaultValue(L.function.linkClickMode(r),e.setting.linkClickMode),a.setting.configurationInterface.function.linkClickMode="openBlank"),typeof e.setting.linkClickMode_extend=="object"&&Array.isArray(e.setting.linkClickMode_extend)&&e.setting.linkClickMode_extend.forEach(c=>{Z.isAllowExtendMode(c)&&(a.setting.configurationInterface.function.linkClickMode_extend==null&&(a.setting.configurationInterface.function.linkClickMode_extend=[]),a.setting.configurationInterface.function.linkClickMode_extend.push(c));}),typeof e.setting.openBlankWithCopyAccessCode=="boolean"&&(this.initDefaultValue(L.linkClickMode_openBlank.openBlankWithCopyAccessCode(r),!!e.setting.openBlankWithCopyAccessCode),a.setting.configurationInterface.linkClickMode_openBlank.openBlankWithCopyAccessCode=!!e.setting.openBlankWithCopyAccessCode),typeof e.setting.checkLinkValidity=="boolean"&&(this.initDefaultValue(L.function.checkLinkValidity(r),!!e.setting.checkLinkValidity),a.setting.configurationInterface.function.checkLinkValidity=!!e.setting.checkLinkValidity),typeof e.setting.isForward=="boolean"&&(this.initDefaultValue(L.schemeUri.enable(r),!!e.setting.isForward),a.setting.configurationInterface.schemeUri.enable=!!e.setting.isForward),typeof e.setting.schemeUri=="string"&&(this.initDefaultValue(L.schemeUri.uri(r),e.setting.schemeUri),a.setting.configurationInterface.schemeUri.uri=e.setting.schemeUri),typeof e.setting.innerTextAccessCodeBeforeMaxRange=="number"&&(this.initDefaultValue(L.matchRange_text.before(r),e.setting.innerTextAccessCodeBeforeMaxRange),a.setting.configurationInterface.matchRange_text.before=e.setting.innerTextAccessCodeBeforeMaxRange),typeof e.setting.innerTextAccessCodeAfterMaxRange=="number"&&(this.initDefaultValue(L.matchRange_text.after(r),e.setting.innerTextAccessCodeAfterMaxRange),a.setting.configurationInterface.matchRange_text.after=e.setting.innerTextAccessCodeAfterMaxRange),typeof e.setting.innerHTMLAccessCodeBeforeMaxRange=="number"&&(this.initDefaultValue(L.matchRange_html.before(r),e.setting.innerHTMLAccessCodeBeforeMaxRange),a.setting.configurationInterface.matchRange_html.before=e.setting.innerHTMLAccessCodeBeforeMaxRange),typeof e.setting.innerHTMLAccessCodeAfterMaxRange=="number"&&(this.initDefaultValue(L.matchRange_html.after(r),e.setting.innerHTMLAccessCodeAfterMaxRange),a.setting.configurationInterface.matchRange_html.after=e.setting.innerHTMLAccessCodeAfterMaxRange)),typeof e.icon=="string"){let c=e.icon;w.src.addIcon(r,c);}const o=Object.getPrototypeOf(async function(){}).constructor;if(typeof e.checkLinkValidityFunction=="string")try{Reflect.set(y.netDisk,r,{init:new o("netDiskIndex","shareCode","accessCode",e.checkLinkValidityFunction).bind(this.getBindContext(e))});}catch(c){h.error(c);}if(typeof e.AuthorizationFunction=="string")try{Ee.netDisk[r]=new o(e.AuthorizationFunction).bind(this.getBindContext(e));}catch(c){h.error(c);}if(typeof e.AutoFillAccessCodeFunction=="string")try{xe.netDisk[r]=new o("netDiskInfo",e.AutoFillAccessCodeFunction).bind(this.getBindContext(e));}catch(c){h.error(c);}if(typeof e.parseFunction=="string")try{Reflect.set(Me.netDisk,r,new Function(e.parseFunction).bind(this.getBindContext(e)));}catch(c){h.error(c);}let l=n.find(c=>c.setting.key===a.setting.key);l?l.rule=l.rule.concat(a.rule):n.push(a);}return n},getNetDiskRuleConfig(){return this.$data.userRule.values()},initDefaultValue(t,i){O(t)==null&&$(t,i);},getTemplateRule(){let t={key:"è§„åˆ™å",icon:"å›¾æ ‡é“¾æ¥å­—ç¬¦ä¸²æˆ–å›¾ç‰‡çš„base64å­—ç¬¦ä¸²",regexp:[{link_innerText:"",link_innerHTML:"",shareCode:"",shareCodeNeedRemoveStr:"",uiLinkShow:"",blank:"",copyUrl:""}],setting:{name:"è®¾ç½®ç•Œé¢çš„åå­—",enable:!0,linkClickMode:"openBlank",openBlankWithCopyAccessCode:!0}};return this.getFormatRule(t)},addRule(t){let i=this.getAllRule();i.push(t),$(G.KEY,i);},setRule(t,i){if(Array.isArray(i))$(G.KEY,i);else {let n=this.getAllRule(),e=n.findIndex(a=>a.key===t);if(e!==-1)n[e]=null,n[e]=i;else return h.error(["è¦†ç›–è§„åˆ™å¤±è´¥",i]),f.error("è¦†ç›–è§„åˆ™å¤±è´¥"),!1;this.setRule(t,n);}},deleteRule(t){let i=this.getAllRule(),n=i.findIndex(e=>e.key===t);return n!==-1?(i.splice(n,1),this.setRule(t,i),!0):!1},clearRule(){qe(G.KEY);},getAllRule(){return O(G.KEY,[])},getRule(t){return O(G.KEY,[]).find(n=>n.key===t)},getFormatRule(t){return JSON.stringify(t||this.getAllRule(),void 0,4)}},tn={rule:[{link_innerText:"pan.baidu.com/s/[0-9a-zA-Z-_]{6,24}([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç |\\?pwd=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"pan.baidu.com/s/[0-9a-zA-Z-_]{6,24}([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç |\\?pwd=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/pan\.baidu\.com\/s\/([0-9a-zA-Z-_]+)/gi,shareCodeNeedRemoveStr:/pan\.baidu\.com\/s\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç |pwd=)[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"pan.baidu.com/s/{#shareCode#}?pwd={#accessCode#}",blank:"https://pan.baidu.com/s/{#shareCode#}?pwd={#accessCode#}",copyUrl:"https://pan.baidu.com/s/{#shareCode#}?pwd={#accessCode#}"},{link_innerText:"pan.baidu.com/(share|wap)/init\\?surl=[0-9a-zA-Z-_]{5,24}([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç |&pwd=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"pan.baidu.com/(share|wap)/init\\?surl=[0-9a-zA-Z-_]{5,24}([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç |&pwd=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/pan\.baidu\.com\/(share|wap)\/init\?surl=([0-9a-zA-Z-_]+)/gi,shareCodeNeedRemoveStr:/pan\.baidu\.com\/(share|wap)\/init\?surl=/gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç |&pwd=)[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"pan.baidu.com/share/init?surl={#shareCode#}&pwd={#accessCode#}",blank:"https://pan.baidu.com/share/init?surl={#shareCode#}&pwd={#accessCode#}",copyUrl:"https://pan.baidu.com/share/init?surl={#shareCode#}&pwd={#accessCode#}"}],setting:{name:"ç™¾åº¦ç½‘ç›˜",key:"baidu",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},de="GM_Panel",Xe="data-init",oe="data-key",fe="data-default-value",nn="data-init-more-value",W="data-storage-api",be=function(t,i,n,e,a,s="",r,o){let l={text:t,type:"input",isNumber:!!r,isPassword:!!o,props:{},attributes:{},description:e,getValue(){return this.props[W].get(i,n)},callback(c,u){this.props[W].set(i,u);},placeholder:s};return Reflect.set(l.attributes,oe,i),Reflect.set(l.attributes,fe,n),Reflect.set(l.props,W,{get(c,u){return O(c,u)},set(c,u){$(c,u);}}),l},an=()=>({rule:[{link_innerText:"(lanzou[a-z]{0,1}|lan[a-z]{2}).com/(tp/|u/|)([a-zA-Z0-9_-]{5,22}|[%0-9a-zA-Z]{4,90}|[\\u4e00-\\u9fa5]{1,20})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[a-zA-Z0-9]{3,6}|)",link_innerHTML:"(lanzou[a-z]{0,1}|lan[a-z]{2}).com/(tp/|u/|)([a-zA-Z0-9_-]{5,22}|[%0-9a-zA-Z]{4,90}|[\\u4e00-\\u9fa5]{1,20})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[a-zA-Z0-9]{3,6}|)",shareCode:/(lanzou[a-z]{0,1}|lan[a-z]{2}).com\/(tp\/|u\/|)([a-zA-Z0-9_\-]{5,22}|[%0-9a-zA-Z]{4,90}|[\u4e00-\u9fa5]{1,20})/gi,shareCodeNeedRemoveStr:/(lanzou[a-z]{0,1}|lan[a-z]{2}).com\/(tp\/|u\/|)/gi,shareCodeExcludeRegular:["lanzouyx"],checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{3,})/gi,uiLinkShow:`${ee.hostname}/{#shareCode#} æå–ç : {#accessCode#}`,blank:`https://${ee.hostname}/{#shareCode#}`,copyUrl:`https://${ee.hostname}/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"(lanzou[a-z]{0,1}|lan[a-z]{2}).com/s/([a-zA-Z0-9_-]{5,22}|[%0-9a-zA-Z]{4,90}|[\\u4e00-\\u9fa5]{1,20})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[a-zA-Z0-9]{3,6}|)",link_innerHTML:"(lanzou[a-z]{0,1}|lan[a-z]{2}).com/s/([a-zA-Z0-9_-]{5,22}|[%0-9a-zA-Z]{4,90}|[\\u4e00-\\u9fa5]{1,20})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[a-zA-Z0-9]{3,6}|)",shareCode:/(lanzou[a-z]{0,1}|lan[a-z]{2}).com\/s\/([a-zA-Z0-9_\-]{5,22}|[%0-9a-zA-Z]{4,90}|[\u4e00-\u9fa5]{1,20})/gi,shareCodeNeedRemoveStr:/(lanzou[a-z]{0,1}|lan[a-z]{2}).com\/s\//gi,shareCodeExcludeRegular:["lanzouyx"],checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{3,})/gi,uiLinkShow:`${ee.hostname}/s/{#shareCode#} æå–ç : {#accessCode#}`,blank:`https://${ee.hostname}/s/{#shareCode#}`,copyUrl:`https://${ee.hostname}/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"è“å¥äº‘",key:"lanzou",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!1,isForwardBlankLink:!1,uri:""},ownFormList:[{text:"å…¶å®ƒé…ç½®",type:"forms",forms:[be("è“å¥äº‘åŸŸå",ee.MENU_KEY,ee.DEFAULT_HOST_NAME,"",void 0,`ä¾‹å¦‚ï¼š${ee.DEFAULT_HOST_NAME}`)]}]}}}),sn={rule:[{link_innerText:"ilanzou.com/s/([a-zA-Z0-9_-]{5,22})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç |\\?code=)[\\s\\S]{0,{#matchRange-text-after#}}[a-zA-Z0-9]{3,6}|)",link_innerHTML:"ilanzou.com/s/([a-zA-Z0-9_-]{5,22})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç |\\?code=)[\\s\\S]{0,{#matchRange-html-after#}}[a-zA-Z0-9]{3,6}|)",shareCode:/ilanzou.com\/s\/([a-zA-Z0-9_\-]{5,22})/gi,shareCodeNeedRemoveStr:/ilanzou.com\/s\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç |\?code=)[\s\S]+/g,accessCode:/([0-9a-zA-Z]{3,})/gi,uiLinkShow:"www.ilanzou.com/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.ilanzou.com/s/{#shareCode#}?code={#accessCode#}",copyUrl:"https://www.ilanzou.com/s/{#shareCode#}?code={#accessCode#}"}],setting:{name:"è“å¥äº‘ä¼˜äº«",key:"lanzouyx",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!1,isForwardBlankLink:!1,uri:""}}}},rn={rule:[{link_innerText:"(cloud.189.cn/web/share\\?code=([0-9a-zA-Z_-]){8,14}|cloud.189.cn/t/([a-zA-Z0-9_-]{8,14}))([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"(cloud.189.cn/web/share\\?code=([0-9a-zA-Z_-]){8,14}|cloud.189.cn/t/([a-zA-Z0-9_-]{8,14}))([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/cloud.189.cn\/web\/share\?code=([0-9a-zA-Z_\-]){8,14}|cloud.189.cn\/t\/([a-zA-Z0-9_\-]{8,14})/gi,shareCodeNeedRemoveStr:/cloud\.189\.cn\/t\/|cloud.189.cn\/web\/share\?code=/gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"cloud.189.cn/t/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://cloud.189.cn/t/{#shareCode#}",copyUrl:`https://cloud.189.cn/t/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"å¤©ç¿¼äº‘",key:"tianyiyun",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!1,isForwardBlankLink:!1,uri:""}}}},on={rule:[{link_innerText:"caiyun.139.com/m/i\\?([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"caiyun.139.com/m/i\\?([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/caiyun\.139\.com\/m\/i\?([a-zA-Z0-9_\-]{8,14})/gi,shareCodeNeedRemoveStr:/caiyun\.139\.com\/m\/i\?/gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"caiyun.139.com/m/i?{#shareCode#} æå–ç : {#accessCode#}",blank:"https://caiyun.139.com/m/i?{#shareCode#}",copyUrl:`https://caiyun.139.com/m/i?{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"yun.139.com/link/w/i/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"yun.139.com/link/w/i/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/yun\.139\.com\/link\/w\/i\/([a-zA-Z0-9_\-]{8,14})/gi,shareCodeNeedRemoveStr:/yun\.139\.com\/link\/w\/i\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"yun.139.com/link/w/i/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://yun.139.com/link/w/i/{#shareCode#}",copyUrl:`https://yun.139.com/link/w/i/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"ä¸­å›½ç§»åŠ¨äº‘ç›˜",key:"hecaiyun",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!1,uri:""}}}},ln={rule:[{link_innerText:"aliyundrive.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"aliyundrive.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/aliyundrive\.com\/s\/([a-zA-Z0-9_\-]{8,14})/g,shareCodeNeedRemoveStr:/aliyundrive\.com\/s\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"aliyundrive.com/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.aliyundrive.com/s/{#shareCode#}",copyUrl:`https://www.aliyundrive.com/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"aliyundrive.com/t/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"aliyundrive.com/t/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/aliyundrive\.com\/t\/([a-zA-Z0-9_\-]{8,14})/g,shareCodeNeedRemoveStr:/aliyundrive\.com\/t\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"aliyundrive.com/t/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.aliyundrive.com/t/{#shareCode#}",copyUrl:`https://www.aliyundrive.com/t/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"alipan.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"alipan.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/alipan\.com\/s\/([a-zA-Z0-9_\-]{8,14})/g,shareCodeNeedRemoveStr:/alipan\.com\/s\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"alipan.com/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.alipan.com/s/{#shareCode#}",copyUrl:`https://www.alipan.com/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"é˜¿é‡Œäº‘",key:"aliyun",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!0,isForwardBlankLink:!0,uri:""}}}},cn={rule:[{link_innerText:"(wenshushu.cn/f/([a-zA-Z0-9_-]{8,14})|wenshushu.cn/k/([a-zA-Z0-9_-]{8,14}))([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"(wenshushu.cn/f/([a-zA-Z0-9_-]{8,14})|wenshushu.cn/k/([a-zA-Z0-9_-]{8,14}))([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/wenshushu.cn\/f\/([a-zA-Z0-9_-]{8,14})|wenshushu.cn\/k\/([a-zA-Z0-9_-]{8,14})/gi,shareCodeNeedRemoveStr:/wenshushu.cn\/f\/|wenshushu.cn\/k\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/[0-9a-zA-Z]{4}/gi,uiLinkShow:"www.wenshushu.cn/f/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.wenshushu.cn/f/{#shareCode#}",copyUrl:`https://www.wenshushu.cn/f/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"(wss.ink/f/([a-zA-Z0-9_-]{8,14})|ws28.cn/f/([a-zA-Z0-9_-]{8,14})|wss1.cn/f/([a-zA-Z0-9_-]{8,14})|ws59.cn/f/([a-zA-Z0-9_-]{8,14}))([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"(wss.ink/f/([a-zA-Z0-9_-]{8,14})|ws28.cn/f/([a-zA-Z0-9_-]{8,14})|wss1.cn/f/([a-zA-Z0-9_-]{8,14})|ws59.cn/f/([a-zA-Z0-9_-]{8,14}))([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/wss.ink\/f\/([a-zA-Z0-9_-]{8,14})|ws28.cn\/f\/([a-zA-Z0-9_-]{8,14})|wss1.cn\/f\/([a-zA-Z0-9_-]{8,14})|ws59.cn\/f\/([a-zA-Z0-9_-]{8,14})/gi,shareCodeNeedRemoveStr:/wss.ink\/f\/|ws28.cn\/f\/|wss1.cn\/f\/|ws59.cn\/f\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/[0-9a-zA-Z]{4}/gi,uiLinkShow:"www.wenshushu.cn/f/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.wenshushu.cn/f/{#shareCode#}",copyUrl:`https://www.wenshushu.cn/f/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"æ–‡å”å”",key:"wenshushu",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!0,isForwardBlankLink:!0,uri:""}}}},dn={rule:[{link_innerText:"cowtransfer.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-text-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"cowtransfer.com/s/([a-zA-Z0-9_-]{8,14})([\\s\\S]{0,{#matchRange-html-before#}}(å¯†ç |è®¿é—®ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/cowtransfer.com\/s\/([a-zA-Z0-9_\-]{8,14})/gi,shareCodeNeedRemoveStr:/cowtransfer\.com\/s\//gi,checkAccessCode:/(å¯†ç |è®¿é—®ç |æå–ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4,6})/gi,uiLinkShow:"cowtransfer.com/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://cowtransfer.com/s/{#shareCode#}",copyUrl:`https://cowtransfer.com/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"å¥¶ç‰›",key:"nainiu",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!0,isForwardBlankLink:!0,uri:""}}}},un={rule:[{link_innerText:"weiyun.com/[0-9a-zA-Z-_]{7,24}([\\s\\S]{0,{#matchRange-text-before#}(è®¿é—®ç |å¯†ç |æå–ç )[\\s\\S]{0,{#matchRange-text-after#}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"weiyun.com/[0-9a-zA-Z-_]{7,24}([\\s\\S]{0,{#matchRange-html-before#}(è®¿é—®ç |å¯†ç |æå–ç )[\\s\\S]{0,{#matchRange-html-after#}[0-9a-zA-Z]{4,6}|)",shareCode:/weiyun.com\/([0-9a-zA-Z\-_]{7,24})/gi,shareCodeNeedRemoveStr:/weiyun.com\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4,6})/gi,uiLinkShow:"share.weiyun.com/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://share.weiyun.com/{#shareCode#}",copyUrl:`https://share.weiyun.com/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"å¾®äº‘",key:"weiyun",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},hn={rule:[{link_innerText:"xunlei.com/s/[0-9a-zA-Z-_]{8,30}([\\s\\S]{0,{#matchRange-text-before#}}(\\?pwd=|è®¿é—®ç |æå–ç |å¯†ç |)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"xunlei.com/s/[0-9a-zA-Z-_]{8,30}([\\s\\S]{0,{#matchRange-html-before#}}(\\?pwd=|è®¿é—®ç |æå–ç |å¯†ç |)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/xunlei.com\/s\/([0-9a-zA-Z\-_]{8,30})/gi,shareCodeNeedRemoveStr:/xunlei.com\/s\//gi,checkAccessCode:/(\?pwd=|æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/g,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"pan.xunlei.com/s/{#shareCode#}?pwd={#accessCode#} æå–ç : {#accessCode#}",blank:"https://pan.xunlei.com/s/{#shareCode#}?pwd={#accessCode#}",copyUrl:"https://pan.xunlei.com/s/{#shareCode#}?pwd={#accessCode#}"}],setting:{name:"è¿…é›·äº‘ç›˜",key:"xunlei",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},pn={rule:[{link_innerText:"(pan.jc-box.com|download.jamcz.com)/d/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"(pan.jc-box.com|download.jamcz.com)/d/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/(pan.jc-box.com|download.jamcz.com)\/d\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/(pan.jc-box.com|download.jamcz.com)\/d\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,6})/gi,paramMatch:/([a-zA-Z0-9\.]+)\/d\//i,uiLinkShow:"{#$1#}/d/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://{#$1#}/d/{#shareCode#}",copyUrl:`https://{#$1#}/d/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"ct.ghpym.com/d/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"ct.ghpym.com/d/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/ct.ghpym.com\/d\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/ct.ghpym.com\/d\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,6})/gi,paramMatch:/([a-zA-Z0-9\.]+)\/d\//i,uiLinkShow:"{#$1#}/d/{#shareCode#} æå–ç : {#accessCode#}",blank:"http://{#$1#}/d/{#shareCode#}",copyUrl:`http://{#$1#}/d/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"ctfile.com/d/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"ctfile.com/d/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/ctfile.com\/d\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/ctfile.com\/d\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,6})/gi,uiLinkShow:"url95.ctfile.com/d/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://url95.ctfile.com/d/{#shareCode#}",copyUrl:`https://url95.ctfile.com/d/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"(2k.us|u062.com|545c.com|t00y.com)/file/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"(2k.us|u062.com|545c.com|t00y.com)/file/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/(2k.us|u062.com|545c.com|t00y.com)\/file\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/(2k.us|u062.com|545c.com|t00y.com)\/file\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,6})/gi,uiLinkShow:"u062.com/file/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://u062.com/file/{#shareCode#}",copyUrl:`https://u062.com/file/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"(pan.jc-box.com|545c.com|down.jc-box.com|download.cx05.cc)/f/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"(pan.jc-box.com|545c.com|down.jc-box.com|download.cx05.cc)/f/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/(pan.jc-box.com|545c.com|down.jc-box.com|download.cx05.cc)\/f\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/(pan.jc-box.com|545c.com|down.jc-box.com|download.cx05.cc)\/f\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,6})/gi,paramMatch:/([0-9a-zA-Z\.+])\/f\//i,uiLinkShow:"{#$1#}/f/{#shareCode#} æå–ç : {#accessCode#}",blank:"http://{#$1#}/f/{#shareCode#}",copyUrl:`http://{#$1#}/f/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"(ctfile.com|089u.com)/f/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"(ctfile.com|089u.com)/f/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4,6}|)",shareCode:/(ctfile.com|089u.com)\/f\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/(ctfile.com|089u.com)\/f\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,6})/gi,uiLinkShow:"url95.ctfile.com/f/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://url95.ctfile.com/f/{#shareCode#}",copyUrl:`https://url95.ctfile.com/f/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`},{link_innerText:"(089u.com|474b.com)/dir/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4,6}|)",link_innerHTML:"(089u.com|474b.com)/dir/[0-9a-zA-Z-_]{8,26}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{6}|)",shareCode:/(089u.com|474b.com)\/dir\/([0-9a-zA-Z\-_]{8,26})/gi,shareCodeNeedRemoveStr:/(089u.com|474b.com)\/dir\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{6})/gi,uiLinkShow:"089u.com/dir/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://089u.com/dir/{#shareCode#}",copyUrl:`https://089u.com/dir/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"åŸé€šç½‘ç›˜",key:"chengtong",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},fn={rule:[{link_innerText:"quark.cn/s/[0-9a-zA-Z-_]{8,24}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"quark.cn/s/[0-9a-zA-Z-_]{8,24}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/quark.cn\/s\/([0-9a-zA-Z\-_]{8,24})/gi,shareCodeNeedRemoveStr:/quark.cn\/s\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"quark.cn/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://pan.quark.cn/s/{#shareCode#}",copyUrl:`https://pan.quark.cn/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"å¤¸å…‹ç½‘ç›˜",key:"kuake",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},mn={rule:[{link_innerText:"magnet:\\?xt=urn:btih:[0-9a-fA-F]{32,40}",link_innerHTML:"magnet:\\?xt=urn:btih:[0-9a-fA-F]{32,40}",shareCode:/magnet:\?xt=urn:btih:([0-9a-fA-F]{32,40})/gi,shareCodeNeedRemoveStr:/magnet:\?xt=urn:btih:/gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4})/gi,uiLinkShow:"magnet:?xt=urn:btih:{#shareCode#}",blank:"magnet:?xt=urn:btih:{#shareCode#}",copyUrl:"magnet:?xt=urn:btih:{#shareCode#}"}],setting:{name:"BTç£åŠ›",key:"magnet",configurationInterface:{function:{enable:!0,linkClickMode:"openBlank"},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},gn={rule:[{link_innerText:"jianguoyun.com/p/[0-9a-zA-Z-_]{16,24}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]+|)",link_innerHTML:"jianguoyun.com/p/[0-9a-zA-Z-_]{16,24}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]+|)",shareCode:/jianguoyun.com\/p\/([0-9a-zA-Z\-_]{16,24})/gi,shareCodeNeedRemoveStr:/jianguoyun.com\/p\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{3,6})/gi,uiLinkShow:"jianguoyun.com/p/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://www.jianguoyun.com/p/{#shareCode#}",copyUrl:`https://www.jianguoyun.com/p/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"åšæœäº‘",key:"jianguoyun",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!1,isForwardBlankLink:!1,uri:""}}}},wn={rule:[{link_innerText:"[0-9a-zA-Z-_]+.sharepoint.com/[0-9a-zA-Z-_:]+/[0-9a-zA-Z-_:]+/personal/[0-9a-zA-Z-_]+/[0-9a-zA-Z-_]+([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=\\?e=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]+|)",link_innerHTML:"[0-9a-zA-Z-_]+.sharepoint.com/[0-9a-zA-Z-_:]+/[0-9a-zA-Z-_:]+/personal/[0-9a-zA-Z-_]+/[0-9a-zA-Z-_]+([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=\\?e=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]+|)",shareCode:/[0-9a-zA-Z-_]+\/[0-9a-zA-Z-_:]+\/[0-9a-zA-Z-_:]+\/personal\/[0-9a-zA-Z-_]+\/([0-9a-zA-Z\-_]+)/gi,shareCodeNeedRemoveStr:/[0-9a-zA-Z-_]+\/[0-9a-zA-Z-_:]+\/[0-9a-zA-Z-_:]+\/personal\/[0-9a-zA-Z-_]+\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç |\?password=|\?e=)[\s\S]+/gi,accessCode:/([0-9a-zA-Z]{4,8})/gi,paramMatch:/([0-9a-zA-Z-_]+).sharepoint.com\/([0-9a-zA-Z-_:]+)\/([0-9a-zA-Z-_:]+)\/personal\/([0-9a-zA-Z-_]+)\/([0-9a-zA-Z-_]+)/i,uiLinkShow:"{#$1#}.sharepoint.com/{#$2#}/{#$3#}/personal/{#$4#}/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://{#$1#}.sharepoint.com/{#$2#}/{#$3#}/personal/{#$4#}/{#shareCode#}?e={#accessCode#}",copyUrl:`https://{#$1#}.sharepoint.com/{#$2#}/{#$3#}/personal/{#$4#}/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"OneDrive",key:"onedrive",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!1,uri:""}}}},kn={rule:[{link_innerText:"(drive|fast).uc.cn/s/[0-9a-zA-Z]{8,24}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]+|)",link_innerHTML:"(drive|fast).uc.cn/s/[0-9a-zA-Z]{8,24}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]+|)",shareCode:/(drive|fast).uc.cn\/s\/([0-9a-zA-Z]{8,24})/gi,shareCodeNeedRemoveStr:/(drive|fast).uc.cn\/s\//gi,checkAccessCode:/(æå–ç |å¯†ç |è®¿é—®ç )[\s\S]+/gi,accessCode:/([0-9a-zA-Z]+)/gi,uiLinkShow:"drive.uc.cn/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://drive.uc.cn/s/{#shareCode#}",copyUrl:`https://drive.uc.cn/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"UCç½‘ç›˜",key:"uc",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",linkClickMode_extend:["parseFile"],checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardLinearChain:!1,isForwardBlankLink:!1,uri:""}}}},te=function(t,i,n,e,a,s,r,o,l){let c={text:t,type:"slider",description:o,attributes:{},props:{},getValue(){return this.props[W].get(i,n)},getToolTipContent(u){return typeof r=="function"?r(u):`${u}`},callback(u,p){typeof s=="function"&&s(u,p)||this.props[W].set(i,p);},min:e,max:a,step:l};return Reflect.set(c.attributes,oe,i),Reflect.set(c.attributes,fe,n),Reflect.set(c.props,W,{get(u,p){return O(u,p)},set(u,p){$(u,p);}}),c},U=function(t,i,n,e,a,s){let r={text:t,type:"switch",description:a,attributes:{},props:{},getValue(){return !!this.props[W].get(i,n)},callback(o,l){let c=!!l;h.success(`${c?"å¼€å¯":"å…³é—­"} ${t}`),!(typeof e=="function"&&e(o,c))&&this.props[W].set(i,c);},afterAddToUListCallBack:s};return Reflect.set(r.attributes,oe,i),Reflect.set(r.attributes,fe,n),Reflect.set(r.props,W,{get(o,l){return O(o,l)},set(o,l){$(o,l);}}),r},le=function(t,i,n,e,a,s){let r=[];typeof e=="function"?r=e():r=e;let o={text:t,type:"select",description:s,attributes:{},props:{},getValue(){return this.props[W].get(i,n)},callback(l,c,u){let p=c;h.info(`é€‰æ‹©ï¼š${u}`),this.props[W].set(i,p);},data:r};return Reflect.set(o.attributes,oe,i),Reflect.set(o.attributes,fe,n),Reflect.set(o.props,W,{get(l,c){return O(l,c)},set(l,c){$(l,c);}}),o},yn={rule:[{link_innerText:"115.com/s/[0-9a-zA-Z-_]{8,24}([\\s\\S]{0,{#matchRange-text-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-text-after#}}[0-9a-zA-Z]{4}|)",link_innerHTML:"115.com/s/[0-9a-zA-Z-_]{8,24}([\\s\\S]{0,{#matchRange-html-before#}}(è®¿é—®ç |å¯†ç |æå–ç |\\?password=)[\\s\\S]{0,{#matchRange-html-after#}}[0-9a-zA-Z]{4}|)",shareCode:/115.com\/s\/([0-9a-zA-Z\-_]{8,24})/gi,shareCodeNeedRemoveStr:/115.com\/s\//gi,checkAccessCode:/(æå–ç |å¯†ç |\?password=|è®¿é—®ç )[\s\S]+/gi,accessCode:/(\?password=|)([0-9a-zA-Z]{4})/i,uiLinkShow:"115.com/s/{#shareCode#} æå–ç : {#accessCode#}",blank:"https://115.com/s/{#shareCode#}",copyUrl:`https://115.com/s/{#shareCode#}
å¯†ç ï¼š{#accessCode#}`}],setting:{name:"115ç½‘ç›˜",key:"_115pan",configurationInterface:{matchRange_text:{before:20,after:10},matchRange_html:{before:100,after:15},function:{enable:!0,linkClickMode:"openBlank",checkLinkValidity:!0},linkClickMode_openBlank:{openBlankWithCopyAccessCode:!0},schemeUri:{enable:!1,isForwardBlankLink:!0,uri:""}}}},Le={dataKey:"ruleData",$data:{ruleContent:[]},init(){this.initRule();},initRule(){let t=[tn,an(),sn,rn,on,ln,cn,dn,Ke,un,hn,yn,pn,fn,mn,gn,wn,kn],i=G.getNetDiskRuleConfig();[...t,...i].forEach(n=>{if(typeof n.setting.key!="string")throw new TypeError("è§„åˆ™æœªè®¾ç½®key");if(n.rule==null)throw new TypeError("è§„åˆ™æœªè®¾ç½®rule");const e=n.setting.key,a=n.setting.name,s=n.rule;if(Reflect.has(b.matchRule,e)){let c=b.matchRule[e];n.isUserRule?c=[...s,...c]:c=[...c,...s];let u=b.rule.find(p=>p.setting.key===e);u.rule=c;}else Reflect.set(b.matchRule,e,n.rule),b.rule.push(n);Reflect.set(b.ruleSetting,e,n.setting),n.rule=this.parseRuleMatchRule(n);let r=this.parseRuleSetting(n),o=n.setting.name;w.src.hasIcon(e)&&(J.isPhone()?o=`
					<div style="
						width: 20px;
						height: 20px;
						background: url(${w.src.icon[e]}) no-repeat;
						background-size: 100% 100%;
						">`:o=`
					<div style="
						width: 20px;
						height: 20px;
						background: url(${w.src.icon[e]}) no-repeat;
						background-size: 100% 100%;
						"></div>
					<div style="margin-left: 4px;">${a}</div>`);let l=a;n.isUserRule&&(l+=`<div class="netdisk-custom-rule-edit" data-key="${e}" data-type="${n.setting.name}">${J.config.iconSVG.edit}</div>`,l+=`<div class="netdisk-custom-rule-delete" data-key="${e}" data-type="${n.setting.name}">${J.config.iconSVG.delete}</div>`),this.$data.ruleContent.push({id:"netdisk-panel-config-"+e,title:o,headerTitle:l,attributes:{"data-key":e},forms:r,afterRender:c=>{c.$asideLiElement.setAttribute("data-function-enable",F.function.enable(e,!0).toString());}});});},parseRuleMatchRule(t){let i=t.rule,n=[],e=t.setting.key;for(let a=0;a<i.length;a++){const s=i[a];typeof s.link_innerText=="string"&&(s.link_innerText=V.replaceParam(s.link_innerText,Ye(e))),typeof s.link_innerHTML=="string"&&(s.link_innerHTML=V.replaceParam(s.link_innerHTML,Ge(e))),n.push(s);}return n},parseRuleSetting(t){let i=[];const n=t.setting.configurationInterface,e=t.setting.key;if(n==null)return [];if(n.function){let a=[];if("enable"in n.function){let s=typeof n.function.enable=="boolean"?n.function.enable:!1;a.push(U("å¯ç”¨",L.function.enable(e),s,(r,o)=>{const l="data-function-enable";let p=r.target.getRootNode().querySelector(`.pops-panel-aside li[data-key="${e}"]`);p&&p.setAttribute(l,o.toString());},"å¼€å¯å¯å…è®¸åŒ¹é…è¯¥è§„åˆ™")),n.function.enable=F.function.enable(e);}if("linkClickMode"in n.function){let s=typeof n.function.linkClickMode=="string"?n.function.linkClickMode:"copy",r=[{value:"copy",text:"å¤åˆ¶åˆ°å‰ªè´´æ¿"},{value:"openBlank",text:"æ–°æ ‡ç­¾é¡µæ‰“å¼€"}],o={parseFile:"æ–‡ä»¶è§£æ"};n.function.linkClickMode_extend&&Array.isArray(n.function.linkClickMode_extend)&&n.function.linkClickMode_extend.forEach(l=>{l in o&&r.push({value:l,text:o[l]});}),a.push(le("ç‚¹å‡»åŠ¨ä½œ",L.function.linkClickMode(e),s,r,void 0,"ç‚¹å‡»åŒ¹é…åˆ°çš„é“¾æ¥çš„æ‰§è¡Œçš„åŠ¨ä½œ")),n.function.linkClickMode=F.function.linkClickMode(e);}if("checkLinkValidity"in n.function){const s=typeof n.function.checkLinkValidity=="boolean"?n.function.checkLinkValidity:!0;a.push(U("éªŒè¯é“¾æ¥æœ‰æ•ˆæ€§",L.function.checkLinkValidity(e),s,void 0,"è‡ªåŠ¨è¯·æ±‚é“¾æ¥ï¼Œåˆ¤æ–­è¯¥é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåœ¨å¤§/å°çª—å†…æ˜¾ç¤ºéªŒè¯ç»“æœå›¾æ ‡")),n.function.checkLinkValidity=F.function.checkLinkValidity(e);}a.length&&i.push({text:"åŠŸèƒ½",type:"forms",forms:a});}if(n.linkClickMode_openBlank){let a=[];if("openBlankWithCopyAccessCode"in n.linkClickMode_openBlank){const s=typeof n.linkClickMode_openBlank.openBlankWithCopyAccessCode=="boolean"?n.linkClickMode_openBlank.openBlankWithCopyAccessCode:!1;a.push(U("è·³è½¬æ—¶å¤åˆ¶è®¿é—®ç ",L.linkClickMode_openBlank.openBlankWithCopyAccessCode(e),s,void 0,"å½“ç‚¹å‡»åŠ¨ä½œæ˜¯ã€æ–°æ ‡ç­¾é¡µæ‰“å¼€ã€‘æ—¶ä¸”å­˜åœ¨è®¿é—®ç ï¼Œé‚£å°±ä¼šå¤åˆ¶è®¿é—®ç åˆ°å‰ªè´´æ¿")),n.linkClickMode_openBlank.openBlankWithCopyAccessCode=F.linkClickMode_openBlank.openBlankWithCopyAccessCode(e);}a.length&&i.push({text:"ç‚¹å‡»åŠ¨ä½œ-æ–°æ ‡ç­¾é¡µæ‰“å¼€",type:"forms",forms:a});}if(n.schemeUri){const a=[];if("enable"in n.schemeUri){const s=typeof n.schemeUri.enable=="boolean"?n.schemeUri.enable:!1;a.push(U("å¯ç”¨",L.schemeUri.enable(e),s,void 0,"å¼€å¯åå¯è¿›è¡Œscheme uriè½¬å‘")),n.schemeUri.enable=F.schemeUri.enable(e);}if("isForwardBlankLink"in n.schemeUri){const s=typeof n.schemeUri.isForwardBlankLink=="boolean"?n.schemeUri.isForwardBlankLink:!1;a.push(U("è½¬å‘ç›´é“¾",L.schemeUri.isForwardBlankLink(e),s,void 0,"å¯¹è§£æçš„ç›´é“¾è¿›è¡Œschemeè½¬æ¢")),n.schemeUri.isForwardBlankLink=F.schemeUri.isForwardBlankLink(e);}if("isForwardLinearChain"in n.schemeUri){const s=typeof n.schemeUri.isForwardLinearChain=="boolean"?n.schemeUri.isForwardLinearChain:!1;a.push(U("è½¬å‘æ–°æ ‡ç­¾é¡µé“¾æ¥",L.schemeUri.isForwardBlankLink(e),s,void 0,"å¯¹æ–°æ ‡ç­¾é¡µæ‰“å¼€çš„é“¾æ¥è¿›è¡Œschemeè½¬æ¢")),n.schemeUri.isForwardLinearChain=F.schemeUri.isForwardLinearChain(e);}if("uri"in n.schemeUri){const s=typeof n.schemeUri.uri=="string"?n.schemeUri.uri:"";a.push(be("Urié“¾æ¥",L.schemeUri.uri(e),s,"è‡ªå®šä¹‰çš„Schemeçš„Urié“¾æ¥",void 0,"jumpwsv://go?package=xx&activity=xx&intentAction=xx&intentData=xx&intentExtra=xx")),n.schemeUri.uri=F.schemeUri.uri(e);}a.length&&i.push({text:"Scheme Uriè½¬å‘",type:"forms",forms:a});}if(n.matchRange_text){let a=[];if("before"in n.matchRange_text){const s=typeof n.matchRange_text.before=="number"?n.matchRange_text.before:0;a.push(te("é—´éš”å‰",L.matchRange_text.before(e),s,0,100,void 0,void 0,"æå–ç é—´éš”å‰çš„å­—ç¬¦é•¿åº¦")),n.matchRange_text.before=F.matchRange_text.before(e);}if("after"in n.matchRange_text){const s=typeof n.matchRange_text.after=="number"?n.matchRange_text.after:0;a.push(te("é—´éš”å",L.matchRange_text.after(e),s,0,100,void 0,void 0,"æå–ç é—´éš”åçš„å­—ç¬¦é•¿åº¦")),n.matchRange_text.after=F.matchRange_text.after(e);}a.length&&i.push({text:"æå–ç æ–‡æœ¬åŒ¹é…Text",type:"forms",forms:a});}if(n.matchRange_html){let a=[];if("before"in n.matchRange_html){const s=typeof n.matchRange_html.before=="number"?n.matchRange_html.before:0;a.push(te("é—´éš”å‰",L.matchRange_html.before(e),s,0,100,void 0,void 0,"æå–ç é—´éš”å‰çš„å­—ç¬¦é•¿åº¦")),n.matchRange_html.before=F.matchRange_html.before(e);}if("after"in n.matchRange_html){const s=typeof n.matchRange_html.after=="number"?n.matchRange_html.after:0;a.push(te("é—´éš”å",L.matchRange_html.after(e),s,0,100,void 0,void 0,"æå–ç é—´éš”åçš„å­—ç¬¦é•¿åº¦")),n.matchRange_html.after=F.matchRange_html.after(e);}a.length&&i.push({text:"æå–ç æ–‡æœ¬åŒ¹é…HTML",type:"forms",forms:a});}return n.ownFormList&&i.push(...n.ownFormList),i},getRulePanelContent(){return this.$data.ruleContent}},ve={handleShareCode(t,i,n){var r;let e=(r=t.match(i.shareCode))==null?void 0:r.filter(o=>d.isNotNull(o));if(n({status:!0,msg:["æ­£åˆ™: shareCode","ä½œç”¨: è·å–shareCode","ç»“æœ: ",JSON.stringify(e)]}),d.isNull(e)){n({status:!1,msg:"åŒ¹é…shareCodeä¸ºç©º"});return}let a=e[0];n({status:!0,msg:["å–ç¬¬ä¸€ä¸ªå€¼: "+a]}),i.shareCodeNeedRemoveStr&&(a=a.replace(i.shareCodeNeedRemoveStr,""),n({status:!0,msg:["æ­£åˆ™: shareCodeNeedRemoveStr","ä½œç”¨: åˆ é™¤ShareCodeå‰é¢ä¸éœ€è¦çš„å­—ç¬¦ä¸²",`ç»“æœ: ${a}`]}));let s=i.shareCodeNotMatch;if(s!=null&&a.match(s)){h.error(`ä¸å¯èƒ½çš„shareCode => ${a}`),n({status:!1,msg:["æ­£åˆ™: shareCodeNotMatch","ä½œç”¨: ç”¨äºåˆ¤æ–­æå–åˆ°çš„shareCodeæ˜¯å¦æ˜¯é”™è¯¯çš„shareCode","ç»“æœ: true è¯¥shareCodeä¸æ˜¯æ­£ç¡®çš„"]});return}for(const o of b.shareCodeNotMatchRegexpList)if(a.match(o)){h.error(`ä¸å¯èƒ½çš„shareCode => ${a}`),n({status:!1,msg:["æ­£åˆ™: å†…ç½®çš„shareCodeNotMatchRegexpList","ä½œç”¨: ä½¿ç”¨è¯¥æ­£åˆ™åˆ¤æ–­æå–åˆ°çš„shareCodeæ˜¯å¦æ­£ç¡®","ç»“æœ: true è¯¥shareCodeä¸æ˜¯æ­£ç¡®çš„"]});return}if(a=decodeURI(a),n({status:!0,msg:["å¯¹shareCodeè¿›è¡Œè§£ç : "+a]}),g.aboutShareCode.excludeIdenticalSharedCodes.value&&d.isSameChars(a,g.aboutShareCode.excludeIdenticalSharedCodesCoefficient.value)){n({status:!1,msg:["å·²å¼€å¯ã€æ’é™¤åˆ†äº«ç ã€‘ä¸”è¯¥åˆ†äº«ç å‘½ä¸­è¯¥è§„åˆ™"]});return}if(a.endsWith("http")||a.endsWith("https")){n({status:!1,msg:["è¯¥åˆ†äº«ç ä»¥http|httpsç»“å°¾"]});return}return n({status:!0,msg:"å¤„ç†å®Œæ¯•çš„shareCode: "+a}),a},handleAccessCode(t,i,n){var s;let e="";if(!i.checkAccessCode)return n({status:!0,msg:"å› æœªé…ç½®è§„åˆ™checkAccessCodeï¼Œé»˜è®¤accessCodeçš„å€¼ä¸ºç©º"}),"";let a=t.match(i.checkAccessCode);if(n({status:!0,msg:["æ­£åˆ™: checkAccessCode","ä½œç”¨: ç”¨æ¥åˆ¤æ–­link_innerTextæˆ–è€…link_innerHTMLåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä¸­æ˜¯å¦å­˜åœ¨å¯†ç ","ç»“æœ: ",JSON.stringify(a)]}),a){let r=a[a.length-1];n({status:!0,msg:"å–æœ€åä¸€ä¸ªå€¼: "+r});let o=(s=r.match(i.accessCode))==null?void 0:s.filter(l=>d.isNotNull(l));if(n({status:!0,msg:["æ­£åˆ™: accessCode","ä½œç”¨: ç”¨æ¥æå–link_innerTextæˆ–è€…link_innerHTMLåŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ä¸­çš„å¯†ç ","ç»“æœ: ",JSON.stringify(o)]}),d.isNull(o))return n({status:!0,msg:"å› â†‘åŒ¹é…åˆ°çš„ç»“æœä¸ºç©ºï¼Œé»˜è®¤accessCodeçš„å€¼ä¸ºç©º"}),"";o.length&&(e=o[0],n({status:!0,msg:"å–ç¬¬ä¸€ä¸ªå€¼: "+e}),e.startsWith("http")&&(n({status:!0,msg:"æ’é™¤ä¸å¯èƒ½çš„accessCodeï¼Œé‡ç½®accessCodeçš„å€¼ä¸ºç©º"}),e=""));}if(d.isNotNull(e)){for(const r of b.accessCodeNotMatchRegexpList)if(e.match(r)){e="",n({status:!0,msg:["æ­£åˆ™: å†…ç½®çš„accessCodeNotMatchRegexpList","ä½œç”¨: ä½¿ç”¨è¯¥æ­£åˆ™åˆ¤æ–­æå–åˆ°çš„accessCodeæ˜¯å¦æ­£ç¡®","ç»“æœ: true é‡ç½®accessCodeä¸ºç©º"]});break}i.acceesCodeNotMatch&&e.match(i.acceesCodeNotMatch)&&(e="",n({status:!0,msg:["æ­£åˆ™: acceesCodeNotMatch","ä½œç”¨: ç”¨äºåˆ¤æ–­æå–åˆ°çš„accessCodeæ˜¯å¦æ˜¯é”™è¯¯çš„accessCode","ç»“æœ: true é‡ç½®accessCodeä¸ºç©º"]}));}return n({status:!0,msg:"å¤„ç†å®Œæ¯•çš„accessCode: "+e}),e},handleLinkShow(t,i,n,e,a){let s=V.replaceParam(i.uiLinkShow,{shareCode:n});if(a({status:!0,msg:["æ­£åˆ™: uiLinkShow","ä½œç”¨: ç”¨äºæ˜¾ç¤ºåœ¨å¼¹çª—ä¸­çš„å­—ç¬¦ä¸²","å¤‡æ³¨: å¯¹shareCodeè¿›è¡Œå‚æ•°æ›¿æ¢",`ç»“æœ: ${s}`]}),e&&e!=""?(s=V.replaceParam(s,{accessCode:e}),a({status:!0,msg:["æ­£åˆ™: uiLinkShow","ä½œç”¨: ç”¨äºæ˜¾ç¤ºåœ¨å¼¹çª—ä¸­çš„å­—ç¬¦ä¸²","å¤‡æ³¨: å¯¹accessCodeè¿›è¡Œå‚æ•°æ›¿æ¢",`ç»“æœ: ${s}`]})):(s=s.replace(b.noAccessCodeRegExp,""),a({status:!0,msg:["æ­£åˆ™: å†…ç½®çš„noAccessCodeRegExp","ä½œç”¨: å› accessCodeä¸ºç©ºï¼Œä½¿ç”¨è¯¥æ­£åˆ™å»é™¤ä¸éœ€è¦çš„å­—ç¬¦ä¸²",`ç»“æœ: ${s}`]})),i.paramMatch&&d.isNotNull(t)){let r=t.match(i.paramMatch),o={};if(r)for(let l=0;l<r.length;l++)o[`$${l}`]=r[l];s=V.replaceParam(s,o),a({status:!0,msg:["æ­£åˆ™: paramMatch","ä½œç”¨: ç”¨äºå¯¹matchTextè¿›è¡Œæå–éœ€è¦çš„å…³é”®å†…å®¹ï¼Œæ›¿æ¢å…³é”®å­—ï¼š{#$1#}ã€{#$2#}...","å‚æ•°: "+JSON.stringify(o,void 0,4),`ç»“æœ: ${s}`]});}return a({status:!0,msg:"å¤„ç†å®Œæ¯•çš„uiLink: "+s}),s},handleBlank(t,i,n,e,a){let s=V.replaceParam(i.blank,{shareCode:n});if(a({status:!0,msg:["æ­£åˆ™: blank","ä½œç”¨: ç”¨äºç‚¹å‡»è·³è½¬çš„é“¾æ¥","å¤‡æ³¨: å¯¹shareCodeè¿›è¡Œå‚æ•°æ›¿æ¢",`ç»“æœ: ${s}`]}),e&&e!=""?(s=V.replaceParam(s,{accessCode:e}),a({status:!0,msg:["æ­£åˆ™: blank","ä½œç”¨: ç”¨äºç‚¹å‡»è·³è½¬çš„é“¾æ¥","å¤‡æ³¨: å¯¹accessCodeè¿›è¡Œå‚æ•°æ›¿æ¢",`ç»“æœ: ${s}`]})):(s=s.replace(b.noAccessCodeRegExp,""),a({status:!0,msg:["æ­£åˆ™: å†…ç½®çš„noAccessCodeRegExp","ä½œç”¨: å› accessCodeä¸ºç©ºï¼Œä½¿ç”¨è¯¥æ­£åˆ™å»é™¤ä¸éœ€è¦çš„å­—ç¬¦ä¸²",`ç»“æœ: ${s}`]})),i.paramMatch&&d.isNotNull(t)){let r=t.match(i.paramMatch),o={};if(r)for(let l=0;l<r.length;l++)o[`$${l}`]=r[l];s=V.replaceParam(s,o),a({status:!0,msg:["æ­£åˆ™: paramMatch","ä½œç”¨: ç”¨äºå¯¹matchTextè¿›è¡Œæå–éœ€è¦çš„å…³é”®å†…å®¹ï¼Œæ›¿æ¢å…³é”®å­—ï¼š{#$1#}ã€{#$2#}...","å‚æ•°: "+JSON.stringify(o,void 0,4),`ç»“æœ: ${s}`]});}return a({status:!0,msg:"å¤„ç†å®Œæ¯•çš„blank: "+s}),s},handleCopyUrl(t,i,n,e,a){let s=V.replaceParam(i.copyUrl,{shareCode:n});if(a({status:!0,msg:["æ­£åˆ™: copyUrl","ä½œç”¨: ç”¨äºå¤åˆ¶åˆ°å‰ªè´´æ¿çš„é“¾æ¥","å¤‡æ³¨: å¯¹shareCodeè¿›è¡Œå‚æ•°æ›¿æ¢",`ç»“æœ: ${s}`]}),e&&e!=""?(s=V.replaceParam(s,{accessCode:e}),a({status:!0,msg:["æ­£åˆ™: copyUrl","ä½œç”¨: ç”¨äºå¤åˆ¶åˆ°å‰ªè´´æ¿çš„é“¾æ¥","å¤‡æ³¨: å¯¹accessCodeè¿›è¡Œå‚æ•°æ›¿æ¢",`ç»“æœ: ${s}`]})):(s=s.replace(b.noAccessCodeRegExp,""),a({status:!0,msg:["æ­£åˆ™: å†…ç½®çš„noAccessCodeRegExp","ä½œç”¨: å› accessCodeä¸ºç©ºï¼Œä½¿ç”¨è¯¥æ­£åˆ™å»é™¤ä¸éœ€è¦çš„å­—ç¬¦ä¸²",`ç»“æœ: ${s}`]})),i.paramMatch&&d.isNotNull(t)){let r=t.match(i.paramMatch),o={};if(r)for(let l=0;l<r.length;l++)o[`$${l}`]=r[l];s=V.replaceParam(s,o),a({status:!0,msg:["æ­£åˆ™: paramMatch","ä½œç”¨: ç”¨äºå¯¹matchTextè¿›è¡Œæå–éœ€è¦çš„å…³é”®å†…å®¹ï¼Œæ›¿æ¢å…³é”®å­—ï¼š{#$1#}ã€{#$2#}...","å‚æ•°: "+JSON.stringify(o,void 0,4),`ç»“æœ: ${s}`]});}return a({status:!0,msg:"å¤„ç†å®Œæ¯•çš„copyUrl: "+s}),s}},Qe={addBlockCSS(...t){let i=[];if(t.length!==0&&!(t.length===1&&typeof t[0]=="string"&&t[0].trim()===""))return t.forEach(n=>{Array.isArray(n)?i=i.concat(n):i.push(n);}),Ze(`${i.join(`,
`)}{display: none !important;}`)},setGMResourceCSS(t){let i=typeof Ve=="function"?Ve(t.keyName):"";typeof i=="string"&&i?Ze(i):Qe.addLinkNode(t.url);},async addLinkNode(t){let i=document.createElement("link");return i.rel="stylesheet",i.type="text/css",i.href=t,v.ready(()=>{document.head.appendChild(i);}),i},fixUrl(t){return t=t.trim(),t.match(/^http(s|):\/\//i)||(t.startsWith("/")||(t+="/"),t=window.location.origin+t),t},async getClipboardText(){function t(e){navigator.clipboard.readText().then(a=>{e(a);}).catch(a=>{h.error(["è¯»å–å‰ªè´´æ¿å†…å®¹å¤±è´¥ğŸ‘‰",a]),e("");});}function i(e){navigator.permissions.query({name:"clipboard-read"}).then(a=>{t(e);}).catch(a=>{h.error(["ç”³è¯·å‰ªè´´æ¿æƒé™å¤±è´¥ï¼Œå°è¯•ç›´æ¥è¯»å–ğŸ‘‰",a.message??a.name??a.stack]),t(e);});}function n(){var e,a;return !(typeof((e=navigator==null?void 0:navigator.clipboard)==null?void 0:e.readText)!="function"||typeof((a=navigator==null?void 0:navigator.permissions)==null?void 0:a.query)!="function")}return new Promise(e=>{if(!n()){e("");return}document.hasFocus()?i(e):window.addEventListener("focus",()=>{i(e);},{once:!0});})}},_e={depthQueryShadowRootAllNode(t){let i=[];function n(e){let a=Array.from(e.querySelectorAll("*"));return a.forEach(s=>{if(s.classList&&s.classList.contains("pops-shadow-container"))return;let r=s.shadowRoot;r&&r instanceof ShadowRoot&&i.push({shadowRoot:r,childNode:n(r)});}),a}return n(t),i},ignoreStrRemove(t,i=!1){let n=[];return n.length&&n.forEach(e=>{if(e!=null)if(i)e.innerHTML!=null&&(t=t.replaceAll(e.innerHTML,""));else {let a=e.innerText||e.textContent;a!=null&&(a=a.replaceAll(a,""));}}),t},getPageText(t=document.documentElement,i){let n=[];if(n.push(t.innerText||t.textContent||""),i){let e=this.depthQueryShadowRootAllNode(t);e.length&&e.forEach(a=>{let s=a.shadowRoot.textContent;s&&n.push(s);});}return n},getPageHTML(t=document.documentElement,i){let n=[];if(n.push(t.innerHTML),i){let e=this.depthQueryShadowRootAllNode(t);e.length&&e.forEach(a=>{let s=a.shadowRoot.innerHTML;n.push(s);});}return n},getInputElementValue(t=document.documentElement,i){let n=[];if(Array.from(t.querySelectorAll("input")).forEach(e=>{n.push(e.value);}),i){let e=this.depthQueryShadowRootAllNode(t);e.length&&e.forEach(a=>{for(let s=0;s<a.childNode.length;s++){const r=a.childNode[s];r instanceof HTMLInputElement&&n.push(r.value);}});}return n},getTextAreaElementValue(t=document.documentElement,i){let n=[];if(Array.from(t.querySelectorAll("textarea")).forEach(e=>{n.push(e.value);}),i){let e=this.depthQueryShadowRootAllNode(t);e.length&&e.forEach(a=>{for(let s=0;s<a.childNode.length;s++){const r=a.childNode[s];r instanceof HTMLTextAreaElement&&n.push(r.value);}});}return n}},S={isHandleMatch:!1,delayNotMatchCount:0,dispatchMonitorDOMChange:!1,blobUrl:"",GM_matchWorker:void 0,init(){this.initWorkerBlobLink(),this.initWorker(),this.monitorDOMChange();},initWorkerBlobLink(){const t=`
        (() => {
            function ${S.handleRegularMatch.toString()}

            function ${S.uniqueArr}
            
            this.addEventListener(
            "message",
            function (event) {
                const data = event.data;
                let matchedList = [];
                ${S.handleRegularMatch.name}(data,(matchData)=>{
                	matchedList.push(matchData);
                })
                matchedList = ${S.uniqueArr.name}(matchedList);
                this.postMessage({
					options: data,
					msg: "Match End",
					data: matchedList,
					startTime: data.startTime,
					endTime: Date.now(),
                });
            },
            {
                capture: true,
            }
            );
        })();
  		`;let i=new Blob([t]);S.blobUrl=window.URL.createObjectURL(i),h.info(`Worker Blob Link ===> ${S.blobUrl}`);},handleRegularMatch(t,i){const n=Object.keys(t.regular);for(const e of n){const a=t.regular[e];for(let s=0;s<a.length;s++){const r=a[s];let o=[];if(t.matchTextRange.includes("innerText")&&o.push(new RegExp(r.link_innerText,"gi")),t.matchTextRange.includes("innerHTML")&&o.push(new RegExp(r.link_innerHTML,"gi")),!t.matchTextRange.length)throw console.error(t),new TypeError("æœªè®¾ç½®åŒ¹é…èŒƒå›´");if(!o.length)throw new TypeError("æœªçŸ¥çš„åŒ¹é…èŒƒå›´: "+t.matchTextRange);for(let l=0;l<o.length;l++){const c=o[l];for(let u=0;u<t.textList.length;u++){let m=t.textList[u].match(c);m&&m.length&&i({netDiskName:e,netDiskIndex:s,data:m});}}}}},uniqueArr(t){return t.filter((i,n,e)=>n===e.findIndex(a=>JSON.stringify(a)===JSON.stringify(i)))},initWorker(){try{S.GM_matchWorker=new Worker(S.blobUrl),S.GM_matchWorker.onmessage=S.onMessage,S.GM_matchWorker.onerror=S.onError;}catch(t){h.error(["åˆå§‹åŒ–Workerå¤±è´¥ï¼Œå¯èƒ½é¡µé¢ä½¿ç”¨äº†Content-Security-Policyç­–ç•¥ï¼Œä½¿ç”¨å¦ç±»æ–¹æ³•",t.message]),S.GM_matchWorker={postMessage(i){return new Promise((n,e)=>{let a=[];try{S.handleRegularMatch(i,s=>{a.push(s);});}catch(s){S.onError(s);}finally{a=S.uniqueArr(a),S.onMessage(new MessageEvent("message",{data:{options:i,msg:"Match End",data:a,startTime:i.startTime,endTime:Date.now()}})),n(null);}})}};}},postMessage(t,i){S.GM_matchWorker.postMessage(t,i);},onMessage(t){const i=t.data;i.data.length&&h.success(`æˆåŠŸåŒ¹é…${i.data.length}ä¸ªï¼Œç”¨æ—¶${Date.now()-i.startTime}ms`),i.options.from==="PasteText"&&w.matchPasteText.workerMatchEndCallBack(i),i.options.from.startsWith("FirstLoad")&&S.delayNotMatchCount++,S.successCallBack(i);},onError(t){S.errorCallBack(t);},successCallBack(t){if(!t.data.length){S.matchingEndCallBack();return}const i=[];for(const e of t.data){b.matchLink.add(e.netDiskName);let a=new Set;e.data.forEach(s=>{a.add(s);}),a.forEach(s=>{let r=b.handleLink(e.netDiskName,e.netDiskIndex,s);r&&i.push({shareCode:r.shareCode,accessCode:r.accessCode,netDiskName:e.netDiskName,netDiskIndex:e.netDiskIndex,matchText:s});});}let n=i.filter((e,a,s)=>s.findIndex(o=>o.accessCode===e.accessCode&&o.netDiskIndex===e.netDiskIndex&&o.netDiskName===e.netDiskName&&o.shareCode===e.shareCode)===a);if(n.forEach(e=>{b.tempLinkDict.has(e.netDiskName)&&b.tempLinkDict.get(e.netDiskName).set(e.shareCode,e);}),n.forEach(e=>{const{shareCode:a,accessCode:s,netDiskName:r,netDiskIndex:o,matchText:l}=e,u=b.rule.find(m=>m.setting.key===r).rule[o];if(u.shareCodeExcludeRegular&&Array.isArray(u.shareCodeExcludeRegular))for(const m of u.shareCodeExcludeRegular){let k=b.linkDict.get(m),x=b.tempLinkDict.get(m);if(k.startsWith(a)||x.startsWith(a)){h.warn(`${r}ï¼šè¯¥åˆ†äº«ç ã€${a}ã€‘ä¸å·²åŒ¹é…åˆ°è¯¥åˆ†äº«ç çš„è§„åˆ™ã€${m}ã€‘å†²çª`);return}}const p=b.linkDict.get(r);if(b.hasMatchLink=!0,p.startsWith(a)){let m=p.getStartsWith(a);if(typeof m.isForceAccessCode=="boolean"&&m.isForceAccessCode||d.isNotNull(m.accessCode)||d.isNull(s))return;p.set(a,b.getLinkDickObj(s,o,!1,l)),w.view.changeLinkView(r,o,a,s,l),h.info(`è¯¥åŒ¹é…é¡¹æ— å¯†ç ï¼Œè®¾ç½®å¯†ç  ${r} ${o}: ${a}  ===> ${s}`);}else p.set(a,b.getLinkDickObj(s,o,!1,l)),w.isMatchedNetDiskIconMap.add(r),w.view.addLinkView(r,o,a,s,l),h.success(`æ·»åŠ é“¾æ¥ ${r} ${o}: ${a}  ===> ${s}`);}),Object.keys(b.tempLinkDict.getItems()).forEach(e=>{b.tempLinkDict.get(e).clear();}),b.hasMatchLink)switch(g.function["netdisk-behavior-mode"].value){case"suspension_smallwindow".toLowerCase():Q.mode.current_suspension_smallwindow_mode.value==="suspension"?w.suspension.show():w.view.show();break;case"suspension_window".toLowerCase():w.suspension.show();break;case"smallwindow".toLowerCase():w.view.show();break;default:h.error(["æœªçŸ¥çš„è¡Œä¸ºæ¨¡å¼ï¼š"+g.function["netdisk-behavior-mode"].value]);}S.matchingEndCallBack();},errorCallBack(t){S.matchingEndCallBack(!0),h.error(["Worker Error",t]);},matchingEndCallBack(t){if(t)S.isHandleMatch=!1,S.delayNotMatchCount>0&&(S.delayNotMatchCount=0,S.dispatchMonitorDOMChange=!0);else {const i=parseFloat(g.match.delaytime.value.toString())*1e3;setTimeout(()=>{S.matchingEndCallBack(!0);},i);}},monitorDOMChange(){const t=g.match.isAddedNodesToMatch.value,i=g.match.readClipboard.value,n=g.match.pageMatchRange.value;let e=!0,a=!0,s=!0,r=g.match.depthQueryWithShadowRoot.value;const o={};b.rule.forEach(u=>{let p=u.setting.key;F.function.enable(p)&&(Reflect.has(o,p)?o[p]=[...o[p],...u.rule]:Reflect.set(o,p,u.rule));});async function l(u){if(S.isHandleMatch){S.delayNotMatchCount++;return}if(t&&u&&u.length){let k=!1;for(let x=0;x<u.length;x++){const A=u[x];if(A.addedNodes&&A.addedNodes instanceof NodeList&&A.addedNodes.length){k=!0;break}}if(!k)return}S.isHandleMatch=!0;const p=Date.now();if(i)try{b.clipboardText=await Qe.getClipboardText();}catch{}typeof b.clipboardText!="string"&&(b.clipboardText="");const m=[];if(b.clipboardText.trim()!==""&&m.push(b.clipboardText),g.match.allowMatchLocationHref&&m.push(V.getDecodeComponentUrl()),g.match.toBeMatchedWithInputElementValue&&m.push(..._e.getInputElementValue(document.documentElement,r)),g.match.toBeMatchedTextAreaElementValue&&m.push(..._e.getTextAreaElementValue(document.documentElement,r)),e&&(e=!1,m.length)){S.postMessage({textList:m,matchTextRange:n,regular:o,startTime:p,from:"FirstLoad-DOMChange"});return}if(n.includes("innerText")){let k=_e.getPageHTML(document.documentElement,r);if(m.push(...k),a){a=!1,S.postMessage({textList:m,matchTextRange:n,regular:o,startTime:p,from:"FirstLoad-Text-DOMChange"});return}}if(n.includes("innerHTML")){let k=_e.getPageHTML(document.documentElement,r);if(m.push(...k),s){s=!1,S.postMessage({textList:m,matchTextRange:n,regular:o,startTime:p,from:"FirstLoad-HTML-DOMChange"});return}}S.postMessage({textList:m,matchTextRange:n,regular:o,startTime:p,from:"DOMChange"});}d.mutationObserver(document.documentElement,{callback:l,config:{childList:g.match["mutationObserver-childList"].value,characterData:g.match["mutationObserver-characterData"].value,subtree:g.match["mutationObserver-subtree"].value}});let c=S.dispatchMonitorDOMChange;Object.defineProperty(S,"dispatchMonitorDOMChange",{set:function(u){if(c=u,u){let p=document.querySelectorAll("html");l([{addedNodes:p,attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:p,target:p[0],type:"attributes"}]);}},get:function(){return c}}),this.dispatchMonitorDOMChange=!0;}},xn={$el:{$select:null,$log:null,$matchText:null,$button:null},reset(){Object.keys(this.$el).forEach(t=>{Reflect.deleteProperty(this.$el,t);});},setLog(t,...i){let n="";i.forEach(a=>{n!==""&&(n+=`
`),typeof a!="string"?n+=JSON.stringify(a,void 0,4):n+=a;});let e=v.createElement("p",{innerText:n},{"data-tag":t});v.append(this.$el.$log,e);},clearLog(){this.$el.$log.innerHTML="";},showUI(t){if(this.reset(),d.isNull(t.regexp)){f.error("è¯·å…ˆé…ç½®regexp");return}let i=this,e=G.parseRule([t])[0].rule,a=H.confirm({title:{text:`è°ƒè¯•è§„åˆ™ ${t.key}`,position:"center"},content:{text:`
                    <div class="custom-rule-container">
                        <textarea class="custom-rule-match-text" placeholder="è¯·è¾“å…¥éœ€è¦æµ‹è¯•åŒ¹é…çš„å­—ç¬¦ä¸²"></textarea>
                        <div class="custom-rule-input-container">
                        <select class="custom-rule-select-regexp"></select>
                        <button class="custom-rule-run-match-button" type="primary" data-icon="" data-righticon="false">
                            <span>æ‰§è¡Œ</span>
                        </button>
                        </div>
                    </div>
                    <div class="custom-rule-match-log">
                        <div>åŒ¹é…æ—¥å¿—â†“</div>
                        <div class="custom-rule-match-log-container"></div>
                    </div>
                    `,html:!0},btn:{ok:{enable:!1}},style:`
                .custom-rule-container{
                    display: flex;
                    align-items: center;
                }
                .custom-rule-select-regexp{
                    width: 100%;
                    height: 32px;
                    line-height: 32px;
                    border: 1px solid rgb(184, 184, 184, var(--pops-bd-opacity));
                    border-radius: 5px;
                    text-align: center;
                    outline: 0;
                    background: rgb(255, 255, 255, var(--pops-bg-opacity));
                    box-shadow: none;
                }
                .custom-rule-input-container{
                    display: flex;
                    flex-wrap: wrap;
                    justify-content: center;
                    margin: 5px;
                    width: 30%;
                }
                .custom-rule-select-regexp-item{

                }
                button.custom-rule-run-match-button{
                    margin-top: 5px;
                }
                textarea.custom-rule-match-text{
                    width: 100%;
                    min-height: 70px;
                    outline: none;
                    margin: 0px;
                    background-image: none;
                    background-color: transparent;
                    display: inline-block;
                    resize: vertical;
                    padding: 5px;
                    line-height: 1.5;
                    box-sizing: border-box;
                    border: 1px solid rgb(220, 223, 230);
                    appearance: none;
                }
                .custom-rule-match-log{

                }
                .custom-rule-match-log-container{
                    padding: 5px;
                    background: rgb(229, 229, 229);
                }
                .custom-rule-match-log-container p{
                    margin: 2px 0px;
                    border-bottom: 1px solid #000000;
                }
                .custom-rule-match-log-container p:last-child{
                    border-bottom: 0px;
                    margin-bottom: 0px;
                }
                .custom-rule-match-log-container p[data-tag]{
                
                }
                .custom-rule-match-log-container p[data-tag="info"]{

                }
                .custom-rule-match-log-container p[data-tag="success"]{
                    color: green;
                }
                .custom-rule-match-log-container p[data-tag="warn"]{
                    color: yellow;
                }
                .custom-rule-match-log-container p[data-tag="error"]{
                    color: red;
                }
                `},w.popsStyle.customRuleDebugView);this.$el.$select=a.$shadowRoot.querySelector(".custom-rule-select-regexp"),this.$el.$matchText=a.$shadowRoot.querySelector(".custom-rule-match-text"),this.$el.$log=a.$shadowRoot.querySelector(".custom-rule-match-log-container"),this.$el.$button=a.$shadowRoot.querySelector(".custom-rule-run-match-button"),e.forEach((o,l)=>{this.$el.$select.appendChild(v.createElement("option",{className:"custom-rule-select-regexp-item",innerText:"regexpä¸‹æ ‡:"+l,"data-value":o}));});function s(o){Array.isArray(o.msg)?i.setLog(o.status?"info":"error",...o.msg):i.setLog(o.status?"info":"error",o.msg),o.status||i.setLog("error","æ‰§è¡Œå®Œæ¯•");}function r(){try{if(d.isNull(i.$el.$matchText.value)){f.error("è¯·å…ˆè¾“å…¥å¾…åŒ¹é…çš„å­—ç¬¦ä¸²");return}i.clearLog();let o=t.key,l=i.$el.$select.selectedIndex,c=i.$el.$select.selectedOptions[l]["data-value"];h.info(["å½“å‰é€‰ä¸­çš„è§„åˆ™: ",c]);let u={};u[t.key]=[c];let p=[];if(S.handleRegularMatch({regular:u,textList:[i.$el.$matchText.value],matchTextRange:["innerText","innerHTML"],startTime:Date.now(),from:"Debug"},m=>{p.push(...m.data);}),!p.length){i.setLog("error","æœªæˆåŠŸåŒ¹é…åˆ°æ•°æ®");return}p=S.uniqueArr(p),i.setLog("info","æˆåŠŸåŒ¹é…åˆ°çš„æ•°æ® ==> ",p),p.forEach((m,k)=>{i.setLog("success","å½“å‰å¤„ç†çš„å­—ç¬¦ä¸²: "+m),i.setLog("success","å½“å‰æ‰§è¡Œ: å¯¹shareCodeè¿›è¡Œå¤„ç†è·å–");let x=ve.handleShareCode(m,c,s);if(d.isNull(x))return;i.setLog("info"," "),i.setLog("info","================åˆ†å‰²çº¿================"),i.setLog("info"," "),i.setLog("success","å½“å‰æ‰§è¡Œ: å¯¹accessCodeè¿›è¡Œå¤„ç†è·å–");let A=ve.handleAccessCode(m,c,s);i.setLog("info"," "),i.setLog("info","================åˆ†å‰²çº¿================"),i.setLog("info"," "),i.setLog("success","å½“å‰æ‰§è¡Œ: å¯¹uiLinkShowè¿›è¡Œå¤„ç†è·å–");let N=ve.handleLinkShow(m,c,x,A,s);i.setLog("info"," "),i.setLog("info","================åˆ†å‰²çº¿================"),i.setLog("info"," "),i.setLog("success","å½“å‰æ‰§è¡Œ: å¯¹blankè¿›è¡Œå¤„ç†è·å–");let D=ve.handleBlank(m,c,x,A,s);i.setLog("info"," "),i.setLog("info","================åˆ†å‰²çº¿================"),i.setLog("info"," "),i.setLog("success","å½“å‰æ‰§è¡Œ: å¯¹copyUrlè¿›è¡Œå¤„ç†è·å–");let K=ve.handleCopyUrl(m,c,x,A,s);i.setLog("success","æ‰§è¡Œå®Œæ¯•");});}catch(o){h.error(o),i.setLog(o.toString());}}v.on(i.$el.$button,"click",void 0,r);}},Cn=`.pops[type-value="confirm"] .pops-confirm-content {\r
	overflow: hidden;\r
}\r
/* textareaç¾åŒ– */\r
.pops.whitesevPopNetDiskCustomRules[type-value="confirm"]\r
	.pops-confirm-content\r
	textarea {\r
	width: 100%;\r
	height: 100%;\r
	border: none;\r
	outline: none;\r
	padding: 0;\r
	margin: 0;\r
	-webkit-appearance: none;\r
	-moz-appearance: none;\r
	appearance: none;\r
	background-image: none;\r
	background-color: transparent;\r
\r
	display: inline-block;\r
	resize: vertical;\r
	padding: 5px 15px;\r
	line-height: 1.5;\r
	box-sizing: border-box;\r
	border: 1px solid #dcdfe6;\r
	transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r
	appearance: none;\r
	resize: none;\r
}\r
/* è·å¾—ç„¦ç‚¹ */\r
.pops.whitesevPopNetDiskCustomRules[type-value="confirm"]\r
	.pops-confirm-content\r
	textarea:focus {\r
	outline: none;\r
	border-color: #3677f0;\r
}\r
/* æç¤ºæ–‡å­— */\r
.pops.whitesevPopNetDiskCustomRules[type-value="confirm"]\r
	.pops-confirm-content\r
	textarea::placeholder {\r
	color: #c0c4cc;\r
}\r
/* é¼ æ ‡hover */\r
.pops.whitesevPopNetDiskCustomRules[type-value="confirm"]\r
	.pops-confirm-content\r
	textarea:hover {\r
	border-color: #c0c4cc;\r
}\r
`,Ne={show(t,i){let n="æ·»åŠ ";t&&(n="ç¼–è¾‘"),n+="è‡ªå®šä¹‰è§„åˆ™";let e=null;function a(l,c){let u=e.value.trim(),p=G.parseRuleStrToRule(u);if(p.success){let m=p.data;t?G.setRule(i,m):G.addRule(m),f.success("ä¿å­˜æˆåŠŸ");}else f.error(p.msg);}function s(l){let c=e.value.trim(),u=G.parseRuleStrToRule(c);if(u.success){let p=u.data;xn.showUI(p);}else f.error(u.msg);}function r(l){try{let c=JSON.parse(e.value),u=G.getFormatRule(c);e.value=u,f.success("æ ¼å¼åŒ–æˆåŠŸ");}catch(c){h.error(c),f.error(c.message,{html:!0,timeout:3500});}}if(e=H.confirm({title:{text:n,position:"center"},content:{text:'<textarea class="netdisk-custom-rules" placeholder="è¯·è¾“å…¥è‡ªå®šä¹‰è§„åˆ™"></textarea>',html:!0},btn:{merge:!0,mergeReverse:!1,reverse:!1,position:"space-between",ok:{text:"ä¿å­˜",callback:(l,c)=>{a();}},cancel:{text:"è°ƒè¯•",callback:(l,c)=>{s();}},other:{enable:!0,text:"æ ¼å¼åŒ–",type:"xiaomi-primary",callback:(l,c)=>{r();}}},class:"whitesevPopNetDiskCustomRules",style:Cn},w.popsStyle.customRulesView).$shadowRoot.querySelector("textarea"),t){let l=G.getRule(i);e.value=G.getFormatRule(l);}else e.value=G.getTemplateRule();}},et=`div[class^="netdisk-custom-rule-"] {\r
	display: flex;\r
	align-items: center;\r
	margin-left: 10px;\r
	cursor: pointer;\r
}\r
div[class^="netdisk-custom-rule-"] svg,\r
div[class^="netdisk-custom-rule-"] svg {\r
	width: 1.2em;\r
	height: 1.2em;\r
}\r
/* æ§ä»¶è¢«ç¦ç”¨çš„é¢œè‰² */\r
aside.pops-panel-aside li[data-key][data-function-enable="false"] {\r
	color: #a8abb2;\r
	filter: grayscale(100%);\r
}\r
`,Ue={show(){var e;if(w.Alias.settingAlias){h.error("è®¾ç½®ç•Œé¢å·²å­˜åœ¨"),f.error("è®¾ç½®ç•Œé¢å·²å­˜åœ¨");return}let t=Y.getPanelContentConfig(),i=Le.getRulePanelContent();t=t.concat(i);let n=H.panel({title:{text:`${((e=pe==null?void 0:pe.script)==null?void 0:e.name)||nt}-è®¾ç½®`,position:"center"},content:t,btn:{close:{enable:!0,callback(a){a.close(),w.Alias.settingAlias=void 0;}}},mask:{clickCallBack(a){a(),w.Alias.settingAlias=void 0;}},class:"whitesevPopSetting",style:et},w.popsStyle.settingView);w.Alias.settingAlias=n,this.setRuleHeaderControlsClickEvent(n.$shadowRoot);},showPanel(t={}){},setRuleHeaderControlsClickEvent(t){v.on(t,"click",".netdisk-custom-rule-edit",function(i){let n=i.target,e=n.getAttribute("data-key");n.getAttribute("data-type"),Ne.show(!0,e);}),v.on(t,"click",".netdisk-custom-rule-delete",function(i){let n=i.target,e=n.getAttribute("data-key"),a=n.getAttribute("data-type");H.alert({title:{text:"æç¤º",position:"center"},content:{text:`ç¡®å®šåˆ é™¤è‡ªå®šä¹‰è§„åˆ™ ${a}(${e}) å—ï¼Ÿ`},btn:{ok:{callback(s){if(G.deleteRule(e)){let o=w.Alias.settingAlias.$shadowRoot.querySelector(`.pops-panel-aside > ul > li[data-key="${e}"]`),l=o.previousElementSibling,c=o.nextElementSibling;l?l.click():c&&c.click(),o==null||o.remove(),f.success("åˆ é™¤æˆåŠŸ"),s.close();}else f.error("åˆ é™¤è‡ªå®šä¹‰è§„åˆ™å¤±è´¥");}}}});});}},vn=`.whitesevSuspension {\r
	top: 0;\r
	position: fixed;\r
	right: 10px;\r
	border-radius: 12px;\r
}\r
.whitesevSuspension .whitesevSuspensionMain {\r
	background: #fff;\r
	border: 1px solid #f2f2f2;\r
	box-shadow: 0 0 15px #e4e4e4;\r
	box-sizing: border-box;\r
	border-radius: inherit;\r
	height: inherit;\r
	width: inherit;\r
}\r
.whitesevSuspension .whitesevSuspensionFloor {\r
	border-bottom: 1px solid #f2f2f2;\r
	position: relative;\r
	box-sizing: border-box;\r
	border-radius: inherit;\r
	height: inherit;\r
	width: inherit;\r
}\r
.whitesevSuspension .whitesevSuspensionFloor .netdisk {\r
	background-position: center center;\r
	background-size: 115% 115%;\r
	background-repeat: no-repeat;\r
	display: flex;\r
	align-items: center;\r
	justify-content: center;\r
	border-radius: inherit;\r
	height: inherit;\r
	width: inherit;\r
}\r
.whitesevSuspension .whitesevSuspensionFloor .netdisk:hover {\r
	transition: all 300ms linear;\r
	background-color: #e4e4e4;\r
	transform: scale(1.1);\r
}\r
.whitesevPop-content p[pop] {\r
	height: 100%;\r
}\r
`,Q={position:{suspensionX:ke("suspensionX",j.width(window)-50),suspensionY:ke("suspensionY",(j.height(window)-50)/2),isRight:ke("isRight",!1)},mode:{current_suspension_smallwindow_mode:ke("current_suspension_smallwindow_mode","suspension")}},bn={suspensionNode:null,isShow:!1,isSetEvent:!1,isRandBg:!1,show(){this.isShow||(this.isShow=!0,this.createUI(),this.setSuspensionPosition()),this.isSetEvent||(this.isSetEvent=!0,this.setSuspensionEvent(),this.setResizeEventListener()),this.backgroundSwitch(),this.showSuspension();},showSuspension(){this.suspensionNode.style.display="";},hideSuspension(){this.suspensionNode.style.display="none";},isTopWindow(){return X.self.window===X.top.window},createUI(){g.suspension.size.value<15&&(g.suspension.size.value=15),g.suspension.size.value>250&&(g.suspension.size.value=250),g.suspension.opacity.value<.1&&(g.suspension.opacity.value=.1),g.suspension.opacity.value>1&&(g.suspension.opacity.value=1);let t=j.createElement("div",{className:"whitesev-suspension-shadow-container"}),i=t.attachShadow({mode:"open"});this.suspensionNode=j.createElement("div",{id:"whitesevSuspensionId",className:"whitesevSuspension",innerHTML:`
                <style type="text/css">
				/* åŠ¨æ€ç”Ÿæˆz-index */
				.whitesevSuspension{
					z-index: ${d.getMaxValue(4e3,d.getMaxZIndex(10))};;
				}

				${vn}

                </style>
                <div class="whitesevSuspensionMain">
                <div class="whitesevSuspensionFloor">
                    <div class="netdisk"></div>
                </div>
                </div>
                `},{style:`
                    width: ${g.suspension.size.value}px;
                    height: ${g.suspension.size.value}px;
                    opacity: ${g.suspension.opacity.value}
                `}),i.appendChild(this.suspensionNode),document.body.appendChild(t);},setSuspensionEvent(){let t=w.suspension.suspensionNode,i=new In(t),n,e=!1,a=!1,s=0,r=0;i.on("pan",function(o){if(!e){e=!0;let l=t.getBoundingClientRect();s=o.x-l.left,r=o.y-l.top,j.css(t,{cursor:"move",transition:"none"});}if(o.phase==="move"){let l=j.width(window)-g.suspension.size.value,c=j.height(window)-g.suspension.size.value,u=o.x-s,p=o.y-r;u=u>l?l:u,p=p>c?c:p,u=u<0?0:u,p=p<0?0:p,w.suspension.isTopWindow()&&(Q.position.suspensionX.value=u,Q.position.suspensionY.value=p),j.css(t,{left:u+"px",top:p+"px"});}if(o.phase==="end"){e=!1,j.css(t,{cursor:"auto"});let l=parseInt(j.css(t,"left"));if(g.suspension["suspended-button-adsorption-edge"].value){let c=0;l>=j.width(window)/2?(c=j.width(window)-g.suspension.size.value,w.suspension.isTopWindow()&&(Q.position.isRight.value=!0)):w.suspension.isTopWindow()&&(Q.position.isRight.value=!1),w.suspension.isTopWindow()&&(Q.position.suspensionX.value=c),j.css(t,{left:c+"px"});}j.css(t,{transition:"left 300ms ease 0s"});}}),i.on(["click","tap"],function(o){clearTimeout(n),n=void 0,a?(a=!1,Ue.show()):(n=setTimeout(()=>{a=!1,g.function["netdisk-behavior-mode"].value.includes("smallwindow")&&(Q.mode.current_suspension_smallwindow_mode.value="smallwindow",w.suspension.hideSuspension()),w.view.show();},200),a=!0);}),w.setGlobalRightClickMenu(t);},setResizeEventListener(){j.on(globalThis,"resize",void 0,()=>{let t=document.activeElement;if(d.isPhone()){if(["input","textarea"].includes(t.localName))return;if(t.hasAttribute("contenteditable")&&t.getAttribute("contenteditable")==="true"||t.closest("[contenteditable='true']"))return;if(!document.hasFocus())return}this.setSuspensionPosition();});},setSuspensionPosition(){let t=j.width(window)-g.suspension.size.value,i=j.height(window)-g.suspension.size.value,n=Q.position.suspensionX.value,e=Q.position.suspensionY.value;g.suspension["suspended-button-adsorption-edge"].value&&(Q.position.isRight.value?n=t:n=0,e>i?e=i:e<0&&(e=0),w.suspension.isTopWindow()&&(Q.position.suspensionX.value=n,Q.position.suspensionY.value=e)),j.css(w.suspension.suspensionNode,{left:n+"px",top:e+"px"});},backgroundSwitch(){if(this.isRandBg)return;function t(){let r=[];return w.isMatchedNetDiskIconMap.forEach(o=>{r=[...r,w.src.icon[o]];}),r}function i(r,o){n=t(),j.fadeOut(s,r,function(){e++,e=e<n.length?e:0,o=n[e],j.css(s,{"background-image":`url(${o})`}),j.fadeIn(s,r,function(){setTimeout(()=>{i(parseInt(g.suspension["randbg-time"].value.toString()),o);},parseInt(g.suspension["randbg-show-time"].value.toString()));});});}let n=[],e=0;n=t();let a=n[e],s=w.suspension.suspensionNode.querySelector(".whitesevSuspension .netdisk");j.css(s,{"background-image":`url(${a})`}),!(n.length<2||g.suspension["randbg-time"].value<=0)&&(this.isRandBg=!0,i(parseInt(g.suspension["randbg-time"].value.toString().toString()),a));}},Be=`.pops-folder-list .list-name-text {\r
	max-width: 300px;\r
}\r
.netdisk-static-link-onefile .pops-folder-list .list-name-text {\r
	max-width: 220px;\r
}\r
.netdisk-static-link-onefile\r
	.pops-mobile-folder-content\r
	.pops-folder-list\r
	.list-name-text {\r
	max-width: unset;\r
}\r
`,Rn={oneFile(t){h.success(["æˆåŠŸè·å–å•æ–‡ä»¶ç›´é“¾",t]),H.folder({title:{text:t.title},folder:[{fileName:t.fileName,fileSize:t.fileSize,fileType:t.fileType??"",createTime:t.fileUploadTime||t.fileLatestTime,latestTime:t.fileLatestTime||t.fileUploadTime,isFolder:!1,index:0,async clickEvent(){if(typeof t.clickCallBack=="function")t.clickCallBack(t);else return {autoDownload:!0,mode:"aBlank",url:t.downloadUrl}}}],btn:{ok:{text:"ä¸‹è½½",callback(){typeof t.clickCallBack=="function"?t.clickCallBack(t):window.open(t.downloadUrl,"_blank");}}},class:"netdisk-static-link-onefile",style:Be},w.popsStyle.oneFileStaticView);},moreFile(t,i=[]){h.success(["æ–‡ä»¶è§£æä¿¡æ¯",i]),H.folder({title:{text:t},folder:i,style:Be},w.popsStyle.moreFileStaticView);}},An=function(t="å¯†ç é”™è¯¯",i="",n,e,a,s=()=>{}){const r=H.prompt({title:{text:t,position:"center",html:!1},btn:{reverse:!0,position:"end",cancel:{text:"å–æ¶ˆ"},ok:{callback:o=>{var x,A,N,D;let l=o.text.replace(/[\s]*/gi,""),c=b.handleLinkShow(i,n,e,l,void 0),u=`.netdisk-url a[data-netdisk='${i}'][data-sharecode='${e}']`,p=`.netdiskrecord-link a[data-netdisk='${i}'][data-sharecode='${e}']`,m=(A=(x=w.Alias.uiLinkAlias)==null?void 0:x.$shadowRoot)==null?void 0:A.querySelector(u),k=(D=(N=w.Alias.historyAlias)==null?void 0:N.$shadowRoot)==null?void 0:D.querySelector(p);m&&(m.setAttribute("data-accesscode",l),v.html(m,c)),k&&(k.setAttribute("data-accesscode",l),v.html(k,c)),h.info(`${i} é‡æ–°è¾“å…¥çš„å¯†ç ï¼š${l}`),s(l),o.close();}}},content:{placeholder:"è¯·é‡æ–°è¾“å…¥å¯†ç ",focus:!0,select:!0,text:a==null?"":typeof a=="string"?a:""}},w.popsStyle.inputNewAccessCodeView);v.listenKeyboard(r.$shadowRoot,"keypress",o=>{o==="Enter"&&r.$shadowRoot.querySelector(".pops-prompt-btn-ok").click();});},Sn=`.pops[type-value="confirm"] .pops-confirm-content {\r
	overflow: hidden;\r
}\r
.netdisk-match-paste-text {\r
	--textarea-bd-color: #dcdfe6;\r
	display: inline-block;\r
	resize: vertical;\r
	padding: 5px 15px;\r
	line-height: 1.5;\r
	box-sizing: border-box;\r
	color: #606266;\r
	border: 1px solid var(--textarea-bd-color);\r
	border-radius: 4px;\r
	transition: border-color 0.2s cubic-bezier(0.645, 0.045, 0.355, 1);\r
	outline: none;\r
	margin: 0;\r
	-webkit-appearance: none;\r
	-moz-appearance: none;\r
	appearance: none;\r
	background: none;\r
	width: 100%;\r
	height: 100%;\r
	appearance: none;\r
	resize: none;\r
}\r
.netdisk-match-paste-text:hover {\r
	--textarea-bd-color: #c0c4cc;\r
}\r
.netdisk-match-paste-text:focus {\r
	--textarea-bd-color: #3677f0;\r
}\r
`,_n={show(){let t=H.confirm({title:{text:"ä¸»åŠ¨è¯†åˆ«æ–‡æœ¬",position:"center"},content:{text:`
                    <textarea class="netdisk-match-paste-text"></textarea>
                    `,html:!0},btn:{ok:{text:"è¯†åˆ«",callback(){var n,e;let i=((e=(n=t.popsElement)==null?void 0:n.querySelector(".netdisk-match-paste-text"))==null?void 0:e.value)||"";i.trim()!==""&&(i=V.replaceChinese(i),S.postMessage({textList:[i],matchTextRange:g.match.pageMatchRange.value,regular:b.matchRule,startTime:Date.now(),from:"PasteText"}));}}},class:"whitesevPopNetDiskMatchPasteText",style:Sn},w.popsStyle.matchPasteTextView);t.popsElement.querySelector("textarea").focus();},workerMatchEndCallBack(t){t.data.length?f.success(`æˆåŠŸåŒ¹é…${t.data.length}ä¸ªï¼Œç”¨æ—¶${Date.now()-t.startTime}ms`):f.error("æœªè¯†åˆ«åˆ°é“¾æ¥");}},Tn=`.whitesevPopNetDiskHistoryMatch .pops-confirm-content ul {\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content li {\r
	display: flex;\r
	flex-direction: column;\r
	justify-content: center;\r
	border-radius: 10px;\r
	box-shadow: 0 0.3px 0.6px rgb(0 0 0 / 6%), 0 0.7px 1.3px rgb(0 0 0 / 8%),\r
		0 1.3px 2.5px rgb(0 0 0 / 10%), 0 2.2px 4.5px rgb(0 0 0 / 12%),\r
		0 4.2px 8.4px rgb(0 0 0 / 14%), 0 10px 20px rgb(0 0 0 / 20%);\r
	margin: 20px 10px;\r
	padding: 10px;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-search {\r
	height: 11%;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-table {\r
	height: calc(85% - 40px);\r
	overflow: auto;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-page {\r
	display: flex;\r
	justify-content: center;\r
	align-items: center;\r
	margin-top: 10px;\r
}\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-search\r
	input {\r
	border: none;\r
	border-bottom: 1px solid #000000;\r
	padding: 0px 5px;\r
	line-height: 28px;\r
	width: -moz-available;\r
	width: -webkit-fill-available;\r
	width: fill-available;\r
	margin: 5px 5px 0px 5px;\r
	background: none;\r
}\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-search\r
	input:focus-visible {\r
	outline: none;\r
	border-bottom: 1px solid #0009ff;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-link {\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-link a {\r
	color: #ff4848;\r
	font-size: 0.8em;\r
	border: none;\r
	word-break: break-word;\r
}\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-link\r
	a[isvisited="true"] {\r
	color: #8b8888;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-icon {\r
}\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-icon\r
	.netdisk-icon-img {\r
	width: 28px;\r
	height: 28px;\r
	min-width: 28px;\r
	min-height: 28px;\r
	font-size: 0.8em;\r
	border-radius: 10px;\r
	box-shadow: 0 0.3px 0.6px rgb(0 0 0 / 6%), 0 0.7px 1.3px rgb(0 0 0 / 8%),\r
		0 1.3px 2.5px rgb(0 0 0 / 10%), 0 2.2px 4.5px rgb(0 0 0 / 12%),\r
		0 4.2px 8.4px rgb(0 0 0 / 14%), 0 10px 20px rgb(0 0 0 / 20%);\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-url {\r
	color: #000;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-top-url {\r
	color: #000;\r
}\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-functions\r
	button.btn-delete {\r
	background: #263cf3;\r
	color: #fff;\r
}\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-functions\r
	button.btn-delete:active {\r
	background: #6e7be8;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-link,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-icon,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-url,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-top-url,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-add-time,\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-update-time,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-url-title,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-functions {\r
	display: flex;\r
	margin: 5px 0px;\r
}\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-link p,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-icon p,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-url p,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-top-url p,\r
.whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-add-time p,\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-update-time\r
	p,\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-url-title\r
	p,\r
.whitesevPopNetDiskHistoryMatch\r
	.pops-confirm-content\r
	.netdiskrecord-functions\r
	p {\r
	min-width: 80px;\r
	max-width: 80px;\r
	align-self: center;\r
}\r
`,Dn={storageKey:"netDiskHistoryMatch",isSetOtherEvent:!1,dataPaging:void 0,show(){let t=this.getNetDiskHistoryMatchData(),i="",n=this;t=this.orderNetDiskHistoryMatchData(t);for(let e=0;e<10;e++)t[e]&&(i+=n.getTableHTML(t[e]));i=`
        <div class="netdiskrecord-search">
            <input type="text" placeholder="æœç´¢é“¾æ¥/ç½‘å€/ç½‘å€æ ‡é¢˜ï¼Œå¯æ­£åˆ™æœç´¢">
        </div>
        <div class="netdiskrecord-table"><ul>${i}</ul></div>
        <div class="netdiskrecord-page">

        </div>`,w.Alias.historyAlias=H.confirm({title:{text:"å†å²åŒ¹é…è®°å½•",position:"center"},content:{text:i,html:!0},btn:{reverse:!0,position:"space-between",ok:{enable:!0,callback(e){e.close(),w.Alias.historyAlias=void 0;}},close:{callback(e){e.close(),w.Alias.historyAlias=void 0;}},cancel:{enable:!1},other:{enable:!0,text:`æ¸…ç©ºæ‰€æœ‰(${t.length})`,type:"xiaomi-primary",callback:e=>{H.confirm({title:{text:"åˆ é™¤",position:"center"},content:{text:"ç¡®å®šæ¸…ç©ºæ‰€æœ‰çš„è®°å½•ï¼Ÿ",html:!1},btn:{ok:{enable:!0,callback(a){n.clearNetDiskHistoryMatchData(),v.remove(w.Alias.historyAlias.$shadowRoot.querySelectorAll(".whitesevPopNetDiskHistoryMatch .pops-confirm-content ul li")),a.close(),v.html(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-page"),""),v.text(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .pops-confirm-btn-other"),v.text(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .pops-confirm-btn-other")).replace(/[\d]+/gi,"0"));}},cancel:{text:"å–æ¶ˆ",enable:!0}}});}}},mask:{clickCallBack(e){e(),w.Alias.historyAlias=null;}},class:"whitesevPopNetDiskHistoryMatch",style:Tn},w.popsStyle.historyMatchView),this.setDataPaging(t),this.setEvent(w.Alias.historyAlias.$shadowRoot),this.setSearchEvent(),w.setRightClickMenu(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch"),".netdiskrecord-link a",!0);},getCSS(){},getTableHTML(t){let i=b.handleLinkShow(t.netDiskName,t.netDiskIndex,t.shareCode,t.accessCode,t.matchText);return `
		<li>
			<div class="netdiskrecord-link">
				<p>é“¾æ¥</p>
				<a  href="javascript:;"
					isvisited="false"
					${he.createElementAttributeRuleInfo({netDisk:t.netDiskName,netDiskIndex:t.netDiskIndex,shareCode:t.shareCode,accessCode:t.accessCode})}>${i}</a>
			</div>
			<div class="netdiskrecord-icon">
				<p>ç½‘ç›˜</p>
				<div class="netdisk-icon-img" style="background: url(${w.src.icon[t.netDiskName]}) no-repeat;background-size:100%"></div>
			</div>
			${t.url===t.topURL?`
			<div class="netdiskrecord-url">
				<p>ç½‘å€</p>
				<a href="${t.url}" target="_blank">${t.url}</a>
			</div>
			`:`
			<div class="netdiskrecord-url">
				<p>ç½‘å€</p>
				<a href="${t.url}" target="_blank">${t.url}</a>
			</div>
			<div class="netdiskrecord-top-url">
				<p>TOPç½‘å€</p>
				<a href="${t.topURL}" target="_blank">${t.topURL}</a>
			</div>
			`}
			<div class="netdiskrecord-url-title">
				<p>ç½‘å€æ ‡é¢˜</p>
				${t.title}
			</div>
			<div class="netdiskrecord-add-time">
				<p>è®°å½•æ—¶é—´</p>
				${d.formatTime(t.addTime)}
			</div>
			<div class="netdiskrecord-update-time">
				<p>æ›´æ–°æ—¶é—´</p>
				${d.formatTime(t.updateTime)}
			</div>
			<div class="netdiskrecord-functions">
				<p>åŠŸèƒ½</p>
				<button class="btn-delete" data-json='${JSON.stringify(t)}'>åˆ é™¤</button>
			</div>
		</li>`},setEvent(t){let i=this;w.view.setNetDiskUrlClickEvent(t,".whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-link a"),v.on(t,"click",".whitesevPopNetDiskHistoryMatch .pops-confirm-content .netdiskrecord-functions button.btn-delete",function(n){var u;let e=H.loading({parent:t.querySelector(".whitesevPopNetDiskHistoryMatch .pops-confirm-content ul"),content:{text:"åˆ é™¤ä¸­..."},only:!0,addIndexCSS:!1}),a=n.target,s=a.getAttribute("data-json");(u=a.closest("li"))==null||u.remove(),i.deleteNetDiskHistoryMatchData(s),e==null||e.close();let r=v.text(t.querySelector(".whitesevPopNetDiskHistoryMatch .pops-confirm-btn-other")),o=r.match(/[\d]+/gi),l=parseInt(o[o.length-1]);l--,r=r.replace(/[\d]+/gi,l.toString()),v.text(t.querySelector(".whitesevPopNetDiskHistoryMatch .pops-confirm-btn-other"),r);let c=i.getNetDiskHistoryMatchData();c=i.orderNetDiskHistoryMatchData(c),i.dataPaging.refresh(c),i.pageChangeCallBack(c,i.dataPaging.CONFIG.currentPage);});},pageChangeCallBack(t,i){let n=(i-1)*10,e="";for(let a=0;a<10&&t[n];a++){e+=this.getTableHTML(t[n]);n++;}w.Alias.historyAlias.$shadowRoot.querySelectorAll(".whitesevPopNetDiskHistoryMatch .netdiskrecord-table ul li").forEach(a=>a.remove()),v.append(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-table ul"),e);},setDataPaging(t){let i=this,n=new En({data:t,pageCount:10,pageStep:J.isPhone()?2:4,currentPage:1,pageChangeCallBack:function(e){i.pageChangeCallBack(t,e);}});this.dataPaging=n,n.addCSS(w.Alias.historyAlias.$shadowRoot),n.append(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-page"));},setSearchEvent(){let t=!1,i,n=this;function e(){if(t)return;t=!0,i=H.loading({parent:w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .pops-confirm-content ul"),content:{text:"æœç´¢ä¸­..."},only:!0,addIndexCSS:!1});let a=w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-search input").value.trim(),s=n.getNetDiskHistoryMatchData();if(s=n.orderNetDiskHistoryMatchData(s),a===""){let o="";s.forEach((l,c)=>{c>9||(o+=n.getTableHTML(l));}),w.Alias.historyAlias.$shadowRoot.querySelectorAll(".whitesevPopNetDiskHistoryMatch .netdiskrecord-table ul li").forEach(l=>l.remove()),v.append(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-table ul"),o),i==null||i.close(),t=!1,n.setDataPaging(s);return}let r="";s.forEach(o=>{(b.handleLinkShow(o.netDiskName,o.netDiskIndex,o.shareCode,o.accessCode,o.matchText).match(new RegExp(a,"ig"))||o.url.match(new RegExp(a,"ig"))||o.topURL.match(new RegExp(a,"ig"))||o.title.match(new RegExp(a,"ig")))&&(r+=n.getTableHTML(o));}),v.remove(w.Alias.historyAlias.$shadowRoot.querySelectorAll(".whitesevPopNetDiskHistoryMatch .netdiskrecord-table ul li")),v.append(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-table ul"),r),v.remove(w.Alias.historyAlias.$shadowRoot.querySelectorAll(".whitesevPopNetDiskHistoryMatch .netdiskrecord-page > *")),i==null||i.close(),i=void 0,t=!1;}v.listenKeyboard(w.Alias.historyAlias.$shadowRoot.querySelector(".whitesevPopNetDiskHistoryMatch .netdiskrecord-search input"),"keypress",a=>{a==="Enter"&&e();});},orderNetDiskHistoryMatchData(t){let i=g.historyMatch["netdisk-history-match-ordering-rule"].value,n=i.indexOf("é™åº")!==-1,e=i.indexOf("è®°å½•æ—¶é—´")!==-1?"addTime":"updateTime";return d.sortListByProperty(t,a=>a[e],n),t},setNetDiskHistoryMatchData(t,i,n,e,a){if(!g.historyMatch.saveMatchNetDisk.value)return;let s=this.getNetDiskHistoryMatchData();for(let o=0;o<s.length;o++){const l=s[o];if(l.url===window.location.href&&l.topURL===top.window.location.href&&l.netDiskName===t&&n.startsWith(l.shareCode)&&l.netDiskIndex===i){if(l.matchText!==a){h.success(["åŒ¹é…å†å²è®°å½• -> è®¾ç½®æ–°çš„matchText",[a]]),s[o].matchText=a,s[o].updateTime=Date.now(),s[o].title&&(s[o].title=document.title),$(this.storageKey,s);return}if(l.accessCode!==e){h.success("åŒ¹é…å†å²è®°å½• -> ä¿®æ”¹accessCode"),s[o].accessCode=e,s[o].updateTime=Date.now(),s[o].title&&(s[o].title=document.title),$(this.storageKey,s);return}if(l.accessCode===e)return}}h.success("åŒ¹é…å†å²è®°å½• -> å¢åŠ æ–°çš„");let r=Date.now();s=[...s,{url:window.location.href,topURL:top.window.location.href,netDiskName:t,netDiskIndex:i,shareCode:n,accessCode:e,addTime:r,updateTime:r,title:document.title||top.document.title,matchText:a}],$(this.storageKey,s);},getNetDiskHistoryMatchData(){let t=O(this.storageKey);return t==null&&(t=[],$(this.storageKey,t)),t},checkAndRepairLocalData(){let t=0,i=O(this.storageKey);if(Array.isArray(i))for(let n=0;n<i.length;n++){const e=i[n];typeof e.matchText!="string"&&(e.matchText="",t++);}else i=[];return $(this.storageKey,i),{count:i.length,repairCount:t}},deleteNetDiskHistoryMatchData(t){let i=!1,n=this.getNetDiskHistoryMatchData();for(let e=0;e<n.length;e++)if(JSON.stringify(n[e])===t){h.success(["åˆ é™¤ ===> ",n[e]]),n.splice(e,1),i=!0;break}return i&&$(this.storageKey,n),i},clearNetDiskHistoryMatchData(){$(this.storageKey,[]);}},w={Alias:{uiLinkAlias:void 0,historyAlias:void 0,settingAlias:void 0},isMatchedNetDiskIconMap:new Set,defaultForbiddenScroll:!1,popsStyle:ut,src:{icon:{},hasIcon(t){return Reflect.has(this.icon,t)},addIcon(t,i){return this.hasIcon(t)?(h.warn("å›¾æ ‡å­—å…¸ä¸­å·²å­˜åœ¨è¯¥iconï¼š"+t),!1):Reflect.set(this.icon,t,i)}},suspension:bn,view:he,staticView:Rn,newAccessCodeView:An,netDiskHistoryMatch:Dn,matchPasteText:_n,get websiteRule(){return ce},setGlobalRightClickMenu(t){w.view.registerContextMenu(t,void 0,[{text:"è®¾ç½®",callback(){h.info("æ‰“å¼€-è®¾ç½®"),Ue.show();}},{text:"å†å²åŒ¹é…è®°å½•",callback(){h.info("æ‰“å¼€-å†å²åŒ¹é…è®°å½•"),w.netDiskHistoryMatch.show();}},{text:"è‡ªå®šä¹‰è§„åˆ™",callback(){h.info("æ‰“å¼€-è‡ªå®šä¹‰è§„åˆ™"),Ne.show(!1);}},{text:"ç½‘ç«™è§„åˆ™",callback(){h.info("æ‰“å¼€-ç½‘ç«™è§„åˆ™"),ce.show();}},{text:"ä¸»åŠ¨è¯†åˆ«æ–‡æœ¬",callback(){h.info("æ‰“å¼€-ä¸»åŠ¨è¯†åˆ«æ–‡æœ¬"),w.matchPasteText.show();}}]);},setRightClickMenu(t,i,n){w.view.registerContextMenu(t,i,[{text:"å¤åˆ¶é“¾æ¥",callback:function(e,a){let s=a.target;const{netDiskName:r,netDiskIndex:o,shareCode:l,accessCode:c}=he.praseElementAttributeRuleInfo(s);re.copy(r,o,l,c);}},{text:"è®¿é—®é“¾æ¥",callback:function(e,a){let s=a.target;const{netDiskName:r,netDiskIndex:o,shareCode:l,accessCode:c}=he.praseElementAttributeRuleInfo(s);let u=Z.getBlankUrl(r,o,l,c);re.openBlank(u,r,o,l,c);}},{text:"ä¿®æ”¹è®¿é—®ç ",callback:function(e,a){let s=a.target;const{netDiskName:r,netDiskIndex:o,shareCode:l,accessCode:c}=he.praseElementAttributeRuleInfo(s);function u(m){let k=new Date().getTime(),x=O(w.netDiskHistoryMatch.storageKey),A=!1;x.forEach(N=>{if(N.netDiskName===r&&N.netDiskIndex===o&&N.shareCode===l&&N.accessCode===c){N=d.assign(N,{accessCode:m,updateTime:k}),h.success(["æˆåŠŸæ‰¾åˆ°é¡¹",N]),A=!0;return}}),A?($(w.netDiskHistoryMatch.storageKey,x),s.closest("li").querySelector(".netdiskrecord-update-time").lastChild.textContent=d.formatTime(k),s.setAttribute("data-accesscode",m),f.success(`
                                <div style="text-align: left;">æ—§: ${c}</div>
                                <div style="text-align: left;">æ–°: ${m}</div>`,{html:!0})):f.error("ä¿®æ”¹å¤±è´¥");}function p(m){e.target.setAttribute("data-accesscode",m);let k=b.linkDict.get(r);if(k.has(l)){let x=k.get(l);k.set(l,b.getLinkDickObj(m,o,!0,x.matchText)),f.success(`
                                <div style="text-align: left;">æ—§: ${c}</div>
                                <div style="text-align: left;">æ–°: ${m}</div>`,{html:!0});}else f.error("è¯¥è®¿é—®ç ä¸åœ¨å·²è·å–çš„å­—å…¸ä¸­ï¼š"+l);}w.newAccessCodeView(this.text,r,o,l,c,m=>{n?u(m):p(m);});}}]);}},H={alert(t,i){return t=this.handleDetails(t,i),J.alert(t)},confirm(t,i){return t=this.handleDetails(t,i),J.confirm(t)},loading(t){return typeof t.animation>"u"&&(t.animation=g.pops.popsAnimation.value),typeof t.forbiddenScroll>"u"&&(t.forbiddenScroll=w.defaultForbiddenScroll),J.loading(t)},prompt(t,i){return t=this.handleDetails(t,i),J.prompt(t)},folder(t,i){return t=this.handleDetails(t,i),t.sort={name:g.popsFolder["pops-folder-sort-name"].value,isDesc:g.popsFolder["pops-folder-sort-is-desc"].value,callback(n,e,a,s){g.popsFolder["pops-folder-sort-name"].value=a,g.popsFolder["pops-folder-sort-is-desc"].value=s;}},J.folder(t)},panel(t,i){return t=this.handleDetails(t,i),J.panel(t)},rightClickMenu(t){return t=this.handleDetails(t),J.rightClickMenu(t)},handleDetails(t,i){if(t=Object.assign({animation:g.pops.popsAnimation.value,drag:g.pops.pcDrag.value,dragLimit:g.pops.pcDragLimit.value,forbiddenScroll:w.defaultForbiddenScroll},t),i!=null)if(J.isPhone()){let n=typeof i.Mobile.width=="function"?i.Mobile.width():i.Mobile.width,e=typeof i.Mobile.height=="function"?i.Mobile.height():i.Mobile.height;t.width=n,t.height=e;}else {let n=typeof i.PC.width=="function"?i.PC.width():i.PC.width,e=typeof i.PC.height=="function"?i.PC.height():i.PC.height;t.width=n,t.height=e;}if(t.mask==null&&(t.mask={}),typeof t.mask.enable!="boolean"&&(t.mask.enable=!0),t.mask.clickEvent==null&&(t.mask.clickEvent={}),typeof t.mask.clickEvent.toClose!="boolean"&&(t.mask.clickEvent.toClose=g.pops.clickMaskToCloseDialog.value),g.pops.popsAcrylic.value){let n=`
            .pops {
                --acrylic-opacity: 0.7;
                --acrylic-color: rgba(232, 232, 232, var(--acrylic-opacity));
                --acrylic-blur: 30px;
                --acrylic-saturate: 125%;
                --pops-bg-opacity: var(--acrylic-opacity);
            }
            .pops {
                backdrop-filter: blur(var(--acrylic-blur)) saturate(var(--acrylic-saturate));
                background-color: var(--acrylic-color);
            }
            .pops[type-value=panel]{
                --aside-bg-color: rgba(221, 221, 221, var(--acrylic-opacity));
            }
            `;typeof t.style=="string"?t.style+=n:t.style=n;}return t.zIndex=()=>{let n=d.getMaxZIndex(10),e=J.config.InstanceUtils.getPopsMaxZIndex(n).zIndex;return d.getMaxValue(n,e)+100},t}},Mn=`/* å®¹å™¨ */\r
.website-rule-container {\r
}\r
/* æ¯ä¸€æ¡è§„åˆ™ */\r
.website-rule-item {\r
	display: flex;\r
	align-items: center;\r
	line-height: 1;\r
	font-size: 16px;\r
	padding: 4px 4px;\r
	gap: 6px;\r
}\r
/* è§„åˆ™å */\r
.website-rule-item .website-rule-name {\r
	flex: 1;\r
	white-space: nowrap;\r
	text-overflow: ellipsis;\r
	overflow: hidden;\r
}\r
/* æ“ä½œæŒ‰é’® */\r
.website-rule-item .website-controls {\r
	display: flex;\r
	align-items: center;\r
	text-overflow: ellipsis;\r
	overflow: hidden;\r
	white-space: nowrap;\r
	gap: 8px;\r
	padding: 0px 4px;\r
}\r
/* ç¼–è¾‘å’Œåˆ é™¤æŒ‰é’® */\r
.website-rule-item .website-rule-edit,\r
.website-rule-item .website-rule-delete {\r
	width: 16px;\r
	height: 16px;\r
	cursor: pointer;\r
}\r
/* å¯ç”¨æŒ‰é’® */\r
.website-rule-item .website-rule-enable {\r
}\r
/* ç¼–è¾‘æŒ‰é’® */\r
.website-rule-item .website-rule-edit {\r
}\r
/* åˆ é™¤æŒ‰é’® */\r
.website-rule-item .website-rule-delete {\r
}\r
`,Ie=function(t,i,n,e,a,s,r,o,l){return {text:t,type:"button",description:i,attributes:{},props:{},buttonIcon:e,buttonIsRightIcon:a,buttonIconIsLoading:s,buttonType:r,buttonText:n,callback(u){typeof o=="function"&&o(u);},afterAddToUListCallBack:l}};function Fe(t){if(t===null||typeof t!="object")return t;let i=Array.isArray(t)?[]:{};for(let n in t)t.hasOwnProperty(n)&&(i[n]=Fe(t[n]));return i}let Ln=[{a:1},{b:2}];Fe(Ln);const He={show(t,i,n){function e(P){return {get(B,_){let M=q.getRule(P);return Reflect.get(M.data,B)??_},set(B,_){let M=q.getRule(P);Reflect.set(M.data,B,_),q.updateRule(M);}}}function a(P){return {get(B,_){let M=q.getRule(P);return Reflect.get(M,B)??_},set(B,_){q.updateRuleValue(o.uuid,B,_);}}}function s(){if(i==null&&q.deleteRule(o.uuid),n==null)ce.updateRuleContaienrElement(t);else {let P=q.getRule(o.uuid);ce.updateRuleItemElement(P,n,t);}}let r=H.confirm({title:{text:i==null?"æ·»åŠ è§„åˆ™":"ç¼–è¾‘è§„åˆ™",position:"center"},content:{text:`
                    <ul class="website-rule-container">
                    </ul>
                    `,html:!0},btn:{close:{enable:!0,callback(P,B){r.close(),s();}},cancel:{enable:!0,text:"å–æ¶ˆ",callback(P,B){r.close(),s();}},ok:{enable:!0,text:"ç¡®å®š",callback(P,B){var M;let _=q.getRule(o.uuid);if(((M=_.name)==null?void 0:M.trim())===""){f.error("è§„åˆ™åç§°ä¸èƒ½ä¸ºç©º");return}if(_.url.trim()===""){f.error("åŒ¹é…ç½‘å€ä¸èƒ½ä¸ºç©º");return}else try{new RegExp(_.url);}catch(z){h.error(z),f.error("åŒ¹é…ç½‘å€ä¸èƒ½è¢«æ­£ç¡®è§£æä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼š"+z.message,{timeout:5e3});return}r.close(),i==null?ce.appendRuleItemElement(t,_):ce.updateRuleItemElement(_,n,t);}}},mask:{clickEvent:{toClose:!1,toHide:!1}},style:`
                ${J.config.cssText.panelCSS}
                
                .website-rule-container {
                    
                }
                .website-rule-container li{
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    padding: 5px 20px;
                }
                .pops-panel-item-left-main-text{
                    white-space: nowrap;
                }
                .pops-panel-item-right-text{
                    padding-left: 30px;
                }
                .pops-panel-item-right-text,
                .pops-panel-item-right-main-text{
                    text-overflow: ellipsis;
                    overflow: hidden;
                    white-space: nowrap;
                }
                `},w.popsStyle.websiteEditRuleView),o=i??{enable:!0,uuid:d.generateUUID(),name:"",url:"",data:{}};i==null&&q.addRule(o);let l=J.config.panelHandleContentUtils(),c=r.$shadowRoot.querySelector(".website-rule-container"),u=v.createElement("li",{innerHTML:`
                <div class="pops-panel-item-left-text">
                    <p class="pops-panel-item-left-main-text">UUID</p>
                </div>
                <div class="pops-panel-item-right-text">
                    <p class="pops-panel-item-right-main-text">${o.uuid}</p>
                </div>
                `},{"data-key":"uuid","data-default-value":o.uuid});c.appendChild(u);let p=U("å¯ç”¨","enable",!0,void 0,void 0,void 0);Reflect.set(p.props,W,a(o.uuid));let m=l.createSectionContainerItem_switch(p);c.appendChild(m);let k=be("è§„åˆ™åç§°","name","","",void 0,void 0,void 0);Reflect.set(k.props,W,a(o.uuid));let x=l.createSectionContainerItem_input(k);c.appendChild(x);let A=be("åŒ¹é…ç½‘å€","url","","",void 0,void 0,void 0);Reflect.set(A.props,W,a(o.uuid));let N=l.createSectionContainerItem_input(A);c.appendChild(N);let D=Ie("è¦†ç›–è®¾ç½®","","è‡ªå®šä¹‰",void 0,!1,!1,"primary",P=>{let B=Y.getPanelContentConfig().concat(Le.getRulePanelContent()),_=Fe(B);console.log(_);function M(z){z.forEach(E=>{if(typeof(E==null?void 0:E.props)=="object"&&Reflect.has(E.props,W)){let ne=e(o.uuid);Reflect.set(E.props,W,ne);}let ie=E.forms;ie&&Array.isArray(ie)&&M(ie);});}for(let z=0;z<_.length;z++){let E=_[z];if(!E.forms)continue;if(typeof E.afterRender=="function"&&(E!=null&&E.id.toString().startsWith("netdisk-panel-config-"))&&(E.afterRender=ne=>{let ae=ne.asideConfig.attributes["data-key"],me=L.function.enable(ae);ne.$asideLiElement.setAttribute("data-function-enable",q.getRuleDataValue(o.uuid,me,!0));}),typeof E.attributes=="object"&&E.forms!=null&&oe in E.attributes){let ne=E.attributes[oe],ae=U("å¯ç”¨",De.features.customAccessCodeEnable(ne),!1,void 0,"å¯ç”¨åå°†å…è®¸æ‰§è¡Œä¸‹é¢çš„åŠŸèƒ½",void 0);Reflect.set(ae.props,W,e(o.uuid));let me=be("è‡ªå®šä¹‰è®¿é—®ç ",De.features.customAccessCode(ne),"","è®©è·å–çš„åˆ°çš„é“¾æ¥çš„è®¿é—®ç éƒ½ä¸ºè‡ªå®šä¹‰çš„è®¿é—®ç ",void 0,"è¯·è¾“å…¥è‡ªå®šä¹‰è®¿é—®ç ",!1,!1);Reflect.set(me.props,W,e(o.uuid));let Ce={text:"é¢å¤–åŠŸèƒ½",type:"forms",forms:[ae,me]};E.forms.length?E.forms.splice(1,0,Ce):E.forms.push(Ce);}let ie=E.forms;ie&&Array.isArray(ie)&&M(ie);}H.panel({title:{text:"è¦†ç›–è®¾ç½®",position:"center"},content:_,btn:{close:{enable:!0,callback(z){z.close(),w.Alias.settingAlias=void 0;}}},mask:{clickCallBack(z){z(),w.Alias.settingAlias=void 0;}},class:"whitesevPopSetting",style:`
						${et}


						/* éšè—é¡¶éƒ¨çš„å›¾æ ‡ */
						.netdisk-custom-rule-edit,
						.netdisk-custom-rule-delete{
							display: none !important;
						}
						`},w.popsStyle.settingView);},void 0),K=l.createSectionContainerItem_button(D);c.appendChild(K);}},ce={$data:{isShowEditView:!1},show(){const t=this;this.$data.isShowEditView=!0;let i=q.getAllRule(),n=H.confirm({title:{text:"ç½‘ç«™è§„åˆ™",position:"center"},content:{text:`
                    <div class="website-rule-container">
                    </div>
                    `,html:!0},btn:{merge:!0,reverse:!1,position:"space-between",ok:{enable:!0,type:"primary",text:"æ·»åŠ ",callback(e){He.show(n.$shadowRoot);}},close:{enable:!0,callback(e){t.$data.isShowEditView=!1,e.close();}},cancel:{enable:!0,type:"default",text:"è¿‡æ»¤",callback(e,a){}},other:{enable:!0,type:"xiaomi-primary",text:`æ¸…ç©ºæ‰€æœ‰(${i.length})`,callback(e){let a=H.confirm({title:{text:"æç¤º",position:"center"},content:{text:"ç¡®å®šæ¸…ç©ºæ‰€æœ‰çš„è§„åˆ™ï¼Ÿ",html:!1},btn:{ok:{enable:!0,callback:function(s){if(h.success("æ¸…ç©ºæ‰€æœ‰"),q.deleteAllRule(),q.getAllRule().length){f.error("æ¸…ç©ºå…¨éƒ¨è§„åˆ™å¤±è´¥");return}else f.success("å·²æ¸…ç©ºå…¨éƒ¨è§„åˆ™");t.updateDeleteAllBtnText(n.$shadowRoot),t.clearContent(n.$shadowRoot),a.close();}},cancel:{text:"å–æ¶ˆ",enable:!0}}});}}},mask:{clickCallBack(e,a){t.$data.isShowEditView=!1,e();}},class:"pops-website-rule",style:`
				${J.config.cssText.panelCSS}

				${Mn}
				`},w.popsStyle.websiteRuleView);this.updateRuleContaienrElement(n.$shadowRoot);},parseElement(t){let i=t.querySelector(".website-rule-container"),n=t.querySelector(".pops-confirm-btn button.pops-confirm-btn-other");return {$container:i,$deleteBtn:n}},parseItemElement(t){let i=t.querySelector(".website-rule-enable .pops-panel-switch"),n=t.querySelector(".website-rule-enable .pops-panel-switch__input"),e=t.querySelector(".website-rule-enable .pops-panel-switch__core"),a=t.querySelector(".website-rule-edit"),s=t.querySelector(".website-rule-delete");return {$enableSwitch:i,$enableSwitchInput:n,$enableSwitchCore:e,$edit:a,$delete:s}},createRuleItemElement(t,i){let n=v.createElement("div",{className:"website-rule-item",innerHTML:`
			<div class="website-rule-name">${t.name??t.url}</div>
			<div class="website-controls">
				<div class="website-rule-enable">
					<div class="pops-panel-switch">
						<input class="pops-panel-switch__input" type="checkbox">
						<span class="pops-panel-switch__core">
							<div class="pops-panel-switch__action">
							</div>
						</span>
					</div>
				</div>
				<div class="website-rule-edit">
					${J.config.iconSVG.edit}
				</div>
				<div class="website-rule-delete">
					${J.config.iconSVG.delete}
				</div>
			</div>
			`});n.setAttribute("data-uuid",t.uuid);let e="pops-panel-switch-is-checked";const{$enableSwitch:a,$enableSwitchCore:s,$enableSwitchInput:r,$delete:o,$edit:l}=this.parseItemElement(n);return v.on(s,"click",c=>{let u=!1;a.classList.contains(e)?(a.classList.remove(e),u=!1):(a.classList.add(e),u=!0),r.checked=u,t.enable=u,q.updateRule(t);}),t.enable&&a.classList.add(e),v.on(l,"click",c=>{d.preventEvent(c),He.show(i,t,n);}),v.on(o,"click",c=>{d.preventEvent(c);let u=H.confirm({title:{text:"æç¤º",position:"center"},content:{text:"ç¡®å®šåˆ é™¤è¯¥è§„åˆ™ï¼Ÿ",html:!1},btn:{ok:{enable:!0,callback:function(p){h.success("åˆ é™¤è§„åˆ™"),q.deleteRule(t.uuid)?(f.success("å·²åˆ é™¤è§„åˆ™"),n.remove(),ce.updateDeleteAllBtnText(i),u.close()):f.error("åˆ é™¤è§„åˆ™å¤±è´¥");}},cancel:{text:"å–æ¶ˆ",enable:!0}}});}),n},appendRuleItemElement(t,i){const{$container:n}=this.parseElement(t);if(Array.isArray(i))for(let e=0;e<i.length;e++){const a=i[e];n.appendChild(this.createRuleItemElement(a,t));}else n.appendChild(this.createRuleItemElement(i,t));this.updateDeleteAllBtnText(t);},updateRuleContaienrElement(t){this.clearContent(t),this.parseElement(t);let i=q.getAllRule();this.appendRuleItemElement(t,i),this.updateDeleteAllBtnText(t);},updateRuleItemElement(t,i,n){let e=this.createRuleItemElement(t,n);i.after(e),i.remove();},clearContent(t){const{$container:i}=this.parseElement(t);i.innerHTML="";},setDeleteBtnText(t,i,n=!1){const{$deleteBtn:e}=this.parseElement(t);n?e.innerHTML=i:e.innerText=i;},updateDeleteAllBtnText(t){let i=q.getAllRule();this.setDeleteBtnText(t,`æ¸…ç©ºæ‰€æœ‰(${i.length})`);}},ge=new We("websiteRule"),Nn=(t,i,n)=>{if(ce.$data.isShowEditView)return i;let a=q.getUrlMatchedRule().find(s=>{let r=q.getRuleData(s);return Reflect.has(r,t)});return a?Reflect.get(q.getRuleData(a),t):i},Un=function(t,i,n){return {KEY:t,default:i,get value(){let e=O(t,i);return typeof n=="function"?n(t,e,i):e},set value(e){$(t,e);}}},R=function(t,i){return Un(t,i,Nn)},g={toast:{position:R("qmsg-config-position","top"),maxnums:R("qmsg-config-maxnums",3),showreverse:R("qmsg-config-showreverse",!0)},pops:{popsAnimation:R("popsAnimation","pops-anim-fadein-zoom"),clickMaskToCloseDialog:R("clickMaskToCloseDialog",!0),pcDrag:R("pcDrag",!0),pcDragLimit:R("pcDragLimit",!0),popsAcrylic:R("popsAcrylic",!1)},popsFolder:{"pops-folder-sort-name":R("pops-folder-sort-name","fileName"),"pops-folder-sort-is-desc":R("pops-folder-sort-is-desc",!1)},smallIconNavgiator:{"pops-netdisk-icon-click-event-find-sharecode":R("pops-netdisk-icon-click-event-find-sharecode",!0),"pops-netdisk-icon-click-event-find-sharecode-with-select":R("pops-netdisk-icon-click-event-find-sharecode-with-select",!0),"pops-netdisk-icon-click-event-loop-find-sharecode":R("pops-netdisk-icon-click-event-loop-find-sharecode",!0)},suspension:{size:R("size",50),opacity:R("opacity",1),"randbg-time":R("randbg-time",1500),"randbg-show-time":R("randbg-show-time",1200),"suspended-button-adsorption-edge":R("suspended-button-adsorption-edge",!1)},smallWindow:{"netdisk-ui-small-window-width":R("netdisk-ui-small-window-width",250),"netdisk-ui-small-window-max-height":R("netdisk-ui-small-window-max-height",200)},historyMatch:{"netdisk-history-match-ordering-rule":R("netdisk-history-match-ordering-rule","æŒ‰ æ›´æ–°æ—¶é—´ - é™åº"),saveMatchNetDisk:R("saveMatchNetDisk",!1)},match:{pageMatchRange:R("pageMatchRange",["innerText","innerHTML"]),depthQueryWithShadowRoot:R("depthQueryWithShadowRoot",!1),readClipboard:R("readClipboard",!1),allowMatchLocationHref:R("allowMatchLocationHref",!0),toBeMatchedWithInputElementValue:R("to-be-matched-inputElementValue",!1),toBeMatchedTextAreaElementValue:R("to-be-matched-textAreaElementValue",!1),delaytime:R("delaytime",.8),isAddedNodesToMatch:R("isAddedNodesToMatch",!1),"mutationObserver-childList":R("mutationObserver-childList",!0),"mutationObserver-characterData":R("mutationObserver-characterData",!0),"mutationObserver-subtree":R("mutationObserver-subtree",!0)},function:{"netdisk-behavior-mode":R("netdisk-behavior-mode","suspension_smallwindow"),autoFillAccessCode:R("autoFillAccessCode",!0),getTheDirectLinkAfterRedirection:R("getTheDirectLinkAfterRedirection",!1)},aboutShareCode:{excludeIdenticalSharedCodesCoefficient:R("excludeIdenticalSharedCodesCoefficient",1),excludeIdenticalSharedCodes:R("excludeIdenticalSharedCodes",!1)}},$n="ç½‘ç›˜é“¾æ¥è¯†åˆ«",tt=!1,d=Re.noConflict(),v=j.noConflict(),J=ze,zn=CryptoJS??window.CryptoJS??X.CryptoJS,En=DataPaging??window.DataPaging??X.DataPaging,h=new d.Log(pe,X.console||ct.console);var je;const nt=((je=pe==null?void 0:pe.script)==null?void 0:je.name)||$n,In=ze.config.Utils.AnyTouch();h.config({debug:tt,logMaxCount:1e3,autoClearConsole:!0,tag:!0});f.config(Object.defineProperties({html:!0,autoClose:!0,showClose:!1},{position:{get(){return g.toast.position.value}},maxNums:{get(){return g.toast.maxnums.value}},showReverse:{get(){return g.toast.showreverse.value}},zIndex:{get(){let t=Re.getMaxZIndex(10),i=ze.config.InstanceUtils.getPopsMaxZIndex(t).zIndex;return Re.getMaxValue(t,i)+100}}}));const Fn=new d.GM_Menu({GM_getValue:O,GM_setValue:$,GM_registerMenuCommand:rt,GM_unregisterMenuCommand:ot}),C=new d.Httpx(lt);C.interceptors.request.use(t=>(dt.handle(t),t));C.interceptors.response.use(void 0,t=>(h.error(["æ‹¦æˆªå™¨-è¯·æ±‚é”™è¯¯",t]),t.type==="onabort"?f.warning("è¯·æ±‚å–æ¶ˆ"):t.type==="onerror"?f.error("è¯·æ±‚å¼‚å¸¸"):t.type==="ontimeout"?f.error("è¯·æ±‚è¶…æ—¶"):f.error("å…¶å®ƒé”™è¯¯"),t));C.config({logDetails:tt,headers:{"User-Agent":d.getRandomPCUA()}});X.Object.defineProperty,X.Function.prototype.apply,X.Function.prototype.call,X.Element.prototype.appendChild,X.setTimeout;const Ze=d.addStyle.bind(d),we=function(t,i,n,e,a,s="default",r){let o=a,l=()=>r.getShowText(n,o),c=Ie(t,i,l,"keyboard",!1,!1,s,async u=>{var k;let m=(k=u.target.closest(".pops-panel-button"))==null?void 0:k.querySelector("span");if(r.isWaitPress){f.warning("è¯·å…ˆæ‰§è¡Œå½“å‰çš„å½•å…¥æ“ä½œ");return}if(r.hasOptionValue(n))r.emptyOption(n),f.success("æ¸…ç©ºå¿«æ·é”®");else {let x=f.loading("è¯·æŒ‰ä¸‹å¿«æ·é”®...",{showClose:!0}),{status:A,option:N,key:D}=await r.enterShortcutKeys(n);x.close(),A?(h.success(["æˆåŠŸå½•å…¥å¿«æ·é”®",N]),f.success("æˆåŠŸå½•å…¥")):f.error(`å¿«æ·é”® ${r.translateKeyboardValueToButtonText(N)} å·²è¢« ${D} å ç”¨`);}m.innerHTML=l();});return c.attributes={},Reflect.set(c.attributes,Xe,()=>!1),c};class Pn{constructor(i){I(this,"key","short-cut");I(this,"isWaitPress",!1);typeof i=="string"&&(this.key=i);}initConfig(i,n){this.hasOption(i)||this.setOption(i,n);}getStorageKey(){return this.key}getLocalAllOptions(){return O(this.key,[])}hasOption(i){return !!this.getLocalAllOptions().find(a=>a.key===i)}hasOptionValue(i){if(this.hasOption(i)){let n=this.getOption(i);return (n==null?void 0:n.value)!=null}else return !1}getOption(i,n){return this.getLocalAllOptions().find(s=>s.key===i)??n}setOption(i,n){let e=this.getLocalAllOptions(),a=e.findIndex(s=>s.key===i);a==-1?e.push({key:i,value:n}):Reflect.set(e[a],"value",n),$(this.key,e);}emptyOption(i){let n=!1,e=this.getLocalAllOptions(),a=e.findIndex(s=>s.key===i);return a!==-1&&(e[a].value=null,n=!0),$(this.key,e),n}deleteOption(i){let n=!1,e=this.getLocalAllOptions(),a=e.findIndex(s=>s.key===i);return a!==-1&&(e.splice(a,1),n=!0),$(this.key,e),n}translateKeyboardValueToButtonText(i){let n="";return i.ohterCodeList.forEach(e=>{n+=d.stringTitleToUpperCase(e,!0)+" + ";}),n+=d.stringTitleToUpperCase(i.keyName),n}getShowText(i,n){if(this.hasOption(i)){let e=this.getOption(i);return e.value==null?n:this.translateKeyboardValueToButtonText(e.value)}else return n}async enterShortcutKeys(i){return new Promise(n=>{this.isWaitPress=!0;let e=v.listenKeyboard(window,"keyup",(a,s,r)=>{const o={keyName:a,keyValue:s,ohterCodeList:r},l=JSON.stringify(o),c=this.getLocalAllOptions();for(let u=0;u<c.length;u++){let p=c[u];if(p.key===i)continue;const m=JSON.stringify(p.value);let k=!1;if(p.value!=null&&l===m&&(k=!0),k){this.isWaitPress=!1,e.removeListen(),n({status:!1,key:p.key,option:o});return}}this.setOption(i,o),this.isWaitPress=!1,e.removeListen(),n({status:!0,key:i,option:o});});})}initGlobalKeyboardListener(i){let n=this.getLocalAllOptions();if(!n.length){h.warn("æ²¡æœ‰è®¾ç½®å¿«æ·é”®");return}let e=this;function a(o,l){v.listenKeyboard(o,"keydown",(c,u,p)=>{if(e.isWaitPress)return;n=e.getLocalAllOptions();let m=n.findIndex(k=>{let x=k.value,A={keyName:c,keyValue:u,ohterCodeList:p};if(JSON.stringify(x)===JSON.stringify(A))return k});if(m!=-1){let k=n[m];h.info(["è°ƒç”¨å¿«æ·é”®",k]),k.key in l&&l[k.key].callback();}});}let s={},r={};Object.keys(i).forEach(o=>{let l=i[o];(l.target==null||typeof l.target=="string"&&l.target==="")&&(l.target="window"),l.target==="window"?Reflect.set(s,o,l):Reflect.set(r,o,l);}),a(window,s),v.ready(()=>{Object.keys(r).forEach(async o=>{let l=r[o];if(typeof l.target=="string")d.waitNode(l.target,1e4).then(c=>{if(!c)return;let u={};Reflect.set(u,o,l),a(c,u);});else if(typeof l.target=="function"){let c=await l.target();if(c==null)return;let u={};Reflect.set(u,o,l),a(c,u);}else {let c={};Reflect.set(c,o,l),a(l.target,c);}});});}}const ue={shortCut:new Pn("GM_shortcut"),init(){this.shortCut.initGlobalKeyboardListener(this.getShortCutMap());},getShortCutMap(){return {"netdisk-keyboard-open-setting":{target:"window",callback:()=>{h.info("ã€æ‰“å¼€ã€‘âš™ è®¾ç½®"),Ue.show();}},"netdisk-keyboard-open-history-matching-records":{target:"window",callback:()=>{h.info("ã€æ‰“å¼€ã€‘âš™ å†å²åŒ¹é…è®°å½•"),w.netDiskHistoryMatch.show();}},"netdisk-keyboard-open-user-rule":{target:"window",callback:()=>{h.info("ã€æ‰“å¼€ã€‘âš™ ç”¨æˆ·è‡ªå®šä¹‰è§„åˆ™"),Ne.show(!1);}},"netdisk-keyboard-open-proactively-recognize-text":{target:"window",callback:()=>{h.info("ã€æ‰“å¼€ã€‘âš™ ä¸»åŠ¨è¯†åˆ«æ–‡æœ¬"),w.matchPasteText.show();}}}}},Vn=function(t,i,n,e,a,s,r="è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªé€‰é¡¹",o){let l=[];typeof e=="function"?l=e():l=e;let c={text:t,type:"select-multiple",description:s,placeholder:r,attributes:{},props:{},getValue(){return this.props[W].get(i,n)},selectConfirmDialogDetails:o,callback(u){let p=[];u.forEach(m=>{p.push(m.value);}),this.props[W].set(i,p),h.info(["å¤šé€‰-é€‰æ‹©ï¼š",p]);},data:l};return Reflect.set(c.attributes,oe,i),Reflect.set(c.attributes,fe,n),Reflect.set(c.props,W,{get(u,p){return O(u,p)},set(u,p){$(u,p);}}),c},On={id:"netdisk-panel-config-all-setting",title:"æ€»è®¾ç½®",isDefault:!0,forms:[{type:"forms",text:"",forms:[{type:"deepMenu",text:"Toast",forms:[{type:"forms",text:"",className:"netdisk-panel-forms-toast",forms:[le("ä½ç½®",g.toast.position.KEY,g.toast.position.default,[{value:"topleft",text:"å·¦ä¸Šè§’"},{value:"top",text:"é¡¶éƒ¨"},{value:"topright",text:"å³ä¸Šè§’"},{value:"left",text:"å·¦è¾¹"},{value:"center",text:"ä¸­é—´"},{value:"right",text:"å³è¾¹"},{value:"bottomleft",text:"å·¦ä¸‹è§’"},{value:"bottom",text:"åº•éƒ¨"},{value:"bottomright",text:"å³ä¸‹è§’"}],void 0,`Toastæ˜¾ç¤ºåœ¨ä¹å®«æ ¼çš„ä½ç½®ï¼Œé»˜è®¤: ${g.toast.position.default}`),le("åŒæ—¶æœ€å¤šæ˜¾ç¤ºçš„æ•°é‡",g.toast.maxnums.KEY,g.toast.maxnums.default,[{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"}],void 0,`é»˜è®¤: ${g.toast.showreverse.default}`),U("é€†åºå¼¹å‡º",g.toast.showreverse.KEY,g.toast.showreverse.value,void 0,"é»˜è®¤æ˜¯è‡ªä¸Šå¾€ä¸‹æ˜¾ç¤ºToastï¼Œé€†åºåˆ™æ˜¯è‡ªä¸‹å¾€ä¸Šæ˜¾ç¤ºToast")]}]},{type:"deepMenu",text:"å¼¹çª—",forms:[{className:"netdisk-panel-forms-pops",type:"forms",text:"",forms:[le("åŠ¨ç”»",g.pops.popsAnimation.KEY,g.pops.popsAnimation.default,[{value:"",text:"æ— "},{value:"pops-anim-spread",text:"spread"},{value:"pops-anim-shake",text:"shake"},{value:"pops-anim-rolling-left",text:"rolling-left"},{value:"pops-anim-rolling-right",text:"rolling-right"},{value:"pops-anim-slide-top",text:"slide-top"},{value:"pops-anim-slide-bottom",text:"slide-bottom"},{value:"pops-anim-slide-left",text:"slide-left"},{value:"pops-anim-slide-right",text:"slide-right"},{value:"pops-anim-fadein",text:"fadein"},{value:"pops-anim-fadein-zoom",text:"fadein-zoom"},{value:"pops-anim-fadein-alert",text:"fadein-alert"},{value:"pops-anim-don",text:"don"},{value:"pops-anim-roll",text:"roll"},{value:"pops-anim-sandra",text:"sandra"},{value:"pops-anim-gather",text:"gather"}],void 0,`æ˜¾ç¤º/å…³é—­çš„åŠ¨ç”»æ•ˆæœï¼Œé»˜è®¤: ${g.pops.popsAnimation.default}`),U("ç‚¹å‡»å¼¹çª—é®ç½©å±‚å…³é—­å¼¹çª—",g.pops.clickMaskToCloseDialog.KEY,g.pops.clickMaskToCloseDialog.default,void 0,"ç‚¹å‡»é®ç½©å±‚è§¦å‘å…³é—­å¼¹çª—äº‹ä»¶"),U("çª—å£æ‹–æ‹½",g.pops.pcDrag.KEY,g.pops.pcDrag.default,void 0,"é•¿æŒ‰æ ‡é¢˜æ å¯æ‹–æ‹½ç§»åŠ¨å¼¹çª—"),U("é™åˆ¶æ‹–æ‹½è·ç¦»",g.pops.pcDragLimit.KEY,g.pops.pcDragLimit.default,void 0,"åªèƒ½åœ¨æµè§ˆå™¨çš„å¯è§†çª—å£å†…æ‹–åŠ¨"),U("äºšå…‹åŠ›æ•ˆæœ",g.pops.popsAcrylic.KEY,g.pops.popsAcrylic.default,void 0,"")]}]},{type:"deepMenu",text:"æ–‡ä»¶å¼¹çª—",forms:[{type:"forms",text:"",className:"netdisk-panel-forms-pops-folder",forms:[le("æ’åºå",g.popsFolder["pops-folder-sort-name"].KEY,g.popsFolder["pops-folder-sort-name"].default,[{value:"fileName",text:"æ–‡ä»¶å"},{value:"latestTime",text:"ä¿®æ”¹æ—¶é—´"},{value:"fileSize",text:"å¤§å°"}],void 0,"å½“å‰çš„è§„åˆ™"),le("æ’åºè§„åˆ™",g.popsFolder["pops-folder-sort-is-desc"].KEY,g.popsFolder["pops-folder-sort-is-desc"].default,[{value:!1,text:"å‡åº"},{value:!0,text:"é™åº"}],void 0,"å½“å‰çš„è§„åˆ™")]}]},{type:"deepMenu",text:"å°å›¾æ ‡å¯¼èˆª",forms:[{type:"forms",text:"",forms:[U("ç‚¹å‡»å®šä½åˆ†äº«ç ",g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode"].KEY,g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode"].default,void 0,"è‡ªåŠ¨æ»šåŠ¨é¡µé¢è‡³åŒ…å«åˆ†äº«ç çš„å…ƒç´ "),U("é€‰ä¸­åˆ†äº«ç ",g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode-with-select"].KEY,g.smallIconNavgiator["pops-netdisk-icon-click-event-find-sharecode-with-select"].default,void 0,"ä½¿ç”¨å…‰æ ‡é€‰ä¸­åˆ†äº«ç /å…ƒç´ "),U("å¾ªç¯å®šä½",g.smallIconNavgiator["pops-netdisk-icon-click-event-loop-find-sharecode"].KEY,g.smallIconNavgiator["pops-netdisk-icon-click-event-loop-find-sharecode"].default,void 0,"å…³é—­åˆ™æ˜¯æ¯ä¸€ä¸ªå…ƒç´ åªå®šä½ä¸€æ¬¡")]}]},{type:"deepMenu",text:"æ‚¬æµ®æŒ‰é’®",forms:[{type:"forms",text:"",forms:[te("å¤§å°",g.suspension.size.KEY,g.suspension.size.default,15,250,(t,i)=>{g.suspension.size.value=parseInt(i.toString()),w.suspension.isShow&&(v.css(w.suspension.suspensionNode,{width:g.suspension.size.value,height:g.suspension.size.value}),w.suspension.setSuspensionPosition());},t=>`${t}px`,"æ‚¬æµ®æŒ‰é’®çš„å¤§å°ï¼Œé»˜è®¤: "+g.suspension.size.default),te("é€æ˜åº¦",g.suspension.opacity.KEY,g.suspension.opacity.default,.1,1,(t,i)=>{g.suspension.opacity.value=parseFloat(i.toString()),w.suspension.isShow&&v.css(w.suspension.suspensionNode,{opacity:g.suspension.opacity.value});},void 0,"å€¼è¶Šå°è¶Šé€æ˜ï¼Œé»˜è®¤: "+g.suspension.opacity.default,.1),te("èƒŒæ™¯è½®æ’­æ—¶é—´",g.suspension["randbg-time"].KEY,g.suspension["randbg-time"].default,0,1e4,void 0,t=>`${t}ms`,"æ·¡å…¥/æ·¡å‡ºçš„æ—¶é—´ï¼Œé»˜è®¤: "+g.suspension["randbg-time"].default+"ms",100),te("èƒŒæ™¯æ˜¾ç¤ºæ—¶é—´",g.suspension["randbg-show-time"].KEY,g.suspension["randbg-show-time"].default,0,1e4,void 0,t=>`${t}ms`,"å›¾æ ‡æ˜¾ç¤ºçš„æŒç»­æ—¶é—´ï¼Œé»˜è®¤: 1200",100),U("å¸é™„è¾¹ç¼˜",g.suspension["suspended-button-adsorption-edge"].KEY,g.suspension["suspended-button-adsorption-edge"].default,void 0,"ç§»åŠ¨æ‚¬æµ®æŒ‰é’®æ¾å¼€åè‡ªåŠ¨å¸é™„è¾¹ç¼˜")]}]},{type:"deepMenu",text:"å°çª—æ¨¡å¼",forms:[{type:"forms",text:"",className:"netdisk-panel-forms-small-window",forms:[te("å®½åº¦",g.smallWindow["netdisk-ui-small-window-width"].KEY,g.smallWindow["netdisk-ui-small-window-width"].default,50,v.width(window),void 0,t=>`${t}px`,"è®¾ç½®å°çª—å®½åº¦(px)ï¼Œé»˜è®¤: 250",1),te("é«˜åº¦",g.smallWindow["netdisk-ui-small-window-max-height"].KEY,g.smallWindow["netdisk-ui-small-window-max-height"].default,50,v.height(window),void 0,t=>`${t}px`,"è®¾ç½®å°çª—æœ€å¤§é«˜åº¦(px)ï¼Œé»˜è®¤: "+g.smallWindow["netdisk-ui-small-window-max-height"].default,1)]}]},{type:"deepMenu",text:"å†å²åŒ¹é…è®°å½•",forms:[{type:"forms",text:"",className:"netdisk-panel-history-match",forms:[le("æ’åºè§„åˆ™",g.historyMatch["netdisk-history-match-ordering-rule"].KEY,g.historyMatch["netdisk-history-match-ordering-rule"].default,[{value:"æŒ‰ è®°å½•æ—¶é—´ - å‡åº",text:"æŒ‰ è®°å½•æ—¶é—´ - å‡åº"},{value:"æŒ‰ è®°å½•æ—¶é—´ - é™åº",text:"æŒ‰ è®°å½•æ—¶é—´ - é™åº"},{value:"æŒ‰ æ›´æ–°æ—¶é—´ - å‡åº",text:"æŒ‰ æ›´æ–°æ—¶é—´ - å‡åº"},{value:"æŒ‰ æ›´æ–°æ—¶é—´ - é™åº",text:"æŒ‰ æ›´æ–°æ—¶é—´ - é™åº"}]),Ie("ä¿®å¤å­˜å‚¨è®°å½•","å¦‚æœã€åŒ¹é…è®°å½•ã€‘å¼¹çª—æ‰“ä¸å¼€ï¼Œå¯èƒ½æ˜¯å­˜å‚¨çš„æ•°æ®ç¼ºå¤±æŸäº›å­—æ®µï¼Œå¯å°è¯•ç‚¹å‡»æ­¤å¤„è¿›è¡Œä¿®å¤","ä¿®å¤",void 0,void 0,!1,"primary",()=>{try{const{count:t,repairCount:i}=w.netDiskHistoryMatch.checkAndRepairLocalData();i===0?f.info("ä¸å­˜åœ¨éœ€è¦ä¿®å¤çš„æ•°æ®"):f.success(`å…±è®¡: ${t} æ¡ï¼Œä¿®å¤${i}æ¡`);}catch(t){f.error("ä¿®å¤å¼‚å¸¸ï¼š"+t.toString());}}),U("ä¿å­˜åŒ¹é…è®°å½•",g.historyMatch.saveMatchNetDisk.KEY,g.historyMatch.saveMatchNetDisk.default,void 0,"å°†åŒ¹é…åˆ°çš„é“¾æ¥ä¿¡æ¯è¿›è¡Œæœ¬åœ°å­˜å‚¨ï¼Œå¯ç‚¹å‡»ã€æ²¹çŒ´èœå•-âš™ å†å²åŒ¹é…è®°å½•ã€‘è¿›è¡ŒæŸ¥çœ‹")]}]},{type:"deepMenu",text:"åŒ¹é…è®¾ç½®",forms:[{type:"forms",text:"æ–‡æœ¬åŒ¹é…èŒƒå›´",forms:[Vn("åŒ¹é…è§„åˆ™ç±»å‹",g.match.pageMatchRange.KEY,g.match.pageMatchRange.default,[{value:"innerText",text:"æ™®é€šæ–‡æœ¬"},{value:"innerHTML",text:"è¶…æ–‡æœ¬"}],void 0,"æ‰§è¡Œçš„æ–‡æœ¬åŒ¹é…è§„åˆ™",void 0,{height:"auto"}),U("æ·±å…¥ShadowRootè·å–åŒ¹é…æ–‡æœ¬",g.match.depthQueryWithShadowRoot.KEY,g.match.depthQueryWithShadowRoot.default,void 0,"éå†ShadowRootï¼Œè·å–åŒ¹é…çš„å†…å®¹"),U("åŒ¹é…å‰ªè´´æ¿",g.match.readClipboard.KEY,g.match.readClipboard.default,void 0,"Apiå…¼å®¹æ€§æŸ¥çœ‹ï¼š<a href='https://caniuse.com/mdn-api_permissions_permission_clipboard-read' target='_blank'>è¯»å–å‰ªè´´æ¿æƒé™ç”³è¯·</a>ã€<a href='https://caniuse.com/mdn-api_clipboard_readtext' target='_blank'>ç›´æ¥è¯»å–å‰ªè´´æ¿</a>"),U("åŒ¹é…å½“å‰URL",g.match.allowMatchLocationHref.KEY,g.match.allowMatchLocationHref.default,void 0,"æå–window.location.hrefè¿›è¡ŒåŒ¹é…"),U("åŒ¹é…inputæ ‡ç­¾çš„å†…å®¹",g.match.toBeMatchedWithInputElementValue.KEY,g.match.toBeMatchedWithInputElementValue.default,void 0,"æå–é¡µé¢ä¸­çš„&lt;input&gt;çš„å†…å®¹è¿›è¡ŒåŒ¹é…"),U("åŒ¹é…textareaæ ‡ç­¾çš„å†…å®¹",g.match.toBeMatchedTextAreaElementValue.KEY,g.match.toBeMatchedTextAreaElementValue.default,void 0,"æå–é¡µé¢ä¸­çš„&lt;textarea&gt;çš„å†…å®¹è¿›è¡ŒåŒ¹é…")]},{type:"forms",text:"é¡µé¢å†…å®¹æ”¹å˜æ—¶çš„è§‚å¯Ÿå™¨",forms:[te("åŒ¹é…é—´éš”",g.match.delaytime.KEY,g.match.delaytime.default,0,5,void 0,t=>`${t}s`,"åŒ¹é…æ–‡æœ¬å®Œæ¯•åçš„å»¶è¿Ÿxxxç§’å…è®¸ä¸‹ä¸€æ¬¡åŒ¹é…",.1),U("æ·»åŠ å…ƒç´ æ—¶è¿›è¡ŒåŒ¹é…",g.match.isAddedNodesToMatch.KEY,g.match.isAddedNodesToMatch.default,void 0,"å½“ç›‘å¬åˆ°é¡µé¢æ·»åŠ å…ƒç´ æ—¶æ‰è¿›è¡ŒåŒ¹é…æ–‡æœ¬"),U("è§‚å¯Ÿå™¨ï¼šchildList",g.match["mutationObserver-childList"].KEY,g.match["mutationObserver-childList"].default,void 0,"å­èŠ‚ç‚¹çš„å˜åŠ¨ï¼ˆæ–°å¢ã€åˆ é™¤æˆ–è€…æ›´æ”¹ï¼‰"),U("è§‚å¯Ÿå™¨ï¼šcharacterData",g.match["mutationObserver-characterData"].KEY,g.match["mutationObserver-characterData"].default,void 0,"èŠ‚ç‚¹å†…å®¹æˆ–èŠ‚ç‚¹æ–‡æœ¬çš„å˜åŠ¨"),U("è§‚å¯Ÿå™¨ï¼šsubtree",g.match["mutationObserver-subtree"].KEY,g.match["mutationObserver-subtree"].default,void 0,"æ˜¯å¦å°†è§‚å¯Ÿå™¨åº”ç”¨äºè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹")]}]},{type:"deepMenu",text:"åŠŸèƒ½",forms:[{type:"forms",text:"",className:"netdisk-panel-forms-function",forms:[le("è¡Œä¸ºæ¨¡å¼",g.function["netdisk-behavior-mode"].KEY,g.function["netdisk-behavior-mode"].default,[{text:"æ‚¬æµ®æŒ‰é’®+å°çª—",value:"suspension_smallwindow"},{text:"æ‚¬æµ®æŒ‰é’®+å¤§çª—",value:"suspension_window"},{text:"å°çª—",value:"smallwindow"}],void 0,"åŒ¹é…åˆ°é“¾æ¥æ—¶è§¦å‘çš„UIæ‰§è¡Œ"),U("è‡ªåŠ¨è¾“å…¥è®¿é—®ç ",g.function.autoFillAccessCode.KEY,g.function.autoFillAccessCode.default,void 0,"é€šè¿‡ä¸»åŠ¨ç‚¹å‡»é“¾æ¥è·³è½¬æ—¶ï¼Œä¼šè‡ªåŠ¨è¾“å…¥ç½‘ç›˜è®¿é—®ç "),U("è·å–é‡å®šå‘åçš„ç›´é“¾",g.function.getTheDirectLinkAfterRedirection.KEY,g.function.getTheDirectLinkAfterRedirection.default,void 0,"å¯¹è·å–çš„é“¾æ¥å†è¿›è¡Œä¸€æ¬¡é‡å®šå‘è·å–é“¾æ¥")]}]},{type:"deepMenu",text:"åˆ†äº«ç ç›¸å…³",forms:[{type:"forms",text:"",className:"netdisk-panel-forms-share-code",forms:[U("æ’é™¤åˆ†äº«ç ",g.aboutShareCode.excludeIdenticalSharedCodes.KEY,g.aboutShareCode.excludeIdenticalSharedCodes.default,void 0,"å¯ç”¨åä¼šæ ¹æ®ã€ç›¸åŒç³»æ•°ã€‘æ’é™¤æ‰åŒ¹é…åˆ°çš„åˆ†äº«ç "),te("ç›¸åŒç³»æ•°",g.aboutShareCode.excludeIdenticalSharedCodesCoefficient.KEY,g.aboutShareCode.excludeIdenticalSharedCodesCoefficient.default,0,1,void 0,t=>t.toString(),"ä¾‹å¦‚åˆ†äº«ç : aaaaaaaabbï¼Œå®ƒçš„ç›¸åŒç³»æ•°æ˜¯0.8ï¼Œè®¾ç½®ç›¸åŒç³»æ•°â‰¥0.8æ—¶ä¼šè¢«æ’é™¤",.01)]}]},{type:"deepMenu",text:"å¿«æ·é”®",forms:[{className:"netdisk-panel-forms-shortcut-keys",text:"",type:"forms",forms:[we("ã€æ‰“å¼€ã€‘âš™ è®¾ç½®","","netdisk-keyboard-open-setting",void 0,"æš‚æ— å¿«æ·é”®","default",ue.shortCut),we("ã€æ‰“å¼€ã€‘âš™ å†å²åŒ¹é…è®°å½•","","netdisk-keyboard-open-history-matching-records",void 0,"æš‚æ— å¿«æ·é”®","default",ue.shortCut),we("ã€æ‰“å¼€ã€‘âš™ è®¿é—®ç è§„åˆ™","","netdisk-keyboard-open-accesscode-rule",void 0,"æš‚æ— å¿«æ·é”®","default",ue.shortCut),we("ã€æ‰“å¼€ã€‘âš™ è‡ªå®šä¹‰è§„åˆ™","","netdisk-keyboard-open-user-rule",void 0,"æš‚æ— å¿«æ·é”®","default",ue.shortCut),we("ã€æ‰“å¼€ã€‘âš™ ç½‘ç«™è§„åˆ™","","netdisk-keyboard-website-rule",void 0,"æš‚æ— å¿«æ·é”®","default",ue.shortCut),we("ã€æ‰“å¼€ã€‘âš™ è¯†åˆ«æ–‡æœ¬","","netdisk-keyboard-open-proactively-recognize-text",void 0,"æš‚æ— å¿«æ·é”®","default",ue.shortCut)]}]}]}]},Y={$data:{__data:null,__oneSuccessExecMenu:null,__onceExec:null,__listenData:null,get data(){return Y.$data.__data==null&&(Y.$data.__data=new d.Dictionary),Y.$data.__data},get oneSuccessExecMenu(){return Y.$data.__oneSuccessExecMenu==null&&(Y.$data.__oneSuccessExecMenu=new d.Dictionary),Y.$data.__oneSuccessExecMenu},get onceExec(){return Y.$data.__onceExec==null&&(Y.$data.__onceExec=new d.Dictionary),Y.$data.__onceExec},get scriptName(){return nt},key:de,attributeKeyName:oe,attributeDefaultValueName:fe},$listener:{get listenData(){return Y.$data.__listenData==null&&(Y.$data.__listenData=new d.Dictionary),Y.$data.__listenData}},init(){this.initPanelDefaultValue(this.getPanelContentConfig().concat(Le.getRulePanelContent())),this.initExtensionsMenu();},isTopWindow(){return X.top===X.self},initExtensionsMenu(){this.isTopWindow()&&Fn.add([{key:"show_pops_panel_setting",text:"âš™ è®¾ç½®",autoReload:!1,isStoreValue:!1,showText(t){return t},callback:()=>{Ue.show();}},{key:"showNetDiskHistoryMatch",text:"âš™ å†å²åŒ¹é…è®°å½•",autoReload:!1,isStoreValue:!1,showText(t){return t},callback(){w.netDiskHistoryMatch.show();}},{key:"websiteRule",text:"âš™ ç½‘ç«™è§„åˆ™",autoReload:!1,isStoreValue:!1,showText(t){return t},callback(){w.websiteRule.show();}},{key:"showUserRule",text:"âš™ è‡ªå®šä¹‰è§„åˆ™",autoReload:!1,isStoreValue:!1,showText(t){return t},callback(){Ne.show(!1);}},{key:"showMatchPasteText",text:"âš™ è¯†åˆ«æ–‡æœ¬",autoReload:!1,isStoreValue:!1,showText(t){return t},callback(){w.matchPasteText.show();}}]);},initPanelDefaultValue(t){function i(e){if(!e.attributes||e.type==="button")return;let a={},s=e.attributes[oe];s!=null&&(a[s]=e.attributes[fe]);let r=e.attributes[Xe];if(typeof r=="function"){let c=r();if(typeof c=="boolean"&&!c)return}let o=e.attributes[nn];o&&typeof o=="object"&&Object.assign(a,o);let l=Object.keys(a);if(!l.length){h.warn(["è¯·å…ˆé…ç½®é”®",e]);return}l.forEach(c=>{let u=a[c];O(c)==null&&$(c,u);});}function n(e){for(let a=0;a<e.length;a++){let s=e[a];i(s);let r=s.forms;r&&Array.isArray(r)&&n(r);}}for(let e=0;e<t.length;e++){let a=t[e];if(!a.forms)continue;let s=a.forms;s&&Array.isArray(s)&&n(s);}},setValue(t,i){let n=O(de,{}),e=n[t];n[t]=i,$(de,n),this.$listener.listenData.has(t)&&this.$listener.listenData.get(t).callback(t,e,i);},getValue(t,i){let e=O(de,{})[t];return e??(this.$data.data.has(t)?this.$data.data.get(t):i)},deleteValue(t){let i=O(de,{}),n=i[t];Reflect.deleteProperty(i,t),$(de,i),this.$listener.listenData.has(t)&&this.$listener.listenData.get(t).callback(t,n,void 0);},addValueChangeListener(t,i,n){let e=Math.random();return this.$listener.listenData.set(t,{id:e,key:t,callback:i}),n&&n.immediate&&i(t,this.getValue(t),this.getValue(t)),e},removeValueChangeListener(t){let i=null;for(const[n,e]of this.$listener.listenData.entries())if(e.id===t){i=n;break}typeof i=="string"?this.$listener.listenData.delete(i):console.warn("æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ç›‘å¬å™¨");},triggerMenuValueChange(t,i,n){if(this.$listener.listenData.has(t)){let e=this.$listener.listenData.get(t);if(typeof e.callback=="function"){let a=this.getValue(t),s=a,r=a;typeof i<"u"&&arguments.length>1&&(s=i),typeof n<"u"&&arguments.length>2&&(r=n),e.callback(t,r,s);}}},hasKey(t){let i=O(de,{});return t in i},execMenu(t,i,n=!1){if(!(typeof t=="string"||typeof t=="object"&&Array.isArray(t)))throw new TypeError("key å¿…é¡»æ˜¯å­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²æ•°ç»„");let e=[];typeof t=="object"&&Array.isArray(t)?e=[...t]:e.push(t);let a;for(let s=0;s<e.length;s++){const r=e[s];if(!this.$data.data.has(r)){h.warn(`${t} é”®ä¸å­˜åœ¨`);return}let o=Y.getValue(r);if(n&&(o=!o),!o)break;a=o;}a&&i(a);},execMenuOnce(t,i,n,e){if(typeof t!="string")throw new TypeError("key å¿…é¡»æ˜¯å­—ç¬¦ä¸²");if(!this.$data.data.has(t)){h.warn(`${t} é”®ä¸å­˜åœ¨`);return}if(this.$data.oneSuccessExecMenu.has(t))return;this.$data.oneSuccessExecMenu.set(t,1);let a=()=>{let c=Y.getValue(t);return typeof n=="function"?n(t,c):c},s=[],r=c=>{let u=a(),p=[];if(c instanceof HTMLStyleElement?p=[c]:Array.isArray(c)&&(p=[...c.filter(m=>m!=null&&m instanceof HTMLStyleElement)]),u)s=s.concat(p);else for(let m=0;m<p.length;m++)p[m].remove(),p.splice(m,1),m--;},o=c=>{let u=[];if(c){let p=i(c,r);p instanceof HTMLStyleElement?u=[p]:Array.isArray(p)&&(u=[...p.filter(m=>m!=null&&m instanceof HTMLStyleElement)]);}for(let p=0;p<s.length;p++)s[p].remove(),s.splice(p,1),p--;s=[...u];};this.addValueChangeListener(t,(c,u,p)=>{let m=p;typeof e=="function"&&(m=e(c,p,u)),o(m);});let l=a();l&&o(l);},execInheritMenuOnce(t,i,n,e){let a=this;const s=(r,o)=>{let l=a.getValue(r),c=a.getValue(o);if(typeof e=="function"){let u=e(l,c);if(u!==void 0)return u}return l};this.execMenuOnce(t,n,()=>s(t,i),()=>s(t,i)),this.execMenuOnce(i,()=>{},()=>!1,()=>(this.triggerMenuValueChange(t),!1));},onceExec(t,i){if(typeof t!="string")throw new TypeError("key å¿…é¡»æ˜¯å­—ç¬¦ä¸²");this.$data.onceExec.has(t)||(i(),this.$data.onceExec.set(t,1));},getPanelContentConfig(){return [On]}};Object.assign(w.src.icon,typeof RESOURCE_ICON>"u"?{}:RESOURCE_ICON);q.init();G.init();Le.init();Y.init();b.init();ue.init();v.ready(()=>{xe.init(),Ee.init(),S.init(),console.log(b);});

})(Qmsg, DOMUtils, Utils, pops);