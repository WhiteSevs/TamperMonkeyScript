// ==UserScript==
// @name         ç®€ä¹¦ä¼˜åŒ–
// @namespace    https://github.com/WhiteSevs/TamperMonkeyScript
// @version      2025.12.26
// @author       WhiteSevs
// @description  æ”¯æŒæ‰‹æœºç«¯å’ŒPCç«¯ã€å±è”½å¹¿å‘Šã€ä¼˜åŒ–æµè§ˆä½“éªŒã€é‡å®šå‘é“¾æ¥ã€å…¨æ–‡å±…ä¸­ã€è‡ªåŠ¨å±•å¼€å…¨æ–‡ã€å…è®¸å¤åˆ¶æ–‡å­—ã€åŠ«æŒå”¤é†’/è·³è½¬Appã€è‡ªå®šä¹‰å±è”½å…ƒç´ ç­‰
// @license      GPL-3.0-only
// @icon         data:image/png;base64,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
// @supportURL   https://github.com/WhiteSevs/TamperMonkeyScript/issues
// @match        *://*.jianshu.com/*
// @match        *://*.jianshu.io/*
// @require      https://fastly.jsdelivr.net/gh/WhiteSevs/TamperMonkeyScript@86be74b83fca4fa47521cded28377b35e1d7d2ac/lib/CoverUMD/index.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/utils@2.9.10/dist/index.umd.min.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/domutils@1.8.7/dist/index.umd.min.js
// @require      https://fastly.jsdelivr.net/npm/@whitesev/pops@3.1.2/dist/index.umd.min.js
// @require      https://fastly.jsdelivr.net/npm/qmsg@1.6.2/dist/index.umd.min.js
// @connect      *
// @grant        GM_deleteValue
// @grant        GM_getResourceText
// @grant        GM_getValue
// @grant        GM_info
// @grant        GM_listValues
// @grant        GM_registerMenuCommand
// @grant        GM_setValue
// @grant        GM_setValues
// @grant        GM_unregisterMenuCommand
// @grant        GM_xmlhttpRequest
// @grant        unsafeWindow
// @run-at       document-start
// ==/UserScript==

(function (P, le, K, _) {
	'use strict';

	const Me=`.download-app-guidance,\r
.call-app-btn,\r
.collapse-tips,\r
.note-graceful-button,\r
.app-open,\r
.header-wrap,\r
.recommend-wrap.recommend-ad,\r
.call-app-Ad-bottom,\r
#recommended-notes p.top-title span.more,\r
#homepage .modal,\r
button.index_call-app-btn,\r
span.note__flow__download,\r
.download-guide,\r
#footer,\r
.comment-open-app-btn-wrap,\r
.nav.navbar-nav + div,\r
.self-flow-ad,\r
#free-reward-panel,\r
div[id*='AdFive'],\r
#index-aside-download-qrbox,\r
.baidu-app-download-2eIkf_1,\r
/* åº•éƒ¨çš„"å°ç¤¼ç‰©èµ°ä¸€èµ°ï¼Œæ¥ç®€ä¹¦å…³æ³¨æˆ‘"ã€èµèµæ”¯æŒå’Œæ›´å¤šç²¾å½©å†…å®¹ï¼Œå°±åœ¨ç®€ä¹¦APP */\r
div[role="main"] > div > section:first-child > div:nth-last-child(2),\r
/* å®ƒçš„å†…éƒ¨æ˜¯scriptæ ‡ç­¾ï¼Œå¯èƒ½å½±å“éƒ¨åˆ†è¯„è®ºä¹‹é—´çš„é«˜åº¦é—®é¢˜ */\r
div.adad_container ,\r
/* é¡¶éƒ¨å¯¼èˆªæ çš„ã€ä¸‹è½½Appã€‘ */\r
#__next nav a[href*="navbar-app"] {\r
  display: none !important;\r
}\r
body.reader-day-mode.normal-size {\r
  overflow: auto !important;\r
}\r
.collapse-free-content {\r
  height: auto !important;\r
}\r
.copyright {\r
  color: #000 !important;\r
}\r
#note-show .content .show-content-free .collapse-free-content:after {\r
  background-image: none !important;\r
}\r
footer > div > div {\r
  justify-content: center;\r
}\r
/* ä¿®å¤åº•éƒ¨æœ€åç¼–è¾‘äºï¼šã€‚ã€‚ã€‚åœ¨æŸäº›å¥—å£³æµè§ˆå™¨ä¸Šçš„é”™ä½é—®é¢˜ */\r
#note-show .content .show-content-free .note-meta-time {\r
  margin-top: 0px !important;\r
}\r
`;var X=typeof GM_deleteValue<"u"?GM_deleteValue:void 0,me=typeof GM_getResourceText<"u"?GM_getResourceText:void 0,ee=typeof GM_getValue<"u"?GM_getValue:void 0,Q=typeof GM_info<"u"?GM_info:void 0,ne=typeof GM_listValues<"u"?GM_listValues:void 0,ke=typeof GM_registerMenuCommand<"u"?GM_registerMenuCommand:void 0,ce=typeof GM_setValue<"u"?GM_setValue:void 0,ye=typeof GM_setValues<"u"?GM_setValues:void 0,Ve=typeof GM_unregisterMenuCommand<"u"?GM_unregisterMenuCommand:void 0,$e=typeof GM_xmlhttpRequest<"u"?GM_xmlhttpRequest:void 0,U=typeof unsafeWindow<"u"?unsafeWindow:void 0,Ee=window;const D={waitRemove(...e){e.forEach(t=>{typeof t=="string"&&P.waitNodeList(t).then(n=>{n.forEach(o=>o.remove());});});},createBlockCSSNode(...e){let t=[];if(e.length!==0&&!(e.length===1&&typeof e[0]=="string"&&e[0].trim()===""))return e.forEach(n=>{Array.isArray(n)?t=t.concat(n):t.push(n);}),P.createElement("style",{type:"text/css",innerHTML:`${t.join(`,
`)}{display: none !important;}`})},addBlockCSS(...e){let t=[];if(e.length!==0&&!(e.length===1&&typeof e[0]=="string"&&e[0].trim()===""))return e.forEach(n=>{Array.isArray(n)?t=t.concat(n):t.push(n);}),se(`${t.join(`,
`)}{display: none !important;}`)},setGMResourceCSS(e){const t=typeof me=="function"?me(e.keyName):null;return typeof t=="string"&&t?se(t):D.loadStyleLink(e.url)},async loadStyleLink(e){let t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,new Promise(n=>{P.onReady(()=>{document.head.appendChild(t),n(t);});})},async loadScript(e){let t=document.createElement("script");return t.src=e,new Promise(n=>{t.onload=()=>{n(null);},(document.head||document.documentElement).appendChild(t);})},fixUrl(e){return e=e.trim(),e.startsWith("data:")||e.match(/^http(s|):\/\//i)?e:e.startsWith("//")?(e.startsWith("///")||(e=window.location.protocol+e),e):(e.startsWith("/")||(e+="/"),e=window.location.origin+e,e)},fixHttps(e){if(e.startsWith("https://")||!e.startsWith("http://"))return e;try{let t=new URL(e);return t.protocol="https:",t.toString()}catch{return e}},lockScroll(...e){let t=document.createElement("style");t.innerHTML=`
			.pops-overflow-hidden-important {
				overflow: hidden !important;
			}
		`;let n=[document.documentElement,document.body].concat(...e||[]);return n.forEach(o=>{o.classList.add("pops-overflow-hidden-important");}),(document.head||document.documentElement).appendChild(t),{recovery(){n.forEach(o=>{o.classList.remove("pops-overflow-hidden-important");}),t.remove();}}},async getClipboardText(){function e(o){navigator.clipboard.readText().then(a=>{o(a);}).catch(a=>{d.error("è¯»å–å‰ªè´´æ¿å†…å®¹å¤±è´¥ğŸ‘‰",a),o("");});}function t(o){navigator.permissions.query({name:"clipboard-read"}).then(a=>{e(o);}).catch(a=>{d.error("ç”³è¯·å‰ªè´´æ¿æƒé™å¤±è´¥ï¼Œå°è¯•ç›´æ¥è¯»å–ğŸ‘‰",a.message??a.name??a.stack),e(o);});}function n(){return !(typeof navigator?.clipboard?.readText!="function"||typeof navigator?.permissions?.query!="function")}return new Promise(o=>{if(!n()){o("");return}document.hasFocus()?t(o):window.addEventListener("focus",()=>{t(o);},{once:true});})},escapeHtml(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/Â©/g,"&copy;").replace(/Â®/g,"&reg;").replace(/â„¢/g,"&trade;").replace(/â†’/g,"&rarr;").replace(/â†/g,"&larr;").replace(/â†‘/g,"&uarr;").replace(/â†“/g,"&darr;").replace(/â€”/g,"&mdash;").replace(/â€“/g,"&ndash;").replace(/â€¦/g,"&hellip;").replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br>").replace(/\r/g,"<br>").replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},interval(e,t,n=5e3){let o,a=n-t,r=t,i=async m=>{let s=await e(m);if(typeof s=="boolean"&&!s||m){x.workerClearTimeout(o);return}if(r+=t,r>a){i(true);return}o=x.workerSetTimeout(()=>{i(false);},t);};i(false);},findParentNode(e,t,n){if(n){let o=P.closest(e,n);if(o)return o.querySelector(t)}else return P.matches(e,t)?e:P.closest(e,t)},toStr(e){const t="__undefined__placeholder__replaced__str__";return JSON.stringify(e,(o,a)=>a===void 0?t:a,2).replace(new RegExp(`"${t}"`,"g"),"undefined")}},oe="GM_Panel",Re="data-init",ae="data-key",ie="data-default-value",Ae="data-init-more-value",Le="data-plugin-search-config",te="data-storage-api",N={get width(){return globalThis.innerWidth},get height(){return globalThis.innerHeight}},J={setting:{get width(){return N.width<550?"88vw":N.width<700?"550px":"700px"},get height(){return N.height<450?"70vh":N.height<550?"450px":"550px"}},settingMiddle:{get width(){return N.width<350?"88vw":"350px"}},info:{get width(){return N.width<350?"88vw":"350px"},get height(){return N.height<250?"88vh":"250px"}}},re={$data:{__contentConfig:null,get contentConfig(){return this.__contentConfig==null&&(this.__contentConfig=new x.Dictionary),this.__contentConfig},__defaultBottomContentConfig:[]},addContentConfig(e){Array.isArray(e)||(e=[e]);let t=this.$data.contentConfig.keys().length;this.$data.contentConfig.set(t,e);},getAllContentConfig(){return this.$data.contentConfig.values().flat()},getConfig(e=0){return this.$data.contentConfig.get(e)??[]},getDefaultBottomContentConfig(){if(this.$data.__defaultBottomContentConfig.length)return this.$data.__defaultBottomContentConfig;let e=false,t;const n=(r,i)=>{typeof i!="string"&&(i=D.toStr(i));const m=new Blob([i]),s=globalThis.URL.createObjectURL(m);u.createElement("a",{href:s,download:r}).click(),x.workerSetTimeout(()=>{globalThis.URL.revokeObjectURL(s);},500);},o=()=>{const r=M=>{const p=G.alert({title:{text:"è¯·é€‰æ‹©å¯¼å…¥æ–¹å¼",position:"center"},content:{text:`
            <div class="btn-control" data-mode="local">æœ¬åœ°å¯¼å…¥</div>
            <div class="btn-control" data-mode="network">ç½‘ç»œå¯¼å…¥</div>
            <div class="btn-control" data-mode="clipboard">å‰ªè´´æ¿å¯¼å…¥</div>`,html:true},btn:{ok:{enable:false},close:{enable:true,callback(E,b){E.close();}}},drag:true,mask:{enable:true},width:J.info.width,height:J.info.height,style:`
          .btn-control{
              display: inline-block;
              margin: 10px;
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 5px;
              cursor: pointer;
          }
          .btn-control:hover{
            color: #409eff;
            border-color: #c6e2ff;
            background-color: #ecf5ff;
          }`}),y=p.$shadowRoot.querySelector(".btn-control[data-mode='local']"),k=p.$shadowRoot.querySelector(".btn-control[data-mode='network']"),F=p.$shadowRoot.querySelector(".btn-control[data-mode='clipboard']"),T=async E=>{confirm("æ˜¯å¦æ¸…ç©ºè„šæœ¬å­˜å‚¨çš„é…ç½®ï¼Ÿï¼ˆå¦‚æœç‚¹å‡»å–æ¶ˆæŒ‰é’®ï¼Œåˆ™ä»…åšé…ç½®è¦†ç›–å¤„ç†ï¼‰")&&(typeof ne=="function"?typeof X=="function"?(ne().forEach(l=>{X(l);}),_.success("å·²æ¸…ç©ºè„šæœ¬å­˜å‚¨çš„é…ç½®")):_.error("ä¸æ”¯æŒGM_deleteValueå‡½æ•°ï¼Œæ— æ³•æ‰§è¡Œåˆ é™¤è„šæœ¬é…ç½®"):_.error("ä¸æ”¯æŒGM_listValueså‡½æ•°ï¼Œæ— æ³•æ¸…ç©ºè„šæœ¬å­˜å‚¨çš„é…ç½®")),typeof ye=="function"?ye(E):Object.keys(E).forEach(l=>{const f=E[l];ce(l,f);}),_.success("é…ç½®å¯¼å…¥å®Œæ¯•");},I=E=>new Promise(async b=>{const S=x.toJSON(E);Object.keys(S).length===0?_.warning("è§£æä¸ºç©ºé…ç½®ï¼Œä¸å¯¼å…¥"):await T(S),b(true);});u.on(y,"click",E=>{u.preventEvent(E),p.close();const b=u.createElement("input",{type:"file",accept:".json"});u.on(b,["propertychange","input"],S=>{if(!b.files?.length)return;const l=b.files[0],f=new FileReader;f.onload=()=>{I(f.result);},f.readAsText(l,"UTF-8");}),b.click();}),u.on(k,"click",E=>{u.preventEvent(E),p.close();const b=G.prompt({title:{text:"ç½‘ç»œå¯¼å…¥",position:"center"},content:{text:"",placeholder:"è¯·å¡«å†™URL",focus:true},btn:{close:{enable:true,callback(f,$){f.close();}},ok:{text:"å¯¼å…¥",callback:async(f,$)=>{const V=f.text;if(x.isNull(V)){_.error("è¯·å¡«å…¥å®Œæ•´çš„url");return}const h=_.loading("æ­£åœ¨è·å–é…ç½®..."),C=await pe.get(V,{allowInterceptConfig:false});if(h.close(),!C.status){d.error(C),_.error("è·å–é…ç½®å¤±è´¥",{consoleLogContent:true});return}await I(C.data.responseText)&&f.close();}},cancel:{enable:false}},drag:true,mask:{enable:true},width:J.info.width,height:"auto"}),S=b.$shadowRoot.querySelector("input"),l=b.$shadowRoot.querySelector(".pops-prompt-btn-ok");u.on(S,["input","propertychange"],f=>{u.val(S)===""?u.attr(l,"disabled","true"):u.removeAttr(l,"disabled");}),u.onKeyboard(S,"keydown",(f,$,V)=>{f==="Enter"&&V.length===0&&u.val(S)!==""&&u.emit(l,"click");}),u.emit(S,"input");}),u.on(F,"click",async E=>{u.preventEvent(E),p.close();let b=await D.getClipboardText();if(b.trim()===""){_.warning("è·å–åˆ°çš„å‰ªè´´æ¿å†…å®¹ä¸ºç©º");return}await I(b);});},i=(M=`${de}_panel-setting-${x.formatTime(Date.now(),"yyyy_MM_dd_HH_mm_ss")}.json`,p)=>{const y=G.alert({title:{text:"è¯·é€‰æ‹©å¯¼å‡ºæ–¹å¼",position:"center"},content:{text:`
            <div class="btn-control" data-mode="export-to-file">å¯¼å‡ºè‡³æ–‡ä»¶</div>
            <div class="btn-control" data-mode="export-to-clipboard">å¯¼å‡ºè‡³å‰ªè´´æ¿</div>
            `,html:true},btn:{ok:{enable:false},close:{enable:true,callback(T,I){T.close();}}},drag:true,mask:{enable:true},width:J.info.width,height:J.info.height,style:`
          .btn-control{
              display: inline-block;
              margin: 10px;
              padding: 10px;
              border: 1px solid #ccc;
              border-radius: 5px;
              cursor: pointer;
          }
          .btn-control:hover{
            color: #409eff;
            border-color: #c6e2ff;
            background-color: #ecf5ff;
          }`}),k=y.$shadowRoot.querySelector(".btn-control[data-mode='export-to-file']"),F=y.$shadowRoot.querySelector(".btn-control[data-mode='export-to-clipboard']");u.on(k,"click",T=>{u.preventEvent(T);try{n(M,p),y.close();}catch(I){_.error(I.toString(),{consoleLogContent:true});}}),u.on(F,"click",async T=>{await x.copy(p)?(_.success("å¤åˆ¶æˆåŠŸ"),y.close()):_.error("å¤åˆ¶å¤±è´¥");});},s=G.confirm({title:{text:"é…ç½®",position:"center"},content:{text:`
            <textarea name="config-value" id="config" readonly></textarea>
          `,html:true},btn:{ok:{enable:true,type:"primary",text:"å¯¼å…¥",callback(M,p){r();}},cancel:{enable:true,text:"å¯¼å‡º",callback(M,p){i(void 0,v);}}},width:N.width<450?"90vw":"450px",height:"auto",style:`
          .pops-content textarea {
            --textarea-bd-color: #dcdfe6;
            display: inline-block;
            resize: vertical;
            padding: 5px 15px;
            margin: 0;
            line-height: normal;
            box-sizing: border-box;
            color: #606266;
            border: 0;
            border-radius: 0;
            outline: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background: none;
            width: 100%;
            height: 100%;
            appearance: none;
            resize: none;
          }
          .pops-content textarea{
            height: 500px;
          }
          .pops-content textarea:focus {
            --textarea-bd-color: #3677f0;
          }
          .pops-content textarea:hover {
            --textarea-bd-color: #c0c4cc;
          }
        `}).$shadowRoot.querySelector("textarea"),c={};if(typeof ne=="function")ne().forEach(p=>{const y=ee(p);Reflect.set(c,p,y);});else {_.warning("ä¸æ”¯æŒå‡½æ•°GM_listValuesï¼Œä»…å¯¼å‡ºèœå•é…ç½®");const M=ee(oe);Reflect.set(c,oe,M);}const v=D.toStr(c);s.value=v;},a=()=>{let r=Q?.script?.supportURL||Q?.script?.namespace;typeof r=="string"&&x.isNotNull(r)&&window.open(r,"_blank");};return [{id:"script-version",title:`ç‰ˆæœ¬ï¼š${Q?.script?.version||"æœªçŸ¥"}`,isBottom:true,views:[],clickFirstCallback(){return  false},afterRender(r){new Ie(r.$asideLiElement).on("tap",function(m){clearTimeout(t),t=void 0,e?(e=false,o()):(t=setTimeout(()=>{e=false,a();},200),e=true);});}}]},setDefaultBottomContentConfig(e){this.$data.__defaultBottomContentConfig=e;}},Te={$data:{__menuOption:[{key:"show_pops_panel_setting",text:"âš™ è®¾ç½®",autoReload:false,isStoreValue:false,showText(e){return e},callback:()=>{w.showPanel(re.getConfig(0));}}],get menuOption(){return this.__menuOption}},init(){this.initExtensionsMenu();},initExtensionsMenu(){w.isTopWindow()&&Ce.add(this.$data.menuOption);},addMenuOption(e){Array.isArray(e)||(e=[e]),this.$data.menuOption.push(...e);},updateMenuOption(e){Array.isArray(e)||(e=[e]),e.forEach(t=>{let n=this.$data.menuOption.findIndex(o=>o.key===t.key);n!==-1&&(this.$data.menuOption[n]=t);});},getMenuOption(e=0){return this.$data.menuOption[e]},deleteMenuOption(e=0){this.$data.menuOption.splice(e,1);}};class De{storageKey;listenerData;constructor(t){if(typeof t=="string"){const n=t.trim();if(n=="")throw new Error("keyå‚æ•°ä¸èƒ½ä¸ºç©ºå­—ç¬¦ä¸²");this.storageKey=n;}else throw new Error("keyå‚æ•°ç±»å‹é”™è¯¯ï¼Œå¿…é¡»æ˜¯å­—ç¬¦ä¸²");this.listenerData=new K.Dictionary,this.getLocalValue=this.getLocalValue.bind(this),this.set=this.set.bind(this),this.get=this.get.bind(this),this.getAll=this.getAll.bind(this),this.delete=this.delete.bind(this),this.has=this.has.bind(this),this.keys=this.keys.bind(this),this.values=this.values.bind(this),this.clear=this.clear.bind(this),this.addValueChangeListener=this.addValueChangeListener.bind(this),this.removeValueChangeListener=this.removeValueChangeListener.bind(this),this.emitValueChangeListener=this.emitValueChangeListener.bind(this);}getLocalValue(){let t=ee(this.storageKey);return t==null&&(t={},this.setLocalValue(t)),t}setLocalValue(t){ce(this.storageKey,t);}set(t,n){const o=this.get(t),a=this.getLocalValue();Reflect.set(a,t,n),this.setLocalValue(a),this.emitValueChangeListener(t,n,o);}get(t,n){const o=this.getLocalValue();return Reflect.get(o,t)??n}getAll(){return this.getLocalValue()}delete(t){const n=this.get(t),o=this.getLocalValue();Reflect.deleteProperty(o,t),this.setLocalValue(o),this.emitValueChangeListener(t,void 0,n);}has(t){const n=this.getLocalValue();return Reflect.has(n,t)}keys(){const t=this.getLocalValue();return Reflect.ownKeys(t)}values(){const t=this.getLocalValue();return Reflect.ownKeys(t).map(n=>Reflect.get(t,n))}clear(){X(this.storageKey);}addValueChangeListener(t,n){const o=Math.random(),a=this.listenerData.get(t)||[];return a.push({id:o,key:t,callback:n}),this.listenerData.set(t,a),o}removeValueChangeListener(t){let n=false;for(const[o,a]of this.listenerData.entries()){for(let r=0;r<a.length;r++){const i=a[r];(typeof t=="string"&&i.key===t||typeof t=="number"&&i.id===t)&&(a.splice(r,1),r--,n=true);}this.listenerData.set(o,a);}return n}async emitValueChangeListener(...t){const[n,o,a]=t;if(!this.listenerData.has(n))return;let r=this.listenerData.get(n);for(let i=0;i<r.length;i++){const m=r[i];if(typeof m.callback=="function"){let s=this.get(n),c,v;typeof a<"u"&&t.length>=2?v=a:v=s,typeof o<"u"&&t.length>2?c=o:c=s,await m.callback(n,c,v);}}}}const B=new De(oe),w={$data:{__contentConfigInitDefaultValue:null,__onceExecMenuData:null,__urlChangeReloadMenuExecOnce:null,__onceExecData:null,__panelConfig:{},$panel:null,panelContent:[],get contentConfigInitDefaultValue(){return this.__contentConfigInitDefaultValue==null&&(this.__contentConfigInitDefaultValue=new x.Dictionary),this.__contentConfigInitDefaultValue},contentConfigInitDisabledKeys:[],get onceExecMenuData(){return this.__onceExecMenuData==null&&(this.__onceExecMenuData=new x.Dictionary),this.__onceExecMenuData},get urlChangeReloadMenuExecOnce(){return this.__urlChangeReloadMenuExecOnce==null&&(this.__urlChangeReloadMenuExecOnce=new x.Dictionary),this.__urlChangeReloadMenuExecOnce},get onceExecData(){return this.__onceExecData==null&&(this.__onceExecData=new x.Dictionary),this.__onceExecData},get scriptName(){return de},get panelConfig(){return this.__panelConfig},set panelConfig(e){this.__panelConfig=e;},key:oe,attributeKeyName:ae,attributeDefaultValueName:ie},init(){this.initContentDefaultValue(),Te.init();},isTopWindow(){return U.top===U.self},initContentDefaultValue(){const e=o=>{if(!o.attributes||o.type==="button"||o.type==="container"||o.type==="deepMenu")return;const a=o.attributes;let r=a[Re];if(typeof r=="function"){let c=r();if(typeof c=="boolean"&&!c)return}let i=new Map,m=a[ae];if(m!=null){const c=a[ie];i.set(m,c);}let s=a[Ae];if(typeof s=="object"&&s&&Object.keys(s).forEach(c=>{const v=s[c];i.set(c,v);}),!i.size){d.warn(["è¯·å…ˆé…ç½®é”®",o]);return}if(o.type==="switch"){let c=typeof o.disabled=="function"?o.disabled():o.disabled;typeof c=="boolean"&&c&&this.$data.contentConfigInitDisabledKeys.push(...i.keys());}for(const[c,v]of i.entries())this.setDefaultValue(c,v);},t=o=>{for(let a=0;a<o.length;a++){let r=o[a];e(r);let i=r.views;i&&Array.isArray(i)&&t(i);}},n=[...re.getAllContentConfig()];for(let o=0;o<n.length;o++){let a=n[o];if(!a.views)continue;const r=a.views;r&&Array.isArray(r)&&t(r);}this.$data.contentConfigInitDisabledKeys=[...new Set(this.$data.contentConfigInitDisabledKeys)];},setDefaultValue(e,t){this.$data.contentConfigInitDefaultValue.has(e)&&d.warn("è¯·æ£€æŸ¥è¯¥key(å·²å­˜åœ¨): "+e),this.$data.contentConfigInitDefaultValue.set(e,t);},getDefaultValue(e){return this.$data.contentConfigInitDefaultValue.get(e)},setValue(e,t){B.set(e,t);},getValue(e,t){const n=B.get(e);return n??(this.$data.contentConfigInitDefaultValue.has(e)?this.$data.contentConfigInitDefaultValue.get(e):t)},deleteValue(e){B.delete(e);},hasKey(e){return B.has(e)},addValueChangeListener(e,t){return B.addValueChangeListener(e,t)},removeValueChangeListener(e){B.removeValueChangeListener(e);},emitMenuValueChange(e,t,n){B.emitValueChangeListener(e,t,n);},async exec(e,t,n,o=true){const a=this;let r;typeof e=="string"||Array.isArray(e)?r=()=>e:r=e;let i=false;const m=r();let s=[];Array.isArray(m)?(i=true,s=m):s.push(m);const c=s.find(l=>!this.$data.contentConfigInitDefaultValue.has(l));if(c){d.warn(`${c} é”®ä¸å­˜åœ¨`);return}const v=JSON.stringify(s);if(o&&this.$data.onceExecMenuData.has(v))return this.$data.onceExecMenuData.get(v);let M=[];const p=[];let y=[];const k=(l,f)=>{let $=[],V=[],h=[];if(Array.isArray(f))h=h.concat(f);else {const C=g=>{if(typeof g=="object"&&g!=null)if(g instanceof Element)h.push(g);else {const{$css:L,destory:A}=g;L!=null&&(Array.isArray(L)?h=h.concat(L):h.push(L)),typeof A=="function"&&h.push(A);}else h.push(g);};if(f!=null&&Array.isArray(f))for(const g of f)C(g);else C(f);}for(const C of h)if(C!=null){if(C instanceof Element){$.push(C);continue}if(typeof C=="function"){y.push(C);continue}}l?(M=M.concat($),y=y.concat(V)):(T(),I());},F=l=>!!this.getValue(l),T=()=>{for(let l=0;l<M.length;l++)M[l]?.remove(),M.splice(l,1),l--;},I=()=>{for(let l=0;l<y.length;l++){const f=y[l];f(),y.splice(l,1),l--;}},E=()=>{let l=false;return typeof n=="function"?l=n(s):l=s.every(f=>F(f)),l},b=async l=>{if(E()){const $=s.map(h=>this.getValue(h)),V=await t({value:i?$:$[0],addStoreValue:(...h)=>k(true,h)});k(true,V);}else k(false,[]);};o&&s.forEach(l=>{const f=this.addValueChangeListener(l,($,V,h)=>b());p.push(f);}),await b();const S={reload(){this.clearStoreStyleElements(),this.destory(),b();},clear(){this.clearStoreStyleElements(),this.destory(),this.removeValueChangeListener(),this.clearOnceExecMenuData();},clearStoreStyleElements:()=>T(),destory(){return I()},removeValueChangeListener:()=>{p.forEach(l=>{this.removeValueChangeListener(l);});},clearOnceExecMenuData(){o&&a.$data.onceExecMenuData.delete(v);}};return this.$data.onceExecMenuData.set(v,S),S},async execMenu(e,t,n=false,o=false){return await this.exec(e,async a=>await t(a),a=>a.every(i=>{let m=!!this.getValue(i);return w.$data.contentConfigInitDisabledKeys.includes(i)&&(m=false,d.warn(`.execMenu${o?"Once":""} ${i} è¢«ç¦ç”¨`)),n&&(m=!m),m}),o)},async execMenuOnce(e,t,n=false,o=false){const a=await this.execMenu(e,t,n,true);if(o&&a){const r=()=>{a.reload();};this.removeUrlChangeWithExecMenuOnceListener(e),this.addUrlChangeWithExecMenuOnceListener(e,r);}return a},deleteExecMenuOnce(e){return e=this.transformKey(e),this.$data.onceExecMenuData.delete(e),this.$data.urlChangeReloadMenuExecOnce.delete(e),B.removeValueChangeListener(e)},onceExec(e,t){if(e=this.transformKey(e),typeof e!="string")throw new TypeError("key å¿…é¡»æ˜¯å­—ç¬¦ä¸²");this.$data.onceExecData.has(e)||(t(),this.$data.onceExecData.set(e,1));},deleteOnceExec(e){e=this.transformKey(e),this.$data.onceExecData.delete(e);},addUrlChangeWithExecMenuOnceListener(e,t){e=this.transformKey(e),this.$data.urlChangeReloadMenuExecOnce.set(e,t);},removeUrlChangeWithExecMenuOnceListener(e){e=this.transformKey(e),this.$data.urlChangeReloadMenuExecOnce.delete(e);},hasUrlChangeWithExecMenuOnceListener(e){return e=this.transformKey(e),this.$data.urlChangeReloadMenuExecOnce.has(e)},async emitUrlChangeWithExecMenuOnceEvent(e){const t=this.$data.urlChangeReloadMenuExecOnce.values();for(const n of t)await n(e);},showPanel(e,t=`${de}-è®¾ç½®`,n=false,o=false){this.$data.$panel=null,this.$data.panelContent=[];let a=e.findIndex(i=>(typeof i.isBottom=="function"?i.isBottom():!!i.isBottom)&&i.id==="script-version")!==-1;!n&&!a&&e.push(...re.getDefaultBottomContentConfig());let r=G.panel({title:{text:t,position:"center",html:false,style:""},content:e,btn:{close:{enable:true,callback:(i,m)=>{i.close(),this.$data.$panel=null;}}},mask:{enable:true,clickEvent:{toClose:true,toHide:false},clickCallBack:(i,m)=>{i(),this.$data.$panel=null;}},width:J.setting.width,height:J.setting.height,drag:true,only:true,...this.$data.panelConfig});this.$data.$panel=r,this.$data.panelContent=e,o||this.registerConfigSearch({$panel:r,content:e});},registerConfigSearch(e){const{$panel:t,content:n}=e,o=async(p,y)=>{if(p==null)return;const k=await y(p);return k&&typeof k.isFind=="boolean"&&k.isFind?k.data:await o(k.data,y)},a=(p,y)=>{const k=new IntersectionObserver(F=>{F.forEach(T=>{T.isIntersecting&&(y?.(),k.disconnect());});},{root:null,threshold:1});k.observe(p),p.scrollIntoView({behavior:"smooth",block:"center"});},r=p=>{const y="pops-flashing";u.onAnimationend(p,()=>{p.classList.remove(y);}),p.classList.add(y);},i=p=>{if(p.type==="dblclick"&&M)return;u.preventEvent(p),s=null;const y=G.alert({title:{text:"æœç´¢é…ç½®",position:"center"},content:{text:`
						<div class="search-wrapper">
							<input class="search-config-text" name="search-config" type="text" placeholder="è¯·è¾“å…¥éœ€è¦æœç´ çš„é…ç½®åç§°">
						</div>
						<div class="search-result-wrapper"></div>
					`,html:true},btn:{ok:{enable:false}},mask:{clickEvent:{toClose:true}},width:J.settingMiddle.width,height:"auto",drag:true,style:`
					${G.config.cssText.panelCSS}

					.search-wrapper{
						border-bottom: 1px solid rgb(235, 238, 245, 1);
					}
					.pops-content:has(.search-result-wrapper:empty) .search-wrapper{
						border-bottom: 0;
					}
					.search-config-text{
						width: 100%;
						border: 0;
						height: 32px;
						padding: 0px 10px;
						outline: none;
					}
					.search-result-wrapper{
						max-height: 400px;
						overflow: auto;
					}
					.search-result-item{
						cursor: pointer;
						padding: 5px 10px;
						display: flex;
						flex-direction: column;
					}
					.search-result-item:hover{
						background-color: #D8F1FD;
					}
					.search-result-item-path{
						display: flex;
    					align-items: center;
					}
					.search-result-item-description{
						font-size: 0.8em;
						color: #6c6c6c;
					}
					${e.searchDialogStyle??""}
				`});y.$shadowRoot.querySelector(".search-wrapper");const k=y.$shadowRoot.querySelector(".search-config-text"),F=y.$shadowRoot.querySelector(".search-result-wrapper");k.focus();const T=()=>{u.empty(F);},I=b=>{const S=x.queryProperty(b,$=>$?.next?{isFind:false,data:$.next}:{isFind:true,data:$}),l=u.createElement("div",{className:"search-result-item",innerHTML:`
							<div class="search-result-item-path">${S.matchedData?.path}</div>
							<div class="search-result-item-description">${S.matchedData?.description??""}</div>
						`}),f=G.config.PanelHandlerComponents();return u.on(l,"click",$=>{const h=t.$shadowRoot.querySelectorAll("aside.pops-panel-aside .pops-panel-aside-top-container li")[b.index];if(!h){_.error(`å·¦ä¾§é¡¹ä¸‹æ ‡${b.index}ä¸å­˜åœ¨`);return}h.scrollIntoView({behavior:"smooth",block:"center"}),h.click(),o(b.next,async C=>{if(C?.next){const g=await u.waitNode(()=>Array.from(t.$shadowRoot.querySelectorAll(".pops-panel-deepMenu-nav-item")).find(L=>{const A=Reflect.get(L,f.$data.nodeStoreConfigKey);return typeof A=="object"&&A!=null&&A.text===C.name}),2500);if(g)g.click();else return _.error("æœªæ‰¾åˆ°å¯¹åº”çš„äºŒçº§èœå•"),{isFind:true,data:C};return {isFind:false,data:C.next}}else {const g=await u.waitNode(()=>Array.from(t.$shadowRoot.querySelectorAll("li:not(.pops-panel-deepMenu-nav-item)")).find(L=>Reflect.get(L,f.$data.nodeStoreConfigKey)===C.matchedData?.formConfig),2500);if(g){a(g);const L=g.closest(".pops-panel-forms-fold[data-fold-enable]");L&&(L.querySelector(".pops-panel-forms-fold-container").click(),await x.sleep(500)),a(g,()=>{r(g);});}else _.error("æœªæ‰¾åˆ°å¯¹åº”çš„èœå•é¡¹");return {isFind:true,data:C}}});}),l},E=b=>{const S=new RegExp(b,"i"),l=[],f=(V,h)=>{for(let C=0;C<V.length;C++){const g=V[C],L=g.views;if(L&&Array.isArray(L)){const A=x.deepClone(h);if(g.type==="deepMenu"){const H=x.queryProperty(A,W=>W?.next?{isFind:false,data:W.next}:{isFind:true,data:W});H.next={name:g.text};}f(L,A);}else {let A,H;if(g.type==="own"){const O=Reflect.get(g.attributes||{},Le);O&&(typeof O.text=="string"&&(A=O.text),typeof O.desc=="string"&&(H=O.desc));}else A=g.text,H=Reflect.get(g,"description");const W=[A,H],fe=W.findIndex(O=>{if(typeof O=="string")return O.match(S)});if(fe!==-1){const O=x.deepClone(h),he=x.queryProperty(O,q=>q?.next?{isFind:false,data:q.next}:{isFind:true,data:q});he.next={name:A,matchedData:{path:"",formConfig:g,matchedText:W[fe],description:H}};const ge=[];x.queryProperty(O,q=>{const ue=q?.name;return typeof ue=="string"&&ue.trim()!==""&&ge.push(ue),q?.next?{isFind:false,data:q.next}:{isFind:true,data:q}});const Se=ge.join(D.escapeHtml(" - "));he.next.matchedData.path=Se,l.push(O);}}}};for(let V=0;V<n.length;V++){const h=n[V];if(!h.views||h.isBottom&&h.id==="script-version")continue;const C=h.views;if(C&&Array.isArray(C)){let g=h.title;typeof g=="function"&&(g=g()),f(C,{index:V,name:g});}}const $=document.createDocumentFragment();for(const V of l){let h=I(V);$.appendChild(h);}T(),F.append($);};u.on(k,"input",x.debounce(b=>{u.preventEvent(b);let S=u.val(k).trim();if(S===""){T();return}E(S);},200));};t.$shadowRoot.querySelectorAll("aside.pops-panel-aside .pops-panel-aside-item:not(#script-version)").forEach(p=>{u.on(p,"dblclick",i);});let s=null,c=false,v,M=false;u.on(t.$shadowRoot,"touchend","aside.pops-panel-aside .pops-panel-aside-item:not(#script-version)",(p,y)=>{M=true,clearTimeout(v),v=void 0,c&&s===y?(c=false,s=null,i(p)):(v=setTimeout(()=>{c=false;},200),c=true,s=y);},{capture:true}),t.$shadowRoot.appendChild(u.createElement("style",{type:"text/css",textContent:`
					.pops-flashing{
						animation: double-blink 1.5s ease-in-out;
					}
					@keyframes double-blink {
						 0% {
							background-color: initial;
						}
						25% {
							background-color: yellow;
						}
						50% {
							background-color: initial;
						}
						75% {
							background-color: yellow;
						}
						100% {
							background-color: initial;
						}
					}
				`}));},transformKey(e){if(Array.isArray(e)){const t=e.sort();return JSON.stringify(t)}else return e}},z={qmsg_config_position:{key:"qmsg-config-position",defaultValue:"bottom"},qmsg_config_maxnums:{key:"qmsg-config-maxnums",defaultValue:3},qmsg_config_showreverse:{key:"qmsg-config-showreverse",defaultValue:false}},x=K.noConflict(),u=P.noConflict(),G=le,d=new x.Log(Q,U.console||Ee.console),de=Q?.script?.name||void 0,Ie=le.config.Utils.AnyTouch(),Oe=false;d.config({debug:false,logMaxCount:250,autoClearConsole:true,tag:true});_.config({isHTML:true,autoClose:true,showClose:false,consoleLogContent(e){const t=e.setting.type;if(t==="loading")return  false;const n=e.setting.content;return t==="warning"?d.warn(n):t==="error"?d.error(n):d.info(n),true},get position(){return w.getValue(z.qmsg_config_position.key,z.qmsg_config_position.defaultValue)},get maxNums(){return w.getValue(z.qmsg_config_maxnums.key,z.qmsg_config_maxnums.defaultValue)},get showReverse(){return w.getValue(z.qmsg_config_showreverse.key,z.qmsg_config_showreverse.defaultValue)},get zIndex(){let e=K.getMaxZIndex(),t=le.config.InstanceUtils.getPopsMaxZIndex().zIndex;return K.getMaxValue(e,t)+100}});G.GlobalConfig.setGlobalConfig({zIndex:()=>{const e=K.getMaxZIndex(void 0,void 0,n=>{if(n?.classList?.contains("qmsg-shadow-container")||n?.closest("qmsg")&&n.getRootNode()instanceof ShadowRoot)return  false}),t=le.config.InstanceUtils.getPopsMaxZIndex().zIndex;return K.getMaxValue(e,t)+100},mask:{enable:true,clickEvent:{toClose:false,toHide:false}},drag:true});const Ce=new x.GM_Menu({GM_getValue:ee,GM_setValue:ce,GM_registerMenuCommand:ke,GM_unregisterMenuCommand:Ve}),pe=new x.Httpx({xmlHttpRequest:$e,logDetails:Oe});pe.interceptors.request.use(e=>e);pe.interceptors.response.use(void 0,e=>(d.error("æ‹¦æˆªå™¨-è¯·æ±‚é”™è¯¯",e),e.type==="onabort"?_.warning("è¯·æ±‚å–æ¶ˆ",{consoleLogContent:true}):e.type==="onerror"?_.error("è¯·æ±‚å¼‚å¸¸",{consoleLogContent:true}):e.type==="ontimeout"?_.error("è¯·æ±‚è¶…æ—¶",{consoleLogContent:true}):_.error("å…¶å®ƒé”™è¯¯",{consoleLogContent:true}),e));U.Object.defineProperty,U.Function.prototype.apply,U.Function.prototype.call,U.Element.prototype.appendChild,U.setTimeout;const se=u.addStyle.bind(u);P.selector.bind(P);P.selectorAll.bind(P);new x.GM_Cookie;const Pe={isGoWild(){return window.location.pathname==="/go-wild"}},xe=function(e=""){u.waitNodeList(e).then(t=>{t.forEach(n=>n.remove());});},Z={init(){this.addCSS(),w.execMenu("JianShuAutoJumpRedirect_PC",()=>{this.jumpRedirect();}),w.execMenu("JianShuRemoveClipboardHijacking",()=>{this.removeClipboardHijacking();}),w.execMenu("JianShuAutoExpandFullText",()=>{this.autoExpandFullText();}),w.execMenu("JianShuArticleCenter",()=>this.articleCenter()),w.execMenu("JianShuShieldRelatedArticles",()=>this.blockRelatedArticles()),w.execMenu("jianshu-shieldClientDialog",()=>{this.blockClientDialog();}),w.execMenuOnce("JianShuShieldUserComments",()=>this.blockUserComments()),w.execMenuOnce("JianShuShieldRecommendedReading",()=>this.blockRecommendedReading()),w.execMenuOnce("jianshu-shieldTopNav",()=>this.blockTopNav()),w.execMenuOnce("jianshu-shieldBottomToolbar",()=>this.blockBottomToolbar());},addCSS(){return d.info("æ·»åŠ å±è”½CSS"),se(Me)},articleCenter(){d.info("å…¨æ–‡å±…ä¸­");let e=[];return e.push(D.addBlockCSS("div[role=main] aside","div._3Pnjry"),se(`
			div[role=main] aside,
			div._3Pnjry{
				display: none !important;
			}
			div._gp-ck{
				width: 100% !important;
			}`)),xe("div[role=main] aside"),xe("div._3Pnjry"),u.waitNodeList("div._gp-ck").then(t=>{t.forEach(n=>{n.style.width="100%";});}),e},removeClipboardHijacking(){d.info("å»é™¤å‰ªè´´æ¿åŠ«æŒ");const e=t=>{t.stopPropagation();};window.addEventListener("copy",e,true),document.addEventListener("copy",e,true);},autoExpandFullText(){u.waitNode('div#homepage div[class*="dialog-"]').then(e=>{e.style.visibility="hidden",d.info("è‡ªåŠ¨å±•å¼€å…¨æ–‡"),x.mutationObserver(e,{callback:t=>{t.length!=0&&t.forEach(n=>{n.target.style.display!="none"&&(d.success("è‡ªåŠ¨å±•å¼€å…¨æ–‡-è‡ªåŠ¨ç‚¹å‡»"),document.querySelector('div#homepage div[class*="dialog-"] .cancel')?.click());});},config:{childList:false,attributes:true,characterData:true,subtree:true}});});},jumpRedirect(){if(Pe.isGoWild()){d.success("å»é™¤ç®€ä¹¦æ‹¦æˆªå…¶å®ƒç½‘å€çš„urlå¹¶è‡ªåŠ¨è·³è½¬"),window.stop();let e=window.location.href.replace(window.location.origin+"/","");e=decodeURIComponent(e);let t=e.replace(/^go-wild\?ac=2&url=/gi,"").replace(/^https:\/\/link.zhihu.com\/\?target\=/gi,"");window.location.href=t;}},blockRelatedArticles(){return d.info("å±è”½ç›¸å…³æ–‡ç« "),D.addBlockCSS('div[role="main"] > div > section:nth-child(2)')},blockClientDialog(){d.info("ã€å±è”½ã€‘å®¢æˆ·ç«¯å¼¹çª—"),D.addBlockCSS('div:has(>div[class*="-mask"]:not([class*="-mask-hidden"]) + div[tabindex="-1"][role="dialog"])'),u.waitNode('div[class*="-mask"]:not([class*="-mask-hidden"]) + div[tabindex="-1"][role="dialog"]').then(e=>{d.success("å¼¹çª—å‡ºç°"),x.waitPropertyByInterval(e,()=>x.getReactInstance(e)?.reactInternalInstance?.return?.return?.memoizedProps?.onClose,250,1e4).then(()=>{x.getReactInstance(e).reactInternalInstance.return.return.memoizedProps.onClose(new Event("click")),d.success("è°ƒç”¨å‡½æ•°å…³é—­å¼¹çª—");});});},blockUserComments(){return d.info("å±è”½è¯„è®ºåŒº"),D.addBlockCSS("div#note-page-comment")},blockRecommendedReading(){return d.info("å±è”½åº•éƒ¨æ¨èé˜…è¯»"),D.addBlockCSS('div[role="main"] > div > section:last-child')},blockTopNav(){return d.info("ã€å±è”½ã€‘é¡¶éƒ¨å¯¼èˆªæ "),D.addBlockCSS("header")},blockBottomToolbar(){return d.info("ã€å±è”½ã€‘åº•éƒ¨å·¥å…·æ "),D.addBlockCSS("footer")}},ve={init(){this.addCSS(),w.execMenu("JianShuAutoJumpRedirect_Mobile",()=>{Z.jumpRedirect();}),w.execMenu("JianShuHijackSchemeScriptLabel_Mobile",()=>{this.handlePrototype();}),w.execMenu("JianShuRemoveClipboardHijacking_Mobile",()=>{Z.removeClipboardHijacking();}),w.execMenu("JianShuAutoExpandFullText_Mobile",()=>{Z.autoExpandFullText();}),w.execMenuOnce("JianShuremoveFooterRecommendRead",()=>this.blockeFooterRecommendRead()),w.execMenu("JianShuShieldUserCommentsMobile",()=>this.blockUserComments());},addCSS(){Z.addCSS();},blockeFooterRecommendRead(){return d.info("å±è”½åº•éƒ¨æ¨èé˜…è¯»"),D.addBlockCSS("#recommended-notes")},handlePrototype(){d.info("å¤„ç†åŸå‹æ·»åŠ scriptæ ‡ç­¾");let e=Node.prototype.appendChild;U.Node.prototype.appendChild=function(t){let n=["img"];return t.src&&!t.src.includes("jianshu.io")&&!n.includes(t.localName)?(d.success(["ç¦æ­¢æ·»åŠ çš„å…ƒç´ ",t]),null):e.call(this,t)};},blockUserComments(){return d.info("å±è”½è¯„è®ºåŒº"),D.addBlockCSS("#comment-main")}},be=function(e,t,n,o,a,r,i){const m={text:e,type:"select",description:r,attributes:{},props:{},getValue(){return this.props[te].get(t,n)},callback(s){if(s==null)return;const c=s.value;if(d.info(`é€‰æ‹©ï¼š${s.text}`),typeof a=="function"&&a(s))return;this.props[te].set(t,c);},data:o};return Reflect.set(m.attributes,ae,t),Reflect.set(m.attributes,ie,n),we.initComponentsStorageApi("select",m,{get(s,c){return w.getValue(s,c)},set(s,c){w.setValue(s,c);}}),m},we={$data:{__storeApiFn:null,get storeApiValue(){return this.__storeApiFn||(this.__storeApiFn=new K.Dictionary),this.__storeApiFn}},getStorageApi(e){if(this.hasStorageApi(e))return this.$data.storeApiValue.get(e)},hasStorageApi(e){return this.$data.storeApiValue.has(e)},setStorageApi(e,t){this.$data.storeApiValue.set(e,t);},initComponentsStorageApi(e,t,n){let o;this.hasStorageApi(e)?o=this.getStorageApi(e):o=n,this.setComponentsStorageApiProperty(t,o);},setComponentsStorageApiProperty(e,t){Reflect.set(e.props,te,t);}},R=function(e,t,n,o,a,r,i,m){const s={text:e,type:"switch",description:a,disabled:i,attributes:{},props:{},getValue(){return this.props[te].get(t,n)},callback(c,v){const M=!!v;d.success(`${M?"å¼€å¯":"å…³é—­"} ${e}`),this.props[te].set(t,M);},afterAddToUListCallBack:r};return Reflect.set(s.attributes,ae,t),Reflect.set(s.attributes,ie,n),we.initComponentsStorageApi("switch",s,{get(c,v){return w.getValue(c,v)},set(c,v){w.setValue(c,v);}}),s},Fe={id:"jianshu-panel-config-mobile",title:"ç§»åŠ¨ç«¯",views:[{text:"",type:"container",views:[{text:"åŠŸèƒ½",type:"deepMenu",views:[{text:"",type:"container",views:[R("è‡ªåŠ¨å±•å¼€å…¨æ–‡","JianShuAutoExpandFullText_Mobile",true),R("é‡å®šå‘é“¾æ¥","JianShuAutoJumpRedirect_Mobile",true,void 0,"è‡ªåŠ¨è·³è½¬ç®€ä¹¦æ‹¦æˆªçš„Urlé“¾æ¥")]}]},{text:"å±è”½",type:"deepMenu",views:[{text:"",type:"container",views:[R("ã€å±è”½ã€‘åº•éƒ¨æ¨èé˜…è¯»","JianShuremoveFooterRecommendRead",false),R("ã€å±è”½ã€‘è¯„è®ºåŒº","JianShuShieldUserCommentsMobile",false)]}]},{text:"åŠ«æŒ/æ‹¦æˆª",type:"deepMenu",views:[{text:"",type:"container",views:[R("æ‹¦æˆª-å‰ªè´´æ¿","JianShuRemoveClipboardHijacking_Mobile",true,void 0,"å»é™¤ç¦æ­¢å¤åˆ¶"),R("åŠ«æŒ-å”¤é†’/è·³è½¬App","JianShuHijackSchemeScriptLabel_Mobile",true,void 0,"å»é™¤ç®€ä¹¦å”¤é†’è°ƒç”¨App")]}]}]}]},Ue={id:"jianshu-panel-common",title:"é€šç”¨",views:[{text:"Toasté…ç½®",type:"container",views:[be("Toastä½ç½®","qmsg-config-position","bottom",[{value:"topleft",text:"å·¦ä¸Šè§’"},{value:"top",text:"é¡¶éƒ¨"},{value:"topright",text:"å³ä¸Šè§’"},{value:"left",text:"å·¦è¾¹"},{value:"center",text:"ä¸­é—´"},{value:"right",text:"å³è¾¹"},{value:"bottomleft",text:"å·¦ä¸‹è§’"},{value:"bottom",text:"åº•éƒ¨"},{value:"bottomright",text:"å³ä¸‹è§’"}],e=>{d.info("è®¾ç½®å½“å‰Qmsgå¼¹å‡ºä½ç½®"+e.text);},"Toastæ˜¾ç¤ºåœ¨é¡µé¢ä¹å®«æ ¼çš„ä½ç½®"),be("æœ€å¤šæ˜¾ç¤ºçš„æ•°é‡","qmsg-config-maxnums",3,[{value:1,text:"1"},{value:2,text:"2"},{value:3,text:"3"},{value:4,text:"4"},{value:5,text:"5"}],void 0,"é™åˆ¶Toastæ˜¾ç¤ºçš„æ•°é‡"),R("é€†åºå¼¹å‡º","qmsg-config-showreverse",false,void 0,"ä¿®æ”¹Toastå¼¹å‡ºçš„é¡ºåº")]}]},Ge={id:"jianshu-panel-config-pc",title:"æ¡Œé¢ç«¯",views:[{text:"",type:"container",views:[{text:"åŠŸèƒ½",type:"deepMenu",views:[{text:"",type:"container",views:[R("å…¨æ–‡å±…ä¸­","JianShuArticleCenter",true),R("è‡ªåŠ¨å±•å¼€å…¨æ–‡","JianShuAutoExpandFullText",true),R("é‡å®šå‘é“¾æ¥","JianShuAutoJumpRedirect_PC",true,void 0,"è‡ªåŠ¨è·³è½¬ç®€ä¹¦æ‹¦æˆªçš„Urlé“¾æ¥")]}]},{text:"å±è”½",type:"deepMenu",views:[{text:"",type:"container",views:[R("ã€å±è”½ã€‘åº•éƒ¨æ¨èé˜…è¯»","JianShuShieldRecommendedReading",false),R("ã€å±è”½ã€‘è¯„è®ºåŒº","JianShuShieldUserComments",false),R("ã€å±è”½ã€‘ç›¸å…³æ–‡ç« ","JianShuShieldRelatedArticles",false),R("ã€å±è”½ã€‘å®¢æˆ·ç«¯å¼¹çª—","jianshu-shieldClientDialog",true,void 0,"å¼¹å‡ºçš„ã€æ‰«ç å®‰è£…ç®€ä¹¦å®¢æˆ·ç«¯ ç•…äº«å…¨æ–‡é˜…è¯»ä½“éªŒã€‘"),R("ã€å±è”½ã€‘é¡¶éƒ¨å¯¼èˆªæ ","jianshu-shieldTopNav",false),R("ã€å±è”½ã€‘åº•éƒ¨å·¥å…·æ ","jianshu-shieldBottomToolbar",false,void 0,"å±è”½æ‰åº•éƒ¨æ‚¬æµ®çš„è¯„è®ºè¾“å…¥æ¡†ã€è¯„è®ºã€ç‚¹èµ...")]}]},{text:"åŠ«æŒ/æ‹¦æˆª",type:"deepMenu",views:[{text:"",type:"container",views:[R("æ‹¦æˆª-å‰ªè´´æ¿","JianShuRemoveClipboardHijacking",true,void 0,"å»é™¤ç¦æ­¢å¤åˆ¶")]}]}]}]};re.addContentConfig([Ue,Ge,Fe]);w.init();let _e=x.isPhone(),Y="change_env_set",j=ee(Y);Ce.add({key:Y,text:`âš™ è‡ªåŠ¨: ${_e?"ç§»åŠ¨ç«¯":"PCç«¯"}`,autoReload:false,isStoreValue:false,showText(e){return j==null?e:e+` æ‰‹åŠ¨: ${j==1?"ç§»åŠ¨ç«¯":j==2?"PCç«¯":"æœªçŸ¥"}`},callback:()=>{let e=[0,1,2],t=window.prompt(`è¯·è¾“å…¥å½“å‰è„šæœ¬ç¯å¢ƒåˆ¤å®š

è‡ªåŠ¨åˆ¤æ–­: 0
ç§»åŠ¨ç«¯: 1
PCç«¯: 2`,"0");if(!t)return;let n=parseInt(t);if(isNaN(n)){_.error("è¾“å…¥çš„ä¸æ˜¯è§„èŒƒçš„æ•°å­—");return}if(!e.includes(n)){_.error("è¾“å…¥çš„å€¼å¿…é¡»æ˜¯0æˆ–1æˆ–2");return}n==0?X(Y):ce(Y,n);}});j!=null?(d.info(`æ‰‹åŠ¨åˆ¤å®šä¸º${j===1?"ç§»åŠ¨ç«¯":"PCç«¯"}`),j==1?ve.init():j==2?Z.init():(_.error("æ„å¤–ï¼Œæ‰‹åŠ¨åˆ¤å®šçš„å€¼ä¸åœ¨èŒƒå›´å†…"),X(Y))):_e?(d.info("è‡ªåŠ¨åˆ¤å®šä¸ºç§»åŠ¨ç«¯"),ve.init()):(d.info("è‡ªåŠ¨åˆ¤å®šä¸ºPCç«¯"),Z.init());

})(DOMUtils, pops, Utils, Qmsg);